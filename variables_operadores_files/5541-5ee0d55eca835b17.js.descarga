"use strict";(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([["5541"],{352329:function(e,t,r){r.d(t,{W:()=>a});var n=r(547550),i=r(904812),a={list:function(e){var t=e.params;return(0,n.UT)(i.av.segments.index({params:void 0===t?{}:t}))},delete:function(e){var t=e.id;return(0,n.pC)(i.av.segments.detail({id:t}))},create:function(e){var t=e.title,r=e.rules,a=e.visible,o=e.community_segment_consumer_attributes;return(0,n.Cu)(i.av.segments.index(),{title:t,rules:r,visible:a,community_segment_consumer_attributes:o})},show:function(e){var t=e.id;return(0,n.UT)(i.av.segments.detail({id:t}))},update:function(e){var t=e.id,r=e.title,a=e.rules;return(0,n.aU)(i.av.segments.detail({id:t}),{title:r,rules:a})},duplicate:function(e){var t=e.id,r=e.title;return(0,n.Cu)(i.av.segments.duplicate({id:t}),{title:r})},usageStatus:function(e){var t=e.id;return(0,n.UT)(i.av.segments.usageStatus({id:t}))},consumers:function(e){var t=e.id,r=e.params;return(0,n.UT)(i.av.segments.consumers({id:t,params:void 0===r?{}:r}))}}},514255:function(e,t,r){r.d(t,{G:()=>C});var n=r(683551),i=r(314121),a=r(100334),o=r(276011),s=r(757977),c=r(552883),u=r(256726),l=r(722024),f=r(870879),d=r(263285),p=r(339994),m=r(94531),v=r(435534),b="course-type-form",y=function(e){var t=e.onSubmit,r=e.courseSetting,i=void 0===r?{course_type:m.t}:r;return(0,n.jsx)(v.l,{id:b,onSubmit:t,defaultValues:{course_setting:i},validationSchema:void 0,className:void 0,formClassName:void 0,children:(0,n.jsx)(p.q,{hideLabel:!0})})},_=r(844527),h=function(e){var t=e.hideForm;return(0,n.jsx)(d.u_.HeaderActions,{children:(0,n.jsx)(_.h,{ariaLabel:(0,a.t)("back"),name:"20-chevron-left",onClick:t,iconSize:20,buttonSize:28,iconClassName:"!text-dark",className:"mr-2",variant:"primary"})})},g=r(982866),j="space_type_form",O=function(e){var t=e.onSubmit,r=(0,l.wh)().currentCommunity;return(0,n.jsx)(v.l,{id:j,onSubmit:t,defaultValues:{post_type:"basic"},children:(0,n.jsx)(g.m,{hideLabel:!0,isCoursesEnabled:null==r?void 0:r.courses_feature_flag_enabled})})};function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=function(e){var t=e.prefillData,r=e.selectedPostType,n=t&&"course_type"in t?t.course_type:null,a=!!n,o=S((0,i.useState)(null!=r?r:"basic"),2),s=o[0],c=o[1],u=S((0,i.useState)(r&&"course"!==r||a),2),l=u[0],f=u[1],d=S((0,i.useState)(!1),2),p=d[0],m=d[1],v=S((0,i.useState)("course"===r&&!a),2),b=v[0],y=v[1],_=S((0,i.useState)(n?{course_type:n}:void 0),2);return{postType:s,hasSelectedSpaceType:l,isLoading:p,isCourseSpace:b,courseSetting:_[0],setPostType:c,setHasSelectedSpaceType:f,setIsLoading:m,setIsCourseSpace:y,setCourseSetting:_[1]}},P=function(e){var t=e.prefillData,r=e.spaceGroupId,i=e.selectedPostType,o=(0,s.dd)(),l=x({prefillData:t,selectedPostType:i}),p=l.postType,m=l.hasSelectedSpaceType,v=l.isLoading,_=l.isCourseSpace,g=l.courseSetting,w=l.setPostType,S=l.setHasSelectedSpaceType,P=l.setIsLoading,E=l.setIsCourseSpace,I=l.setCourseSetting,k=_?(0,a.t)("spaces.form.create.course_types.choose_course_type"):m?(0,a.t)("spaces.form.create.space_titles.".concat(p)):(0,a.t)("spaces.form.create.space_types.choose_type"),C=function(){o.hide(),E(!1),I(void 0),S(!1),o.remove()};return(0,n.jsxs)(d.u_,{isOpen:o.visible,onClose:C,contentPortalId:"space-type-picker-modal",title:k,children:[(0,n.jsx)(d.u_.Overlay,{}),(0,n.jsxs)(d.u_.Content,{size:"md",children:[(0,n.jsxs)(d.u_.Header,{className:"!px-6 md:!px-8",children:[m&&(0,n.jsx)(h,{hideForm:function(){S(!1),"course"===p&&E(!0)}}),_&&(0,n.jsx)(h,{hideForm:function(){E(!1),S(!1)}}),(0,n.jsx)(d.u_.Title,{className:"w-auto",size:"sm",children:k}),(0,n.jsx)(d.u_.HeaderActions,{children:(0,n.jsx)(d.u_.CloseButton,{onClick:C})})]}),(0,n.jsxs)(d.u_.Body,{className:"!px-6 !py-1 md:!px-8",children:[!m&&!_&&(0,n.jsx)(O,{onSubmit:function(e){var t=e.post_type;w(t),"course"===t?E(!0):S(!0)}}),_&&(0,n.jsx)(y,{onSubmit:function(e){I(e.course_setting),E(!1),S(!0)},courseSetting:g}),m&&(0,n.jsx)(c._,{onClose:C,post_type:p,courseSetting:g,hideSpaceTypePicker:!0,currentSpaceGroupId:r,setExternalLoadingState:P,prefillData:t,renderHeader:function(){return(0,n.jsx)(n.Fragment,{})},renderFooter:function(){return(0,n.jsx)(n.Fragment,{})}})]}),(0,n.jsx)(d.u_.Footer,{children:(0,n.jsx)(f.z,{form:m?u.e:_?b:j,type:"submit","data-testid":"create-space-button",variant:"circle",full:!0,large:!0,disabled:v,children:m?v?(0,a.t)("creating"):(0,a.t)("create_space"):(0,a.t)("spaces.form.create.space_types.next")})})]})]})};function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var I=function(e){var t,r=e.spaceGroupId,o=e.prefillData,l=e.postType,p=(0,s.dd)(),m=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),a.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return E(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=m[0],b=m[1];return(0,n.jsxs)(d.u_,{isOpen:p.visible,onClose:p.hide,contentPortalId:"create-space-content-portal",title:(0,a.t)("create_space"),children:[(0,n.jsx)(d.u_.Overlay,{}),(0,n.jsxs)(d.u_.Content,{size:"md",children:[(0,n.jsxs)(d.u_.Header,{className:"!px-6 md:!px-8",children:[(0,n.jsx)(d.u_.Title,{size:"sm",children:(0,a.t)("create_space")}),(0,n.jsx)(d.u_.HeaderActions,{children:(0,n.jsx)(d.u_.CloseButton,{onClick:p.hide})})]}),(0,n.jsx)(d.u_.Body,{className:"!px-6 !py-1 md:!px-8",children:(0,n.jsx)(c._,{onClose:p.hide,setExternalLoadingState:b,currentSpaceGroupId:r,post_type:l,prefillData:o,renderHeader:function(){return(0,n.jsx)(n.Fragment,{})},renderFooter:function(){return(0,n.jsx)(n.Fragment,{})}})}),(0,n.jsx)(d.u_.Footer,{children:(0,n.jsx)(f.z,{disabled:v,type:"submit",form:u.e,full:!0,large:!0,children:(0,a.t)(v?"creating":"create_space")})})]})]})},k=s.gk.create(function(e){var t=e.spaceGroupId,r=e.postType,i=e.prefillData,a=(0,l.wh)().currentCommunityMember;return(0,o.vb)(a)?(0,n.jsx)(P,{spaceGroupId:t,selectedPostType:r,prefillData:i}):(0,n.jsx)(I,{spaceGroupId:t,postType:r,prefillData:i})}),C=function(){return(0,s.dd)(k)}},489895:function(e,t,r){r.d(t,{I:()=>a});var n=r(683551),i=r(583972),a=function(e){var t=e.profile,r=e.className,a=void 0===r?"!h-[3rem] !w-[3rem]":r;return(0,n.jsx)(n.Fragment,{children:t.avatar_url?(0,n.jsx)("img",{src:t.avatar_url,alt:t.name,className:"rounded-full ".concat(a),loading:"lazy"}):(0,n.jsx)(i.JO,{type:"120-ai-bot",size:120,className:a})})}},190811:function(e,t,r){r.d(t,{x:()=>i});var n=r(722024),i=function(){var e=(0,n.wh)(),t=e.currentCommunity;return!!(!e.isLoading&&(null==t?void 0:t.analytics_filters_feature_flag_enabled))}},967969:function(e,t,r){r.d(t,{OH:()=>b,X5:()=>_,q_:()=>y,vQ:()=>h});var n=r(214813),i=r(714844),a=r(100334),o=r(722024),s=r(547550),c=r(904812),u=r(169530);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(e){r(e);return}s.done?t(c):Promise.resolve(c).then(n,i)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){f(a,n,i,o,s,"next",e)}function s(e){f(a,n,i,o,s,"throw",e)}o(void 0)})}}function p(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r,n,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){var u=[s,c];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}var v=["internal_api","community_bot","agents"],b=function(e){var t=e.currentPage,r=e.perPage,n=void 0===r?10:r,a=e.enabled;return(0,i.useQuery)({queryKey:p(v).concat([t,n]),queryFn:function(){return(0,s.UT)(c.av.communityBot.agents.index({params:{page:t,per_page:n}}))},enabled:void 0===a||a,staleTime:3e5,cacheTime:6e5})},y=function(e){var t=e.id;return(0,i.useQuery)({queryKey:p(v).concat([t]),queryFn:function(){return(0,s.UT)(c.av.communityBot.agents.show({id:t}))}})},_=function(){var e=(0,u.pm)().success;return(0,i.useMutation)(function(){return d(function(){return m(this,function(e){switch(e.label){case 0:return[4,(0,s.Cu)(c.av.communityBot.agents.create())];case 1:return[2,e.sent()]}})})()},{onSuccess:function(){e((0,a.t)("changes_saved"))}})},h=function(e){var t=e.id,r=(0,i.useQueryClient)(),l=(0,u.pm)(),f=l.success,b=l.error,y=(0,o.wh)().refetch;return(0,i.useMutation)(function(e){var r=1===Object.keys(e).length&&"enabled"in e;return(0,s.aU)(c.av.communityBot.agents.update({id:t}),{community_bot_profile:r?{enabled:e.enabled}:(0,n.omit)(e,"enabled")})},{onSuccess:function(e){r.invalidateQueries(p(v).concat([e.id])),r.invalidateQueries(p(v)),f((0,a.t)("changes_saved"))},onError:function(e){return d(function(){var t,r;return m(this,function(i){switch(i.label){case 0:return[4,y()];case 1:return i.sent(),(null==e||null==(t=e.body)?void 0:t.error_details)?(r=(0,n.values)((0,n.omit)(e.body.error_details,"message","success")),b((0,n.flatten)(r).join(", "))):b((0,a.t)("request_failure_message")),[2]}})})()}})}},616529:function(e,t,r){r.d(t,{G:()=>s});var n=r(683551),i=r(244289),a=r(198615),o=r(531515),s=function(e){return function(t){var r=t.index,s=t.onApply,c=t.param,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,["index","onApply","param"]),l=(0,a.R)().onClear,f="community_segment.rules.rules[".concat(r,"]");return(0,n.jsx)(i.Qr,{name:f,defaultValue:c,render:function(t){var i,a,c=t.field,f=c.value,d=c.onChange;return(0,n.jsx)(e,(i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},u),a=a={param:f,onApply:function(e){!e||(0,o.N)(e)?null==l||l(r):d(e),s(e)}},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))}),i))}})}}},641806:function(e,t,r){r.d(t,{x:()=>u});var n=r(683551),i=r(379600),a=r.n(i),o=r(214813),s=r(435534),c=function(e){var t=e.children;return(0,n.jsx)("div",{className:"w-full",children:t})},u=function(e){var t=e.name,r=e.translationRoot,i=e.id,u=e.label,l=e.description,f=e.childrenWrapper,d=e.isHorizontal,p=e.hideLabel,m=e.placeholder,v=e.hidePlaceholder,b=e.hideDescription,y=e.rules,_=e.className,h=e.fullWidth,g=e.children,j=e.isDisabled,O=e.tooltipText,w=e.inlineReverse,S=e.inline;return(0,n.jsx)(s.l.Item,{id:null!=i?i:(0,o.uniqueId)("".concat(t,"-")),name:t,translationRoot:r,label:u,description:l,className:a()("flex gap-4",{"flex-col":!(void 0!==d&&d)},_),labelWrapperClassName:"!w-full !order-none !p-0",placeholder:m,hidePlaceholder:void 0!==v&&v,hideBorder:!0,hideLabel:void 0!==p&&p,hideDescription:void 0!==b&&b,childrenWrapper:void 0===f?c:f,rules:y,fullWidth:h,isDisabled:void 0!==j&&j,tooltipText:O,inlineReverse:void 0!==w&&w,inline:void 0!==S&&S,children:g})}},118640:function(e,t,r){r.d(t,{F:()=>c,L:()=>s});var n=r(314121),i=r(714844),a=r(309785);function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var s=20,c=function(e){var t,r,c,u,l,f,d,p=null!=e?e:{},m=p.query,v=void 0===m?"":m,b=p.perPage,y=void 0===b?s:b,_=p.initialPage,h=void 0===_?1:_,g=p.options,j=["settings","invitation-links",v,y,h],O=o({getNextPageParam:function(e){var t=e.has_next_page,r=e.page;return t?Number(r)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0},void 0===g?{}:g),w=(0,i.useInfiniteQuery)(j,function(e){var t=e.pageParam,r=void 0===t?h:t,n=1;r>0&&(n=r);var i=o({page:n,per_page:y},v&&{query:v});return a.bC.list({params:i})},O),S=(0,n.useMemo)(function(){var e,t;return null!=(t=null==(e=w.data)?void 0:e.pages)?t:[]},[null==(c=w.data)?void 0:c.pages]),x=null!=(f=null==(u=S[0])?void 0:u.count)?f:0,P=null!=(d=null==(l=S[0])?void 0:l.per_page)?d:y;return t=o({},w),r=r={queryKey:j,totalInvitationLinks:x,pageSize:P,pages:S},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}},46967:function(e,t,r){r.d(t,{f$:()=>f,p6:()=>s,uf:()=>u,ze:()=>l});var n=r(47959),i=r(788431),a=r(214813),o=r(100334),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PP";if(!e)return"─";var r=new Date(e);return(0,n.J)(r)?(0,a.startCase)((0,i.WU)(r,t)):"─"},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.admin?(0,o.t)("role_admin"):e.moderator?(0,o.t)("moderator"):(0,o.t)("member")},u=function(e){return"CommunityMember"===e.type?c(e.roles):"─"},l=function(e){return e?(0,o.t)("settings.manage_members.subscribed"):(0,o.t)("settings.manage_members.unsubscribed")},f=function(e){return e?(0,o.t)(["invitation_status_column",e]):"─"}},525608:function(e,t,r){r.d(t,{CU:()=>L,EC:()=>U,Hz:()=>et,JN:()=>Y,Jm:()=>z,LI:()=>V,Oq:()=>q,Q1:()=>ee,Q_:()=>$,VX:()=>T,W9:()=>D,Yl:()=>G,en:()=>W,ih:()=>er,j7:()=>F,kQ:()=>J,nL:()=>N,pq:()=>Q,r7:()=>R,s3:()=>X,sE:()=>H,sm:()=>Z,uN:()=>M,xz:()=>A,yE:()=>B,zu:()=>K});var n=r(100334),i=r(375313),a=i.f.SpaceGroupsFilterV2,o=i.f.SpacesFilter,s=i.f.StatusFilter,c=i.f.MemberTagsFilter,u=i.f.PaywallsFilter,l=i.f.EventsFilter,f=i.f.HasPastDueSubscriptionFilter,d=i.f.JoinedCommunityDaysAgoFilter,p=i.f.LastLoggedInDaysAgoFilter,m=i.f.AvatarSet,v=i.f.ActivityScoreFilter,b=i.f.HeadlineFilter,y=i.f.NameFilter,_=i.f.LocationFilter,h=i.f.GeoLocationFilter,g=i.f.BioFilter,j=i.f.EmailFilter,O=i.f.InvitationLinksFilter,w=i.f.LevelFilter,S=i.f.EmailMarketingFilter,x=i.f.MemberFilter,P=i.f.InvitationStatusFilter,E=i.f.InvitedAtDaysAgoFilter,I=i.f.RoleFilter,k=i.f.SegmentFilter,C=i.f.AccessGroupsFilter,A={name:"geo_location",component:h,get label(){return(0,n.t)("members_directory.header.search.filters.geo_location")}},L={name:"name",component:y,get label(){return(0,n.t)("members_directory.header.search.filters.name")}},T={name:"email",component:j,get label(){return(0,n.t)("members_directory.header.search.filters.email")}},N={name:"subscribed_to_marketing_emails",component:S,get label(){return(0,n.t)("members_directory.header.search.filters.email_marketing")}},D={name:"member",component:x,get label(){return(0,n.t)("members_directory.header.search.filters.member")}},M={name:"invitation_status",component:P,get label(){return(0,n.t)("members_directory.header.search.filters.invitation_status.title")}},F={name:"invited_at_days_ago",component:E,get label(){return(0,n.t)("members_directory.header.search.filters.invited_at_days_ago")}},R={name:"invitation_link_ids",component:O,get label(){return(0,n.t)("members_directory.header.search.filters.invitation_link_ids.singular_title")}},U={name:"tags",component:c,get label(){return(0,n.t)("members_directory.header.search.filters.tags.singular_title")}},G={name:"spaces",component:o,get label(){return(0,n.t)("members_directory.header.search.filters.spaces.singular_title")}},W={name:"space_groups",component:a,get label(){return(0,n.t)("members_directory.header.search.filters.space_groups.singular_title")}},q={name:"online_status",component:s,get label(){return(0,n.t)("members_directory.header.search.filters.online_status")}},B={name:"bio",component:g,get label(){return(0,n.t)("members_directory.header.search.filters.bio")}},Q={name:"headline",component:b,get label(){return(0,n.t)("members_directory.header.search.filters.headline")}},H={name:"location",component:_,get label(){return(0,n.t)("members_directory.header.search.filters.location")}},K={name:"paywalls",component:u,get label(){return(0,n.t)("members_directory.header.search.filters.paywalls.singular_title")}},V={name:"events",component:l,get label(){return(0,n.t)("members_directory.header.search.filters.events.singular_title")}},Z={name:"has_past_due_subscription",component:f,get label(){return(0,n.t)("members_directory.header.search.filters.has_past_due_subscription")}},z={name:"joined_community_days_ago",component:d,get label(){return(0,n.t)("members_directory.header.search.filters.joined_community_days_ago")},get listLabel(){return(0,n.t)("members_directory.header.search.filters.joined_community_days_ago_available")}},Y={name:"last_logged_in_days_ago",component:p,get label(){return(0,n.t)("members_directory.header.search.filters.last_logged_in_days_ago")}},J={name:"is_avatar_set",component:m,get label(){return(0,n.t)("members_directory.header.search.filters.avatar_set")}},$={name:"activity_score",component:v,get label(){return(0,n.t)("members_directory.header.search.filters.activity_score")}},X={name:"level",component:w,get label(){return(0,n.t)("members_directory.header.search.filters.level")}},ee={name:"role",component:I,get label(){return(0,n.t)("members_directory.header.search.filters.role")}},et={name:"segment_id",component:k,get label(){return(0,n.t)("members_directory.header.search.filters.segments.singular_title")}},er={name:"access_group_ids",component:C,get label(){return(0,n.t)("members_directory.header.search.filters.access_groups.singular_title")}}},926396:function(e,t,r){r.d(t,{C:()=>c,i:()=>u});var n=r(714844),i=r(547550),a=r(904812),o=r(92475);function s(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(e){r(e);return}s.done?t(c):Promise.resolve(c).then(n,i)}var c="archived-profile-fields",u=function(){return{getArchivedQueryOptions:(0,n.useQuery)({queryKey:[c],queryFn:function(){var e;return(e=function(){return function(e,t){var r,n,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){var u=[s,c];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,i.UT)(a.av.profileFields.archivedList())]})},function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){s(a,n,i,o,c,"next",e)}function c(e){s(a,n,i,o,c,"throw",e)}o(void 0)})})()},select:function(e){return(0,o.fW)(e)}})}}},835604:function(e,t,r){r.d(t,{K:()=>d,k:()=>m});var n=r(714844),i=r(100334),a=r(547550),o=r(904812),s=r(775484),c=r(169530),u=r(537437),l=r(92475);function f(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(e){r(e);return}s.done?t(c):Promise.resolve(c).then(n,i)}var d="page-profile-fields",p=function(e){var t=e.visible_profile_fields,r=e.hidden_profile_fields;return{visibleFields:(0,l.fW)(t),hiddenFields:(0,l.fW)(r)}},m=function(e){var t=e.currentPage,r=(0,n.useQueryClient)(),l=(0,c.pm)(),m=[d,t];return{getOptions:(0,n.useQuery)({queryKey:m,queryFn:function(){var e;return(e=function(){var e;return function(e,t){var r,n,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){var u=[s,c];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return[4,(0,a.UT)(o.av.profileFields.pageIndex(t))];case 1:if(!(e=r.sent()))return[2];return[2,p(e)]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){f(a,n,i,o,s,"next",e)}function s(e){f(a,n,i,o,s,"throw",e)}o(void 0)})})()}}),reorderFields:(0,n.useMutation)(function(e){var r=e.reorderedProfileFields,n=e.hideProfileField,i=e.unhideProfileField;return(0,a.Cu)(o.av.profileFields.pageFieldReorder(),{page_name:t,reordered_profile_fields:null==r?void 0:r.map(function(e){return e.id}),hide_profile_field_id:null==n?void 0:n.id,unhide_profile_field_id:null==i?void 0:i.id})},{onError:function(){l.error((0,i.t)("something_went_wrong"))},onSuccess:function(e){r.setQueryData(m,p(e)),r.invalidateQueries({queryKey:[(0,u.OT)()]}),r.removeQueries({queryKey:[s.Wx]})}})}}},537437:function(e,t,r){r.d(t,{Gn:()=>v,OT:()=>p,Yw:()=>b});var n=r(714844),i=r(351838),a=r(547550),o=r(904812),s=r(826795),c=r(168039);function u(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(e){r(e);return}s.done?t(c):Promise.resolve(c).then(n,i)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){l(e,t,r[t])})}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var p=function(e){var t="PROFILE_FIELD_DETAIL";return e?[t,e]:[t]},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return("headline"===t?Object.values(s.Nd):Object.values(s.Nd).filter(function(e){return e!==s.Nd.COMMUNITY_VIEW})).map(function(t){var r=e.find(function(e){return e.name===t});return r?d(f({},r),{visible:r.visible}):{name:t,visible:!0}})},v=function(e){var t,r;return d(f({},e),(l(r={},c.PX[c.Z9.SELECT].CHOICES_ATTRIBUTES,e.choices),l(r,c.PX[c.Z9.NUMBER].NUMBER_OPTIONS,e.number_options),l(r,c.k_,m(e.pages,e.key)),l(r,c.xg.HIDDEN,null==(t=e.pages)?void 0:t.every(function(e){return!e.visible})),r))},b=function(e){var t=e.fieldId;return{getOptions:(0,n.useQuery)(p(t),function(){var e;return(e=function(){return function(e,t){var r,n,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){var u=[s,c];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(e){return(0,i.Z)(t,"Field ID is required"),[2,(0,a.UT)(o.av.profileFields.detail(t))]})},function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){u(a,n,i,o,s,"next",e)}function s(e){u(a,n,i,o,s,"throw",e)}o(void 0)})})()},{select:function(e){return v(e)},enabled:!!t})}}},92475:function(e,t,r){r.d(t,{Eu:()=>g,fW:()=>h,or:()=>j});var n=r(214813),i=r(714844),a=r(100334),o=r(664578),s=r(547550),c=r(904812),u=r(775484),l=r(169530),f=r(168039),d=r(835604),p=r(537437);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(e){r(e);return}s.done?t(c):Promise.resolve(c).then(n,i)}function b(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){v(a,n,i,o,s,"next",e)}function s(e){v(a,n,i,o,s,"throw",e)}o(void 0)})}}function y(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){var r,n,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){var u=[s,c];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}var h=function(e){if(e)return e.map(p.Gn)},g="profile-fields",j=function(){var e=(0,l.pm)(),t=(0,i.useQueryClient)(),r=(0,i.useQuery)([g],function(){return b(function(){return _(this,function(e){switch(e.label){case 0:return[4,(0,s.UT)(c.av.profileFields.index())];case 1:return[2,h(e.sent())]}})})()}),m=(0,i.useMutation)(function(e){return(0,s.Cu)(c.av.profileFields.index(),e)},{onSuccess:function(){return b(function(){return _(this,function(e){switch(e.label){case 0:return[4,r.refetch()];case 1:return e.sent(),[4,t.invalidateQueries({queryKey:[d.K]})];case 2:return e.sent(),[4,t.invalidateQueries({queryKey:[o.d]})];case 3:return e.sent(),t.removeQueries({queryKey:[u.Wx]}),[2]}})})()},onError:function(t){var r;e.error(null!=(r=t.errorDetails)?r:t.message)}}).mutateAsync,v=(0,i.useMutation)(function(e){var t=e.id,r=e.payload;return(0,s.gN)(c.av.profileFields.detail(t),r)},{onSuccess:function(e){return b(function(){return _(this,function(n){switch(n.label){case 0:return[4,r.refetch()];case 1:return n.sent(),[4,t.invalidateQueries({queryKey:[o.d]})];case 2:return n.sent(),t.removeQueries({queryKey:[d.K]}),t.removeQueries({queryKey:[u.Wx]}),[4,t.invalidateQueries({queryKey:(0,p.OT)(e.id)})];case 3:return n.sent(),[2]}})})()},onError:function(t){e.error(t.message)}}).mutateAsync,j=function(e){var t=e[f.AZ.FIELD_TYPE];return Object.values(f.PX[t])},O=function(e){var t=j(e),r=y(f.Yp).concat(["pages_attributes"],y(t));return(0,n.pick)(e,r)};return{getOptions:r,onNewProfileField:function(t,r){m(O(t),{onSuccess:function(){e.success((0,a.t)("profile_fields.field_modal.success_message")),r()}})},onEditProfileField:function(t,r,n){v({id:t,payload:O(r)},{onSuccess:function(){e.success((0,a.t)("changes_saved")),n()}})}}}},174933:function(e,t,r){r.d(t,{Gg:()=>d,L8:()=>u,V6:()=>l,hE:()=>f});var n=r(314121),i=r(874949),a=r.n(i),o=r(714844),s=r(352329);function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var u=20,l="segments",f="all",d=function(e){var t,r,i,d,p,m,v=e.perPage,b=void 0===v?u:v,y=e.initialPage,_=void 0===y?1:y,h=e.options,g=[l,f,b,_],j=(0,o.useInfiniteQuery)(c({queryKey:g,queryFn:function(e){var t=e.pageParam,r=void 0===t?_:t,n=1;"number"==typeof r&&r>0&&(n=r);var i={page:n,per_page:b};return s.W.list({params:i})},getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===h?{}:h)),O=(0,n.useMemo)(function(){var e;return(null==(e=j.data)?void 0:e.pages)||[]},[null==(i=j.data)?void 0:i.pages]),w=(null==(d=O[0])?void 0:d.per_page)||b,S=null!=(m=null==(p=O[0])?void 0:p.count)?m:0,x=(0,n.useMemo)(function(){return a()(O.map(function(e){return e.records}))},[O]);return t=c({},j),r=r={queryKey:g,segments:x,pageSize:w,pages:O,count:S},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}},807187:function(e,t,r){r.d(t,{O5:()=>l,ed:()=>i,tz:()=>c,w5:()=>u});var n=r(194400),i=n.Ry().shape({prefill_token:n.Z_().optional()}),a=function(e){var t=["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting"].filter(function(t){return!0===e[t]});return t.length>0?t:void 0},o=function(e){var t={},r=a(e);return r&&(t.notification_type=r),"auto_rsvp_invited_attendees"in e&&"boolean"==typeof e.auto_rsvp_invited_attendees&&(t.event_auto_rsvp_enabled=e.auto_rsvp_invited_attendees),t},s=function(e){var t={};return e.notification_type&&(t.notification_type=e.notification_type),t},c=function(e,t){var r={};switch(e.name&&(r.name=e.name),e.access&&(r.visibility=e.access),e.space_group_id&&(r.space_group_id=e.space_group_id),t){case"basic":case"post":case"image":case"event":("default_notification_setting"in e||"auto_rsvp_invited_attendees"in e)&&Object.assign(r,o(e));break;case"chat":"notification_type"in e&&Object.assign(r,s(e))}return r},u=function(e){return e.space_type&&({posts:"basic",events:"event",chat:"chat",course:"course",members:"members",images:"image"})[e.space_type]||"basic"},l=function(e,t){var r=new URL("".concat(window.location.origin).concat(t));r.searchParams.delete("prefill_token"),e("".concat(r.pathname).concat(r.search))}},642105:function(e,t,r){r.d(t,{I:()=>u,WX:()=>s,le:()=>c});var n=r(683551),i=r(314121),a=r(849181);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=(0,i.createContext)(null);s.displayName="CommunityMembersListContext";var c=function(){var e=(0,i.useContext)(s);return console.assert(e,"useCommunityMembersListContext is being used outside context provider."),e},u=function(e){var t,r=e.ids,i=e.children,c=(0,a.y)({ids:function(e){if(Array.isArray(e))return o(e)}(t=new Set(null!=r?r:[]))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return o(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),withDeleted:!0,enabled:!!(null==r?void 0:r.length)});return(0,n.jsx)(s.Provider,{value:c,children:i})}},665430:function(e,t,r){r.d(t,{I:()=>s.I,le:()=>s.le,Xg:()=>c});var n=r(683551),i=r(100334),a=r(712781),o=r(357382),s=r(642105),c=function(e){var t,r=e.id,c=e.isAvatarHidden,u=e.isLastNameHidden,l=(0,s.le)();if(!l||l.isLoading)return(0,n.jsx)(o.a,{center:!0,className:"!p-0"});var f=null==(t=l.data)?void 0:t.records.find(function(e){return e.id===r});if(!f)return(0,n.jsx)("span",{className:"break-normal text-sm",children:(0,i.t)("deactivated_member")});var d=f.first_name,p=f.name,m=f.avatar_url;return(0,n.jsxs)(n.Fragment,{children:[!c&&(0,n.jsx)("span",{className:"pl-3",children:(0,n.jsx)("div",{className:"float-left",children:(0,n.jsx)(a.W,{size:"6",src:null!=m?m:void 0,name:p})})}),(0,n.jsx)("span",{className:"break-normal text-sm",children:u?d:p})]})}},794936:function(e,t,r){r.d(t,{p:()=>c});var n=r(683551),i=r(314121),a=r(100334),o=r(559397),s="settings.workflows.view.header",c=function(e){var t=e.isDisabled,r=e.isLoading,c=e.isWorkflowActive,u=e.hasNoActions,l=e.hasActionsUnsaved,f=e.isDraft,d=void 0!==f&&f,p=e.onChange,m=(0,i.useCallback)(function(){return l?(0,a.t)([s,"incomplete_actions_message"]):d?(0,a.t)([s,"disabled_tooltip"]):u?(0,a.t)([s,"has_no_actions_message"]):(0,a.t)([s,"off_tooltip"])},[l,u,d]),v=(0,i.useCallback)(function(e){null==p||p(e)},[p]);return(0,n.jsx)(o.J,{isChecked:c,checkedLabel:(0,a.t)([s,"on_value"]),uncheckedLabel:(0,a.t)([s,"off_value"]),tooltipCheckedLabel:(0,a.t)([s,"on_tooltip"]),tooltipUncheckedLabel:m(),tooltipPlacement:"bottom",isLoading:r,isDisabled:t,onChange:v,containerClassName:"mx-auto",className:""})}},394392:function(e,t,r){r.d(t,{a:()=>c});var n=r(683551),i=r(467213),a=r(379600),o=r.n(a),s=function(e){var t=e.tooltipContent,r=e.className,i=e.children;return(0,n.jsx)("div",{className:o()("flex items-center justify-center",r,{"cursor-pointer":t}),children:i})},c=function(e){var t=e.tooltipContent,r=e.className,a=e.children;return t?(0,n.jsx)(i.Y,{placement:"top",content:t,children:(0,n.jsx)(s,{tooltipContent:t,className:r,children:a})}):(0,n.jsx)(s,{tooltipContent:t,className:r,children:a})}},990978:function(e,t,r){r.d(t,{W:()=>p});var n=r(683551),i=r(645391),a=r(583972),o=r(189713),s=r(394392),c=r(314121),u=r(100334),l=r(816840),f="settings.workflows",d=function(e){var t=e.actions,r=e.truncationLimit,n=(0,c.useMemo)(function(){return t.filter(function(e){return""!==e}).map(function(e){var t=(0,l.mR)(e);return{title:"".concat((0,u.t)([f,"action_types",e],{defaultValue:(0,u.t)([f,"action_types","unknown"])})),icon:t}})},[t]),i=(0,c.useMemo)(function(){return t.slice(r).map(function(e){return"".concat((0,u.t)([f,"action_types",e],{defaultValue:(0,u.t)([f,"action_types","unknown"])}))}).join(", ")},[t,r]),a=t.length-r;return{actions:a>1?n.slice(0,r):n,remainingActionsCount:a,remainingItemsTooltip:i}},p=function(e){var t=e.actions,r=void 0===t?[]:t,c=e.size,u=void 0===c?"lg":c,l=e.truncationLimit,f=void 0===l?2:l,p=e.className,m=d({actions:r,truncationLimit:f}),v=m.actions,b=m.remainingActionsCount,y=m.remainingItemsTooltip;return 0===r.length||f<1?(0,n.jsx)("div",{className:"py-[25px] leading-none",children:"-"}):(0,n.jsxs)("div",{className:(0,i.A)("flex items-center",{"gap-1":"md"===u,"gap-2":"lg"===u},p),children:[v.map(function(e,t){var r=e.title,i=e.icon;return(0,n.jsx)(s.a,{tooltipContent:r,children:(0,n.jsx)("div",{className:"bg-tertiary flex size-8 max-h-8 max-w-[2rem] shrink-0 items-center justify-center rounded-full",children:(0,n.jsx)(a.JO,{type:i,size:16,className:"text-dark !h-4 !w-4 shrink-0"})})},"".concat(i,"-").concat(t))}),b>1&&(0,n.jsx)(s.a,{tooltipContent:y,children:(0,n.jsx)("div",{className:"bg-tertiary flex size-8 max-h-8 max-w-[2rem] shrink-0 items-center justify-center rounded-full",children:(0,n.jsx)(o.Z.LabelSm,{weight:"semibold",children:(0,n.jsx)("span",{className:(0,i.A)("text-dark flex",{"text-xs":"md"===u}),children:"+".concat(b)})})})})]})}},183214:function(e,t,r){r.d(t,{u:()=>a});var n=r(683551),i=r(378751),a=function(e){var t=e.date,r=e.shouldIncludeTime?i.f.short_date_at_short_time:i.f.long_date;return(0,n.jsx)("span",{className:"break-normal",children:t?(0,i.w)({dateTime:new Date(t),format:r}):"-"})}},999127:function(e,t,r){r.d(t,{W:()=>a});var n=r(683551),i=r(189713),a=function(e){var t=e.children;return(0,n.jsx)(i.Z.LabelSm,{weight:"medium",children:(0,n.jsx)("span",{className:"break-normal",children:t})})}},2945:function(e,t,r){r.d(t,{m:()=>H});var n=r(314121),i=r(214813),a=r(100334),o=r(544442),s=r(288105),c=r(266072),u=r(46967),l=r(511037),f=r(930739),d=r(867877),p=r(711888),m=r(108906),v=r(305255),b=r(552148),y=r(866950),_=function(e){var t=null==e?void 0:e.map(function(e){return String(e.value)}),r=(0,y.S)({params:{ids:t},enabled:!!(null==t?void 0:t.length)}).data;return(0,n.useMemo)(function(){return null==r?void 0:r.reduce(function(e,t){return e[String(t.id)]=t.name,e},{})},[r])},h=r(714844),g=r(309785),j=function(e){var t=e.ids;return(0,h.useQuery)(["workflows","events","list",t],function(){return g.S1.listEvents({params:{ids:t}})},{enabled:!(0,i.isEmpty)((0,i.compact)(t))})},O=function(e){var t=j({ids:null==e?void 0:e.value}).data,r=void 0===t?{}:t;return(0,n.useMemo)(function(){var e;return(null==(e=r.records)?void 0:e.reduce(function(e,t){return e[t.id]=t.name,e},{}))||{}},[r])},w=r(85355),S=function(){var e=(0,w.t)().memberTags;return(0,n.useMemo)(function(){return e.map(function(e){return{id:e.id,name:e.name}}).reduce(function(e,t){return e[t.id]=t.name,e},{})},[e])},x=r(949921),P=function(){var e=(0,x.y)().allPaywalls;return(0,n.useMemo)(function(){return e.reduce(function(e,t){return e[t.id]=t.display_name,e},{})},[e])},E=r(952634),I=function(){var e=(0,E.h)().segments;return(0,n.useMemo)(function(){return null==e?void 0:e.map(function(e){return{id:e.id,title:e.title}}).reduce(function(e,t){return e[t.id]=t.title,e},{})},[e])},k=r(712663),C=function(){var e=(0,k.t)({valueKey:"slug"}).visibleSpaceGroups;return(0,n.useMemo)(function(){return e.reduce(function(e,t){return e[t.value]=t.label,e},{})},[e])},A=r(722024),L=function(){var e=(0,A.nT)().helpers.spaceWithViewContentAccess();return(0,n.useMemo)(function(){return e.map(function(e){return{label:e.emoji?"".concat(e.emoji," ").concat(e.name):e.name,value:e.slug}}).reduce(function(e,t){return e[t.value]=t.label,e},{})},[e])},T="settings.workflows.view",N=function(e,t){return(0,o.T)(e,e.value?t[e.value]:null)},D=function(e){var t=e.filterParam,r=e.spaceNameMap,n=void 0===r?{}:r,o=e.tagsIdMap,y=void 0===o?{}:o,_=e.spaceGroupNameMap,h=void 0===_?{}:_,g=e.eventNameMap,j=void 0===g?{}:g,O=e.paywallsNameMap,w=void 0===O?{}:O,S=e.segmentsIdMap,x=void 0===S?{}:S,P=e.accessGroupNameMap,E=void 0===P?{}:P,I=t.key,k=t.value,C=(0,a.t)([T,"audience_filters",I],{defaultValue:(0,a.t)([T,"unknown"])}),A={name:l.d1,email:l.d1,headline:l.d1,spaces:function(e){return N(e,n)},tags:function(e){return N(e,y)},space_groups:function(e){return N(e,h)},events:function(e){return N(e,j)},paywalls:function(e){return N(e,w)},joined_community_days_ago:m.P,last_logged_in_days_ago:v.$,activity_score:f.i,geo_location:s.d,is_avatar_set:function(e){var t=e.value;return(0,d.c)(t)},member:function(e){var t=e.value;return(0,b.c)({selectedText:t})},segment_id:function(e){return x[Number(e.value)]},access_group_ids:function(e){return N(e,E)},invitation_status:function(e){var t=e.value;return(0,u.f$)(t)},invited_at_days_ago:c.l,subscribed_to_marketing_emails:function(e){var t=e.value;return(0,p.c)({selectedText:t})}};return(0,i.isFunction)(A[I])?{name:C,value:A[I](t)}:{name:C,value:k}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=L(),r=S(),a=C(),o=O(e.find(function(e){return"events"===e.key})),s=P(),c=I(),u=_(e.filter(function(e){return"access_group_ids"===e.key}));return(0,n.useMemo)(function(){var n=e.filter(function(e){return"profile_field"!==e.key});return(0,i.isEmpty)(n)?[]:n.map(function(e){return D({filterParam:e,spaceNameMap:t,tagsIdMap:r,spaceGroupNameMap:a,eventNameMap:o,paywallsNameMap:s,segmentsIdMap:c,accessGroupNameMap:u})})},[e,t,r,a,o,s,c,u])},F=r(926396),R=r(826795),U=r(288778),G=r(960602),W=function(e,t){var r=t.label,n=t.field_type,i=t.choices,a=null;if([R.Z9.TEXT,R.Z9.NUMBER,R.Z9.TEXTAREA,R.Z9.LINK].includes(n))a=(0,U.d)(e);else if([R.Z9.SELECT,R.Z9.CHECKBOX].includes(n)){var s=e.value,c=(void 0===i?[]:i).find(function(e){return e.id===Number(s)});a=(0,o.T)(e,c?c.value:s)}return{name:r,value:a}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,G.C)({platformFilters:[],component:function(){return null}}),r=t.customProfileFields,o=t.isLoadingProfileFields,s=(0,F.i)().getArchivedQueryOptions,c=s.data,u=void 0===c?[]:c,l=s.isLoading;return(0,n.useMemo)(function(){return(0,i.isEmpty)(e)||o||l?[]:e.filter(function(e){return"profile_field"===e.key}).map(function(e){var t=e.profile_field_id,n=r.find(function(e){return e.id===Number(t)});if(n)return W(e,n);var i=u.find(function(e){return e.id===Number(t)});return i?W(e,i):{name:(0,a.t)("settings.workflows.view.deleted_profile_field"),value:""}})},[e,o,l,r,u])};function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Q(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return B(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=M(e),r=q(e),i=(0,n.useMemo)(function(){return Q(t).concat(Q(r))},[t,r]);return{filters:i,hasFilters:i.length>0}}},549608:function(e,t,r){r.d(t,{q:()=>y});var n=r(714844),i=r(100334),a=r(309785),o=r(785413),s=r(358181),c=r(234620),u=r(722024),l=r(417159),f=r(657735),d=r(169530);function p(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(e){r(e);return}s.done?t(c):Promise.resolve(c).then(n,i)}function m(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){p(a,n,i,o,s,"next",e)}function s(e){p(a,n,i,o,s,"throw",e)}o(void 0)})}}function v(e,t){var r,n,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){var u=[s,c];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}var b="settings.workflows.view.header",y=function(e){var t=e.workflowId,r=e.isActive,p=(0,n.useQueryClient)(),y=(0,d.pm)(),_=y.success,h=y.error,g=function(){return m(function(){return v(this,function(e){switch(e.label){case 0:return[4,p.invalidateQueries(["workflows",t])];case 1:return e.sent(),[4,p.invalidateQueries(["all-workflows"])];case 2:return e.sent(),[2]}})})()},j=(0,u.wh)().currentCommunity,O=(null!=j?j:{}).current_plan_tier,w=(0,f.w)(),S=function(e){var t,r;w.show((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,o.h)(e)&&{planTier:(0,s.gq)(O)}),r=r={subheading:e.body.message,isEmailHubRequired:(0,o.w)(e),source:(0,c.yf)(),onSuccess:function(){w.hide(),P({})},successButtonLabel:(0,i.t)("settings.workflows.upgrade_modal.activate_this_workflow"),usedForWorkflows:!0,showPlanDetails:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},x=(0,n.useMutation)(function(){return(0,l.Cp)(a.nH.activate({id:t}))},{onSuccess:function(e,t){return m(function(){return v(this,function(e){switch(e.label){case 0:return[4,g()];case 1:return e.sent(),t.onSuccessCallback?t.onSuccessCallback():_((0,i.t)([b,"workflow_activated"])),[2]}})})()},onError:function(e){return(0,o.h)(e)||(0,o.w)(e)?S(e):h((0,i.t)([b,"workflow_activation_error"]))}}),P=x.mutate,E=x.isLoading,I=(0,n.useMutation)(function(){return a.nH.inactivate({id:t})},{onSuccess:function(){return m(function(){return v(this,function(e){switch(e.label){case 0:return[4,g()];case 1:return e.sent(),_((0,i.t)([b,"workflow_deactivated"])),[2]}})})()},onError:function(){return h((0,i.t)([b,"workflow_deactivation_error"]))}}),k=I.mutate,C=I.isLoading;return{onActivateWorkflow:P,onDeactivateWorkflow:k,onChangeActiveStatus:function(){(r?k:function(){return P({})})()},isLoading:E||C}}},77228:function(e,t,r){r.d(t,{$m:()=>l,By:()=>c,Db:()=>v,Ep:()=>d,I3:()=>u,Ii:()=>f,PQ:()=>b,S7:()=>m,bI:()=>o,nQ:()=>s,qN:()=>a,uN:()=>p});var n=r(214813),i=r(358181),a={ALL:"all",ACTIVE:"active",INACTIVE:"inactive",DRAFT:"draft",PUBLISHED:"published",ARCHIVED:"archived",IN_PROGRESS:"in_progress"},o={SUCCESS:"success",PARTIAL_SUCCESS:"partial_success",IN_PROGRESS:"in_progress",FAILED:"failed",SKIPPED:"skipped",DUPLICATE_SKIPPED:"duplicate_skipped"},s={DYNAMIC:"dynamic",BULK_ACTION:"bulk_action",SCHEDULED:"scheduled",ALL:"all"},c={ONE_TIME:"one_time",RECURRING:"recurring"},u={DYNAMIC:"dynamic",BULK_ACTION:"bulk_action",SCHEDULED:"scheduled",ARCHIVED:"archived"},l=[u.DYNAMIC,u.BULK_ACTION,u.SCHEDULED,u.ARCHIVED],f={SUCCESS:"success",PARTIAL_SUCCESS:"partial_success",IN_PROGRESS:"in_progress",SKIPPED:"skipped",DUPLICATE_SKIPPED:"duplicate_skipped",FAILED:"failed",CANCELLED:"cancelled"},d=function(e){return{action_type:null!=e?e:"",id:(0,n.uniqueId)("action_"),api_params:{}}},p={ACCESS_GROUP:"AccessGroup",SPACE:"Space",PAYWALL:"Paywall",PAYWALL_PRICE:"PaywallPrice",PAYWALL_COUPON:"PaywallCoupon",EVENT:"Posts::Event",MEMBER_TAG:"MemberTag",SPACE_GROUP:"SpaceGroup",POST_BASIC:"Posts::Basic",COMMUNITY:"Community",COURSE:"Space",PROFILE_FIELD:"ProfileField",RECURRING_EVENT_SETTING:"RecurringEventSetting",LESSON:"Lesson",QUIZ:"Lesson",SECTION:"Section",GAMIFICATION_LEVEL:"Gamification::Level",FORM:"Form",COMMUNITY_MEMBER_ADMIN:"CommunityMember"},m={BASIC:"basic",EVENT:"event",MEMBERS:"members",COURSE:"course",CHAT:"chat"},v=[i.Gb.enterprise,i.Gb.plus],b={ALL:"all",MH_ONLY:"mh_only",MH_WITH_LOWER_OR_HIGHER_TIER_PLAN:"mh_with_lower_or_higher_tier_plan",HIGHER_TIER_PLAN_ONLY:"higher_tier_plan_only",ENTERPRISE_AND_PLUS_ONLY:"enterprise_and_plus_only"}},85355:function(e,t,r){r.d(t,{t:()=>a});var n=r(904812),i=r(70372),a=function(){var e=(0,i.U)({api:n.av.memberTags.index}),t=e.records;return{memberTags:void 0===t?[]:t,isLoading:e.isLoading}}},234620:function(e,t,r){r.d(t,{Kg:()=>f,ko:()=>u,yf:()=>l});var n=r(314121),i=r(564514),a=r(780275),o=r(904812),s=r(554956),c="workflowSource",u=function(){var e=(0,i.TH)(),t=(0,a.U)();(0,n.useMemo)(function(){var r;if(e.pathname.includes(o.Lo.paywalls.index)?r=s.fe.PAYWALLS_WORKFLOWS_MODAL:e.pathname.includes(o.Lo.members.onboarding)?r=s.fe.ONBOARDING_WORKFLOWS_MODAL:t&&(r=s.fe.SPACE_WORKFLOWS_MODAL),r)try{sessionStorage.setItem(c,r)}catch(e){console.error("Failed to set workflow source in sessionStorage",e)}},[e,t])},l=function(){try{return sessionStorage.getItem(c)||s.fe.WORKFLOWS_UPGRADE_MODAL}catch(e){return console.error("Failed to get workflow source from sessionStorage",e),s.fe.WORKFLOWS_UPGRADE_MODAL}},f=function(){return{shouldGoBack:l()!==s.fe.WORKFLOWS_UPGRADE_MODAL}}},952634:function(e,t,r){r.d(t,{h:()=>o});var n=r(174933),i=r(904812),a=r(70372),o=function(){var e=(0,a.U)({api:i.av.segments.index,key:n.hE}),t=e.records,r=e.isLoading;return{segments:void 0===t?[]:t,isLoading:null!=r&&r}}},785413:function(e,t,r){r.d(t,{h:()=>n,w:()=>i});var n=function(e){var t,r;return!!(null==e||null==(r=e.body)||null==(t=r.data)?void 0:t.plan_limits_reached)},i=function(e){var t,r;return!!(null==e||null==(r=e.body)||null==(t=r.data)?void 0:t.marketing_hub_required)}},339994:function(e,t,r){r.d(t,{q:()=>c});var n=r(683551),i=r(100334),a=r(583972),o=r(435534),s=[{label:(0,i.t)("spaces.form.create.course_types.self_paced"),value:"self_paced",description:(0,i.t)("spaces.form.create.course_types.self_paced_info")},{label:(0,i.t)("spaces.form.create.course_types.structured"),value:"structured",description:(0,i.t)("spaces.form.create.course_types.structured_info")},{label:(0,i.t)("spaces.form.create.course_types.scheduled"),value:"scheduled",description:(0,i.t)("spaces.form.create.course_types.scheduled_info")}],c=function(e){var t=e.hideLabel;return(0,n.jsx)(o.l.Item,{name:"course_setting[course_type]",hideDescription:!0,rules:{required:(0,i.t)("spaces.form.create.choose_course_type"),maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",label:(0,i.t)("spaces.form.create.course_types.label"),hideLabel:t,children:(0,n.jsx)(o.l.RadioGroup,{variant:"box",name:"visibility",options:s,optionAlignment:"left",checkedIcon:(0,n.jsx)(a.JO,{type:"20-checkmark-circle",size:16})})})}},94531:function(e,t,r){r.d(t,{d:()=>n,t:()=>i});var n={self_paced:"self_paced",scheduled:"scheduled",structured:"structured"},i=n.self_paced},769935:function(e,t,r){r.d(t,{V:()=>u});var n=r(683551),i=r(244289),a=r(100334),o=r(847721),s=r(722024),c=r(435534),u=function(){var e=(0,i.qo)({name:"post_type"}),t=(0,s.wh)().currentCommunity,r=!!((null==t?void 0:t.ios_app_enabled)||(null==t?void 0:t.has_branded_app));if("chat"==e&&!r||"course"==e||"members"==e)return null;var u=[{label:(0,a.t)("spaces.form.create.notification_types.email"),description:(0,a.t)("spaces.form.create.notification_by_space_type.".concat(e,".email_description")),value:"default_notification_setting"},{label:(0,a.t)("spaces.form.create.notification_types.inapp"),description:(0,a.t)("spaces.form.create.notification_by_space_type.".concat(e,".inapp_description")),value:"default_in_app_notification_setting"},{label:(0,a.t)("spaces.form.create.notification_types.mobile"),description:(0,a.t)("spaces.form.create.notification_by_space_type.".concat(e,".mobile_description")),value:"default_mobile_notification_setting"}],l="chat"==e?(0,a.t)("spaces.form.create.notification_types.chat_label"):(0,a.t)("spaces.form.create.notification_types.label");return(0,n.jsx)(c.l.Item,{name:"notification_type",label:l,hideDescription:!0,hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:"chat"==e?(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(c.l.RadioGroup,{variant:"radio",name:"notification_type",verticalSpacing:"normal",options:o.M})}):(0,n.jsx)(c.l.CheckboxGroup,{name:"notification_type",options:u})})}},982866:function(e,t,r){r.d(t,{m:()=>o});var n=r(683551),i=r(100334),a=r(435534);function o(e){var t=e.disabled,r=e.isCoursesEnabled,o=e.hideLabel,s=[{label:(0,i.t)("spaces.form.create.space_types.post_label"),icon:{type:"post-2",viewBox:"0 0 20 20"},value:"basic"},{label:(0,i.t)("spaces.form.create.space_types.event_label"),icon:{type:"event",viewBox:"0 0 20 20"},value:"event"},{label:(0,i.t)("spaces.form.create.space_types.chat_label"),icon:{type:"chat-2",viewBox:"0 0 20 20"},value:"chat"}];return void 0!==r&&r&&s.push({label:(0,i.t)("spaces.form.create.space_types.course_label"),icon:{type:"book",viewBox:"0 0 20 20"},value:"course"}),s.push({label:(0,i.t)("spaces.form.create.space_types.members_label"),icon:{type:"20-space-picker-members",viewBox:"0 0 20 20"},value:"members"}),s.push({label:(0,i.t)("spaces.form.create.space_types.image_label"),icon:{type:"20-images",viewBox:"0 0 20 20"},value:"image"}),(0,n.jsx)(a.l.Item,{name:"post_type",hideLabel:void 0!==o&&o,label:(0,i.t)("spaces.form.create.space_types.label"),hideDescription:!0,rules:{required:"Please choose an access type!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(a.l.RadioGroup,{className:"create-space__form__grid-type",disabled:void 0!==t&&t,variant:"box",fullWidth:!1,name:"space_type",options:s})})}},256726:function(e,t,r){r.d(t,{F:()=>J,e:()=>Y});var n=r(683551),i=r(314121),a=r(214813),o=r(564514),s=r(100334),c=r(94531),u=r(291691),l=r(280658),f=r(358181),d=r(722024),p=r(904812),m=r(749413),v=r(181514),b=r(657735),y=r(554956),_=r(435534),h=r(558481),g=r(169530),j=r(807187),O=r(682240),w=r.n(O),S=r(244289),x=r(263229),P=r(527804),E=r(212749),I=r(189713),k=function(e){var t=e.spaceGroupMemberCount,r=e.chatSpaceMemberLimit,a=(0,d.e2)().helpers.findBy,o=(0,S.Gc)(),c=o.watch,u=o.setValue,l=c("space_group_id"),f=c("post_type"),p=a({id:l});(0,i.useEffect)(function(){p&&u("add_members_from_space_group",p.automatically_add_members_to_new_spaces)},[l]);var m=(0,E.Ug)({post_type:f})&&t>r;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex gap-1 pt-4",children:[(0,n.jsx)("div",{children:(0,n.jsx)(I.Z.LabelSm,{weight:"semibold",children:(0,s.t)("settings.access_groups.admin.legacy_access.title")})}),(0,n.jsx)("div",{children:(0,n.jsx)(P.T,{role:"tooltip",content:(0,s.t)("settings.access_groups.admin.legacy_access.legacy_tooltip"),interactive:!1,children:(0,n.jsx)(x.g,{square:!0,label:(0,s.t)("settings.access_groups.admin.legacy_access.legacy_badge")})})})]}),(0,n.jsx)(P.T,{content:(0,s.t)("members_in_space_group_limit_reached"),disabled:!m,children:(0,n.jsx)(_.l.Item,{name:"add_members_from_space_group",label:I18n.t("spaces.form.add_members_from_space_this_group"),hideBorder:!0,hideDescription:!0,className:"!mt-1 !pt-1",inline:!0,shouldToggleValueOnLabelClick:!0,isDisabled:m,children:(0,n.jsx)(_.l.ToggleSwitch,{variant:"small",disabled:m})})})]})};k.propTypes={spaceGroupMemberCount:w().number,chatSpaceMemberLimit:w().number};var C=r(328089),A=r(886120),L=r(532702),T=r(263285);let N=function(){var e=(0,A.k)(),t=(0,d.e2)().records,r=(0,T.UV)().contentPortalElement;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.l.Item,{name:"name",hideDescription:!0,translationRoot:"spaces.form.create.basic_info",rules:{required:"Name is required!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(_.l.Input,{ref:e,prefix:(0,n.jsx)(L.O,{})})}),(0,n.jsx)(_.l.Item,{name:"space_group_id",translationRoot:"spaces.form.create.basic_info",hideDescription:!0,rules:{required:"Please choose a space group!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(C.V,{variant:"form-input",spaceGroups:t,name:"space_group_id",appendTo:r})})]})};var D=r(870879),M=r(784178),F=function(e){var t=e.isLoading,r=void 0!==t&&t;return(0,n.jsx)(M.d.Footer,{sticky:!0,children:(0,n.jsx)(D.z,{type:"submit",variant:"circle",full:!0,disabled:r,form:Y,children:r?(0,s.t)("creating"):(0,s.t)("create_space")})})},R=r(583972),U=function(e){var t=e.onClose;return(0,n.jsx)(M.d.Header,{addHeaderPadding:!0,title:(0,s.t)("spaces.form.create.title"),fixed:!0,Actions:(0,n.jsxs)("button",{type:"submit",className:"close-button",onClick:t,children:[(0,n.jsx)(R.JO,{type:"close"}),(0,n.jsx)("span",{className:"sr-only",children:(0,s.t)("drawer.close_panel")})]})})};function G(){return"event"!==(0,(0,S.Gc)().watch)("post_type")?null:(0,n.jsx)(_.l.Item,{name:"event_auto_rsvp_enabled",label:s.ZP.t("spaces.form.event_auto_rsvp_enabled"),hideBorder:!0,hideDescription:!0,inline:!0,shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(_.l.ToggleSwitch,{variant:"small"})})}var W=r(769935),q=r(982866);let B=function(){var e=[{label:s.ZP.t("spaces.form.create.visibility_types.open"),value:"open",info:s.ZP.t("spaces.form.create.visibility_types.open_info")},{label:s.ZP.t("spaces.form.create.visibility_types.private"),value:"private",info:s.ZP.t("spaces.form.create.visibility_types.private_info"),infoSubText:s.ZP.t("spaces.form.create.visibility_types.private_info_subtext")},{label:s.ZP.t("spaces.form.create.visibility_types.secret"),value:"secret",info:s.ZP.t("spaces.form.create.visibility_types.secret_info"),infoSubText:s.ZP.t("spaces.form.create.visibility_types.secret_info_subtext")}],t=(0,S.qo)({name:"post_type"}),r=(0,S.qo)({name:"visibility"}),i=(0,S.Gc)().setValue;return(0,E.EG)({post_type:t})?("draft"!=r&&i("visibility","draft"),(0,n.jsx)(_.l.Item,{hideBorder:!0,name:"visibility",label:s.ZP.t("courses.access"),description:s.ZP.t("courses.access_description")})):(0,n.jsx)(_.l.Item,{name:"visibility",hideDescription:!0,label:s.ZP.t("spaces.form.create.visibility_types.label"),rules:{required:"Please choose a visibility!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(_.l.RadioGroup,{fullWidth:!1,variant:"box",name:"visibility",options:e})})};var Q=function(e){var t,r;return null==(r=e.body)||null==(t=r.error_details)?void 0:t.max_space_limit};function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function K(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(e){r(e);return}s.done?t(c):Promise.resolve(c).then(n,i)}function V(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){K(a,n,i,o,s,"next",e)}function s(e){K(a,n,i,o,s,"throw",e)}o(void 0)})}}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function z(e,t){var r,n,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){var u=[s,c];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}var Y="create-space-form",J=function(e){var t,r=e.onClose,O=e.currentSpaceGroupId,w=e.post_type,S=void 0===w?"basic":w,x=e.courseSetting,P=void 0===x?{course_type:c.t}:x,E=e.prefillData,I=e.renderHeader,C=e.renderFooter,A=e.hideSpaceTypePicker,L=e.setExternalLoadingState,T=void 0===L?a.noop:L,D=(0,o.k6)(),M=(0,d.nT)().actions.refresh,R=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),a.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return H(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),K=R[0],J=R[1],$=(0,m.m)(),X=$.createSpace,ee=$.maxSpaceLimit,et=(0,d.wh)(),er=et.currentCommunity,en=et.currentCommunitySettings,ei=et.currentCommunityMember,ea=!!(null==ei?void 0:ei.is_admin),eo=(0,g.pm)(),es=(0,b.w)(),ec=(0,d.e2)().helpers,eu=ec.isDataLoading,el=ec.findBy,ef=(null==er?void 0:er.current_plan_tier)||"",ed=el({id:O}),ep={space_group_id:O,post_type:ea?S:"basic",visibility:"open",course_setting:P,emoji:"#",custom_emoji:h.j,notification_type:["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting"],is_post_disabled:!0,event_auto_rsvp_enabled:!1,add_members_from_space_group:null==ed?void 0:ed.automatically_add_members_to_new_spaces,default_comment_sort:"oldest",default_member_sort:"latest",default_sort:"latest",hide_right_sidebar:"basic"===S};"chat"==S&&(ep.notification_type="never");var em=Z({},ep,E?(0,j.tz)(E,S):{});if(eu())return(0,n.jsx)(v.m,{});var ev=!(0,f.kw)(ef)&&!(0,f.gR)(ef)&&!!(null==ei?void 0:ei.is_admin)&&!!(null==en?void 0:en.upgrade_flows_for_space_creation_enabled),eb=function(){return V(function(){return z(this,function(e){switch(e.label){case 0:return r(),D.push(p.Lo.content.spaces),[4,es.hide()];case 1:return e.sent(),[2]}})})()},ey=function(e){var t,r,n,i;return n=Z({},(0,a.omit)(e,"notification_type","course_setting"),{default_notification_setting:(r="chat"===e.post_type?"all"==(t=e.notification_type)?["default_mobile_notification_setting","default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:"mentions"==t?["default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:[]:e.notification_type).includes("default_notification_setting")?"all":"never",default_in_app_notification_setting:r.includes("default_in_app_notification_setting")?"all":"never",default_mobile_notification_setting:r.includes("default_mobile_notification_setting")?"all":"never",default_mention_mobile_notification_setting:r.includes("default_mention_mobile_notification_setting")?"all":"never",default_mention_in_app_notification_setting:r.includes("default_mention_in_app_notification_setting")?"all":"never"},"course"===e.post_type?{course_setting:e.course_setting}:{}),i=i={is_post_disabled:"event"===e.post_type&&e.is_post_disabled},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n};return(0,n.jsxs)(_.l,{id:Y,onSubmit:function(e){return V(function(){var t,n,i,a,o;return z(this,function(c){var u;switch(c.label){case 0:J(!0),T(!0),c.label=1;case 1:return c.trys.push([1,5,9,10]),[4,(u=e.space_group_id,V(function(){return z(this,function(e){switch(e.label){case 0:if(!ev)return[3,2];return[4,ee(u)];case 1:e.sent(),e.label=2;case 2:return[2]}})})())];case 2:return c.sent(),[4,X(ey(e))];case 3:return t=c.sent(),[4,M()];case 4:return c.sent(),r(),D.push((0,p._v)({spaceSlug:t.slug})),[3,10];case 5:if(n=c.sent(),(0,l.dD)(n),console.error(n),i=n.firstErrorDetail,a=n.errorDetails,o=i||a,!(Q(n)&&ev))return[3,7];return[4,V(function(){return z(this,function(e){switch(e.label){case 0:return J(!1),T(!1),[4,es.show({planTier:ef&&(0,f.FZ)(ef)||void 0,onSuccess:eb,subheading:n.body.message,successButtonLabel:(0,s.t)("pricing_plans.upgrade_modal.actions.go_to_spaces"),source:y.fe.SPACE_LIMIT_UPGRADE_MODAL,showPlanDetails:!0})];case 1:return e.sent(),[2]}})})()];case 6:return c.sent(),[3,8];case 7:eo.error(o),c.label=8;case 8:return[3,10];case 9:return T(!1),[7];case 10:return[2]}})})()},defaultValues:em,className:"create-space__form",children:[(void 0===I?U:I)({onClose:r}),(0,n.jsxs)("div",{children:[(0,n.jsx)(N,{}),(0,u.Wk)(en)&&(0,n.jsx)(k,{spaceGroupMemberCount:(null==ed?void 0:ed.space_group_members_count)||0,chatSpaceMemberLimit:(null==er?void 0:er.chat_space_members_limit)||0}),ea&&!(void 0!==A&&A)&&(0,n.jsx)(q.m,{isCoursesEnabled:null==er?void 0:er.courses_feature_flag_enabled}),(0,n.jsx)(B,{}),(0,n.jsx)(W.V,{}),(0,n.jsx)(G,{})]}),(void 0===C?F:C)({isLoading:K})]})}},552883:function(e,t,r){r.d(t,{_:()=>o});var n=r(683551),i=r(722024),a=r(256726),o=function(e){return(0,n.jsx)(i.Br,{children:(0,n.jsx)(i.CM,{children:(0,n.jsx)(a.F,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})})}},847721:function(e,t,r){r.d(t,{M:()=>i,n:()=>a});var n=r(100334),i=[{value:"all",label:(0,n.t)("notification_settings.all.label"),description:(0,n.t)("notification_settings.all.description")},{value:"mentions",label:(0,n.t)("notification_settings.mentions.label"),description:(0,n.t)("notification_settings.mentions.description")},{value:"never",label:(0,n.t)("notification_settings.never.label"),description:(0,n.t)("notification_settings.never.description")}],a=[{value:"all",label:(0,n.t)("member_notification_settings.all.label"),description:(0,n.t)("member_notification_settings.all.description")},{value:"mentions",label:(0,n.t)("member_notification_settings.mentions.label"),description:(0,n.t)("member_notification_settings.mentions.description")},{value:"never",label:(0,n.t)("member_notification_settings.never.label"),description:(0,n.t)("member_notification_settings.never.description")}]},353400:function(e,t,r){r.d(t,{S:()=>o});var n=r(683551),i=r(241394),a=r(903431),o=function(e){var t=e.spaces,r=e.valueKey,o=void 0===r?"slug":r,s=(0,i.TC)().currentAppearance;return t.map(function(e){var t,r,i=e.name;return{richLabel:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.S,{className:"mr-1 inline !h-5 !w-5 align-text-top",emoji:e.emoji,appearance:s,customEmojiUrl:e.custom_emoji_url,customEmojiDarkUrl:e.custom_emoji_dark_url}),(0,n.jsx)("span",{children:e.name})]}),label:i,value:null!=(r=null==(t=e[o])?void 0:t.toString())?r:""}})}},291691:function(e,t,r){r.d(t,{Sg:()=>a,Wk:()=>o,kk:()=>s,un:()=>n});var n={communitySetting:"CommunitySetting",paywall:"Paywall",invitationLink:"InvitationLink",memberBulkImport:"AsyncTasks::BulkCommunityMemberImportTask"},i=Object.freeze({ARCHIVED:"archived",ACTIVE:"active"}),a=function(e){return(null==e?void 0:e.status)===i.ARCHIVED},o=function(e){return!(null==e?void 0:e.block_access_groups_for_trials_enabled)},s=function(e){return e===n.paywall}},23600:function(e,t,r){r.d(t,{K2:()=>a,OQ:()=>i,pn:()=>o});var n=r(100334),i=[{get label(){return(0,n.t)("yes")},value:"true"},{get label(){return(0,n.t)("no")},value:"false"}],a=[{get label(){return(0,n.t)("boolean_filter_options.yes")}},{get label(){return(0,n.t)("boolean_filter_options.no")}}],o=function(e,t){return!!t.visible_by_default||e.some(function(e){return e.key===t.key&&e.value})}},944599:function(e,t,r){r.d(t,{U:()=>n});var n=function(e){return e.memberTags.filter(function(e){var t=e.display_locations;return(null==t?void 0:t.member_directory)&&e.is_public})}},866950:function(e,t,r){r.d(t,{S:()=>u});var n=r(314121),i=r(214813),a=r(714844),o=r(547550),s=r(904812),c=["access_groups","index"],u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,r=void 0===t?{}:t,u=e.enabled,l=(0,a.useInfiniteQuery)([c,r.ids],function(e){var t=e.pageParam;return(0,o.UT)(s.av.admin.accessGroups.index({params:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({page:void 0===t?1:t,per_page:100},r)}))},{enabled:void 0===u||u,getNextPageParam:function(e){return e.has_next_page?Number(e.page)+1:void 0}}),f=l.data,d=l.fetchNextPage,p=l.hasNextPage,m=l.isLoading,v=l.isError,b=l.refetch;return(0,n.useEffect)(function(){p&&d()},[f,d,p]),{data:(0,i.flatten)(null==f?void 0:f.pages.map(function(e){return e.records})),isError:v,refetch:b,isLoading:!!(m||p)}}},326711:function(e,t,r){r.d(t,{k:()=>s});var n=r(714844),i=r(547550),a=r(904812),o=r(145146),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,n.useQuery)({queryKey:[e],queryFn:function(){var e,r;return(0,i.UT)(a.av.paywalls.index({params:(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t),r=r={status:t.status||o.dl},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e)}))}}),s=r.data,c=r.isLoading;return{paywalls:(void 0===s?[]:s).map(function(e){return{label:e.display_name,value:e.id.toString()}}),isPaywallsLoading:c}}},949921:function(e,t,r){r.d(t,{y:()=>l});var n=r(314121),i=r(714844),a=r(547550),o=r(276011),s=r(904812),c=r(722024),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.UT)(s.av.paywalls.index({params:e}))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.wh)().currentCommunityMember,r="PAYWALLS"+JSON.stringify(e),a=(0,i.useQuery)({queryKey:[r],queryFn:function(){return u(e)},enabled:!!(0,o.vb)(t)}),s=a.data,l=void 0===s?[]:s,f=a.isSuccess,d=a.isLoading,p=(0,n.useMemo)(function(){return l?l.filter(function(e){return"active"===e.status}):[]},[l]),m=(0,n.useMemo)(function(){return!!p&&(null==p?void 0:p.length)>0},[p]);return{activePaywalls:p,isSuccess:f,hasActivePaywalls:m,hasPaywalls:(0,n.useMemo)(function(){return!!l&&(null==l?void 0:l.length)>0},[l]),isLoading:d,allPaywalls:l}}},70372:function(e,t,r){r.d(t,{U:()=>s});var n=r(314121),i=r(214813),a=r(714844),o=r(547550),s=function(e){var t=e.api,r=e.key,s=e.useParamsWrapper,c=void 0===s||s,u=(0,a.useInfiniteQuery)(["un-paginate",void 0===r?"tags":r,t],function(e){var r=e.pageParam,n=void 0===r?1:r;return(0,o.UT)(t(c?{params:{page:n}}:{page:n}))},{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),l=u.data,f=u.fetchNextPage,d=u.hasNextPage,p=u.isLoading;return(0,n.useEffect)(function(){d&&f()},[d,f,l]),{records:(0,i.flatten)(null==l?void 0:l.pages.map(function(e){return e.records}))||[],isLoading:p||d,hasNextPage:d}}},849181:function(e,t,r){r.d(t,{y:()=>o});var n=r(714844),i=r(309785),a=r(169530),o=function(e){var t=e.ids,r=e.withDeleted,o=e.enabled,s=(0,a.pm)();return(0,n.useQuery)(["COMMUNITY_MEMBERS_LIST",t,r],function(){return i.nH.fetchContacts({params:{ids:t,with_deleted:r}})},{enabled:o,onError:function(e){s.error(e.message)}})}},899296:function(e,t,r){r.d(t,{X:()=>h});var n=r(314121),i=r(655599),a=r(959957),o=r(214813),s=r(244289),c=r(696459),u=r(337076);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(e){r(e);return}s.done?t(c):Promise.resolve(c).then(n,i)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){f(a,n,i,o,s,"next",e)}function s(e){f(a,n,i,o,s,"throw",e)}o(void 0)})}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r,n,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){var u=[s,c];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}var v=new i.lE,b=function(e){return[e.name,e.place_formatted].filter(Boolean).join(", ")},y=function(e){return e.features[0].properties.full_address},_=["country","region","district","place","locality","neighborhood"],h=function(e){var t=e.initialValue,r=e.shouldSkipLocationDetailRetrieve,i=void 0!==r&&r,l=e.locationTypes,f=void 0===l?_:l,h=e.name,g=p((0,n.useState)([]),2),j=g[0],O=g[1],w=p((0,n.useState)(!1),2),S=w[0],x=w[1],P=p((0,n.useState)(null),2),E=P[0],I=P[1],k=p((0,n.useState)(null!=t?t:null),2),C=k[0],A=k[1],L=(0,c.N3)(),T=(null==L?void 0:L.locale)||"en",N=(0,s.Gc)(),D=N.setValue,M=N.getValues,F=(0,u._)(),R=F.data,U=F.refetch,G=M(h),W=(0,a.Eh)({accessToken:null==R?void 0:R.token}),q=(0,n.useMemo)(function(){return(0,o.debounce)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(function(){var r;return m(this,function(n){switch(n.label){case 0:if(!e)return[3,10];n.label=1;case 1:return n.trys.push([1,3,,9]),[4,W.suggest(e,{sessionToken:v,language:T,types:f.join(",")})];case 2:return O(n.sent().suggestions),[3,9];case 3:var i,a;if(!((void 0===(r=n.sent())?"undefined":(i=r)&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)=="object"&&null!==r&&"statusCode"in r&&401===r.statusCode&&t<3))return[3,7];return[4,(a=1e3*t,new Promise(function(e){return setTimeout(e,a)}))];case 4:return n.sent(),[4,U()];case 5:return n.sent(),[4,q(e,t+1)];case 6:return n.sent(),[3,8];case 7:throw r;case 8:return[3,9];case 9:return[3,11];case 10:O([]),n.label=11;case 11:return[2]}})})()},300)},[W,T,f,U]),B=null==j?void 0:j.map(function(e){return{type:"mapbox_v6",text:e.name,value:e.mapbox_id,data:e,description:b(e)}}),Q=(0,n.useMemo)(function(){return E?{type:"mapbox_v6",text:y(E),data:E,value:E.features[0].properties.mapbox_id,description:y(E)}:C?{type:"mapbox_v6",text:C.text,data:C.data,value:C.value,description:C.description}:null},[E,C]);return(0,n.useEffect)(function(){if((null==Q?void 0:Q.text)!==(null==G?void 0:G.text)){var e;D(h,{type:"mapbox_v6",text:null!=(e=null==Q?void 0:Q.text)?e:"",data:null==Q?void 0:Q.data},{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})}},[Q,h,D,null==G?void 0:G.text]),{handleClearLocation:function(){A(null),I(null),O([]),x(!0),D(h,{type:"mapbox_v6",text:"",data:{place_formatted:null,name:"",mapbox_id:null},value:""},{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},locationOptions:B,handleSuggestionSelect:function(e){return d(function(){var t;return m(this,function(r){switch(r.label){case 0:if(!e)return O([]),I(null),[2];r.label=1;case 1:var n;if(r.trys.push([1,3,,4]),i)return A(e),I(null),O([]),[2];if(n=e.value,!(t=null==j?void 0:j.find(function(e){return e.mapbox_id===n})))throw Error("Suggestion not found");return[4,W.retrieve(t,{sessionToken:v,language:T})];case 2:return I(r.sent()),A(null),O([]),[2];case 3:return console.error(r.sent()),I(null),A(null),O([]),[3,4];case 4:return[2]}})})()},value:Q,debouncedSearch:q,hasNoSuggestions:(null==j?void 0:j.length)===0,displayValue:function(e){return(null==e?void 0:e.data)?"mapbox_id"in e.data?b(e.data):y(e.data):S?"":(null==t?void 0:t.text)||""}}}},337076:function(e,t,r){r.d(t,{_:()=>o});var n=r(714844),i=r(547550),a=r(108322),o=function(){return(0,n.useQuery)({queryKey:["mapbox-token"],queryFn:function(){return(0,i.Cu)((0,a.E)("mapbox_v6/token"))},onError:function(e){return console.error(e)}})}},198127:function(e,t,r){r.d(t,{t:()=>a});var n=r(316862),i=r(564514),a=function(e){var t=(0,i.TH)().search,r=(0,n.parse)(t,{ignoreQueryPrefix:!0});try{return e.cast(r)}catch(e){return console.error("Error parsing query params",e),{}}}},749413:function(e,t,r){r.d(t,{m:()=>c});var n=r(314121),i=r(547550),a=r(904812);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=function(){var e=s((0,n.useState)(!1),2),t=e[0],r=e[1],o=s((0,n.useState)(null),2),c=o[0],u=o[1],l=s((0,n.useState)(!1),2),f=l[0],d=l[1];return{isJoined:t,joinSpace:function(e){return fetch((0,a.J6)(),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin",body:JSON.stringify({space_id:e})}).then(function(e){return e.json()}).then(function(){r(!0)}).catch(function(e){console.error(e)})},space:c,fetchSpace:function(e){return(0,i.t5)((0,a.Ox)(String(e))).then(function(e){return null==e?void 0:e.json()}).then(function(e){u(e)})},updateSpace:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(!0);var o=(null!=(r=FormData)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](e):e instanceof r)?e:JSON.stringify({space:e}),s=t||(null==c?void 0:c.id);if(!s)throw Error("Space ID is required");return(0,i.t5)((0,a.C1)(String(s)),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({method:"PATCH",body:o},n)).then(function(e){return null==e?void 0:e.json()}).then(function(e){return u(e),d(!1),e})},createSpace:function(e){var t=JSON.stringify({space:e});return(0,i.t5)(a.av.spaces.create(),{method:"POST",body:t,forReactQuery:!0})},maxSpaceLimit:function(e){return(0,i.t5)(a.av.spaces.maxSpaceLimit(e),{method:"GET",forReactQuery:!0})},isSubmitting:f,reSetWelcomeBannerPreference:function(e){return(0,i.gN)(a.av.spaces.resetSpaceWelcomeBannerPreferencePath(e))}}}},780275:function(e,t,r){r.d(t,{U:()=>i});var n=r(564514),i=function(){var e,t=(0,n.$B)("/c/:spaceSlug");return null==t||null==(e=t.params)?void 0:e.spaceSlug}},25512:function(e,t,r){r.d(t,{t:()=>c});var n=r(683551),i=r(244289),a=r(100334),o=r(435534),s=r(189713),c=function(e){var t=e.name,r=e.maxLength,c=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","maxLength"]),u=(0,(0,i.Gc)().watch)(t),l=(null==u?void 0:u.length)||0,f=r-l,d=new Intl.NumberFormat("en-US").format(f),p=new Intl.NumberFormat("en-US").format(r),m=l>r;return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(o.l.Input,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:t,variant:"textarea",maxLength:r},c)),(0,n.jsx)("div",{className:"mt-2 text-left",children:(0,n.jsx)(s.Z.LabelXs,{color:m?"text-v2-danger":"text-default",children:(0,a.t)("community_bot.bot_builder.behavior_page.form.purpose.characters_left",{count:d,total:p})})})]})}}}]);
//# sourceMappingURL=/packs/js/5541-5ee0d55eca835b17.js.map