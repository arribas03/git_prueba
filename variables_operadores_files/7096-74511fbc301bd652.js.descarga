"use strict";(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([["7096"],{824871:function(e,t,r){r.d(t,{F:()=>f});var n=r(683551),o=r(314121),i=r(379600),a=r.n(i),l=r(338664),s=r.n(l),c=r(583972),u=r(870879),d=r(102965),f=function(e){var t=e.variant,r=e.options,i=e.selectedAction,l=e.setSelectedAction,f=e.onChange,p=e.disabled,m=e.type,b=e.large,y=void 0!==b&&b,h=i||r[0],v=(0,o.useMemo)(function(){return r.filter(function(e){return e.value!==h.value})},[r,h]);return(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(u.z,{type:void 0===m?"button":m,variant:t,className:"truncate rounded-r-sm",disabled:p,"data-testid":"perform-action-button",large:y,tabIndex:0,onClick:function(){s()(h.onClick)&&h.onClick()},children:h.label}),(0,n.jsx)(d.Lt,{direction:"top-end",buttonType:"button",linkType:"button",buttonWrapperClassName:a()({"pointer-events-none":p}),popperOptions:{modifiers:[{name:"offset",options:{offset:[0,8]}}]},button:(0,n.jsx)("div",{className:"ml-0.5",children:(0,n.jsx)(u.z,{type:"button",variant:t,className:"rounded-l-sm !px-2.5",disabled:p,"data-testid":"select-action-button",large:y,children:(0,n.jsx)(c.JO,{type:"16-chevron-down",size:16,className:"mb-[1px]"})})}),options:v,onChange:function(e){var t=r.find(function(t){return t.value===e});l(t),s()(f)&&f(t)}})]})}},235171:function(e,t,r){r.d(t,{c:()=>a});var n=r(683551),o=r(100334),i=r(583972),a=function(){return(0,n.jsxs)("span",{className:"text-default border-dark bg-primary inline-flex h-5 items-center gap-1 rounded-xl border px-1.5 py-[3px] pr-2",children:[(0,n.jsx)(i.JO,{type:"12-ai-agent-badge",size:12,className:"!w-3"}),(0,n.jsx)("span",{className:"text-[0.6rem] font-medium",children:(0,o.t)("community_bot.profile_tag")})]})}},406483:function(e,t,r){r.d(t,{b:()=>u});var n=r(683551),o=r(379600),i=r.n(o),a=r(583972),l=r(189713),s={info:"20-info",success:"20-checkmark-circle-fill",alert:"20-alert",warning:"20-alert"},c={info:"border-v2-info text-v2-info",success:"border-v2-success text-v2-success",alert:"border-v2-danger text-v2-danger",warning:"border-v2-warning text-v2-warning"},u=function(e){var t=e.type,r=void 0===t?"info":t,o=e.icon,u=e.title,d=e.showIcon,f=e.description,p=e.className,m=e.children;return(0,n.jsx)("div",{className:i()("rounded-md border border-l-8 px-6 py-4",c[r],void 0===p?"":p),role:"alert",children:(0,n.jsxs)("div",{className:"flex w-full gap-x-3",children:[(void 0===d||d)&&(o||(0,n.jsx)(a.JO,{type:s[r],size:20,className:"mt-1 !self-start"})),(0,n.jsxs)("div",{className:"flex w-full flex-col gap-y-1",children:[u&&(0,n.jsx)(l.Z.LabelMd,{weight:"semibold",children:u}),f&&(0,n.jsx)(l.Z.LabelSm,{children:f}),m&&(0,n.jsx)(n.Fragment,{children:m})]})]})})}},69291:function(e,t,r){r.d(t,{D:()=>c});var n=r(683551),o=r(314121),i=r(922576),a=r(244289);function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var c=(0,o.forwardRef)(function(e,t){var r=e.name,c=e.style,u=void 0===c?{}:c,d=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","style"]),f=(0,o.useRef)(null),p=(0,a.Gc)(),m=p.watch,b=p.control,y=m(r);return(0,o.useEffect)(function(){f.current&&(f.current.style.height="inherit",f.current.style.height="".concat(f.current.scrollHeight,"px"))},[y]),(0,n.jsx)("div",{className:"react-auto-expanding-text-input form-input",children:(0,n.jsx)(a.Qr,{name:r,control:b,render:function(e){var r=e.field,o=r.onChange,a=r.value,c=r.ref;return(0,n.jsx)("textarea",s(l({},d),{value:a,onChange:function(e){e.preventDefault(),o(e.target.value.replaceAll("\n",""))},ref:(0,i.Z)(f,t,c),className:"form-control placeholder:text-light placeholder:opacity-100",rows:1,style:s(l({},u),{resize:"none"})}))}})})});c.displayName="AutoExpandingTextInput"},84767:function(e,t,r){r.d(t,{I:()=>a});var n=r(683551),o=r(645391),i=r(583972),a=function(e){var t=e.label,r=e.isAdmin,a=void 0!==r&&r;return(0,n.jsxs)("div",{className:(0,o.A)("text-tertiary flex h-[22px] max-w-fit items-center rounded-lg px-2 text-[10px] font-bold uppercase tracking-wide",a?"group-hover:bg-overlay-dark bg-[#ECF5FF] dark:bg-[#34373D] dark:group-hover:bg-[#202226]":"bg-tertiary group-hover:bg-overlay-dark dark:group-hover:bg-[#202226]"),"aria-label":t,children:[(0,n.jsx)(i.JO,{type:"14-moderator-icon",size:14,className:(0,o.A)("mr-0.5 !w-4",a?"text-[#2563EB]":"text-tertiary")}),t]})}},834515:function(e,t,r){r.d(t,{_:()=>a});var n=r(683551),o=r(100334),i=r(870879),a=function(e){var t,r,a=e.type,l=e.classNames,s=e.children,c=e.submitting,u=void 0!==c&&c,d=e.submittingText,f=void 0===d?(0,o.t)("submitting"):d,p=e.isDisabled,m=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["type","classNames","children","submitting","submittingText","isDisabled"]);return(0,n.jsxs)(i.z,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:void 0===a?"button":a,disabled:u||void 0!==p&&p},m),r=r={className:void 0===l?"":l,children:[u&&f,!u&&s]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},714143:function(e,t,r){r.d(t,{C:()=>c});var n=r(683551),o=r(379600),i=r.n(o),a=r(100334),l=r(583972),s=r(870879),c=function(e){var t=e.children,r=e.onClick,o=e.onButtonClick;return(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(s.z,{variant:"secondary",type:"button",className:i()("rounded-r-none border-r-0 !pl-3 !pr-2 !font-light",{"pointer-events-none":!o}),onClick:o,children:t}),(0,n.jsx)("div",{className:"ml-[-1px]",children:(0,n.jsx)(s.z,{type:"button",onClick:r,variant:"secondary",className:"rounded-l-none border-l-0 !px-1.5","data-testid":"clear-action-button","aria-label":(0,a.t)("clear"),title:(0,a.t)("clear"),children:(0,n.jsx)(l.JO,{"aria-hidden":!0,type:"16-close",size:16,className:"mb-[1px]"})})})]})}},322407:function(e,t,r){r.r(t),r.d(t,{CommunityMemberSelect:()=>w,EMAIL_REGEX:()=>x});var n=r(683551),o=r(314121),i=r(214813),a=r(100334),l=r(341768),s=r(357382),c=r(531744),u=r(844651),d=r(696459),f=r(276011),p=r(189713),m=function(e){var t=e.member,r=(0,d.wh)().currentCommunityMember;return(0,n.jsxs)("div",{className:"flex items-start px-2",children:[(0,n.jsx)(u.s,{src:t.avatar_url,name:t.name,size:"7",isFullRounded:!0}),(0,n.jsxs)("div",{className:"ml-3 flex min-w-0 flex-col",children:[(0,n.jsx)(p.Z.LabelSm,{weight:"medium",children:t.name}),(0,f.vb)(r)&&(0,n.jsx)(p.Z.LabelXs,{children:t.email})]})]})},b=r(987437),y=function(e){if(e&&b.CU.test(e))return{value:e,text:e,listItemText:"".concat((0,a.t)("invite")," ").concat(e)}};function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){g(e,t,r[t])})}return e}var x=/[\w.+-]{1,64}@[\w-]{1,253}\.[\w.-]{2,63}/,O="community_member_select",w=function(e){var t,r,u,d=e.valueField,f=void 0===d?"id":d,p=e.addable,b=e.placeholder,x=e.excludeAdmins,w=void 0!==x&&x,S=e.includeInactive,P=void 0!==S&&S,_=e.filters,k=void 0===_?{}:_,D=e.shouldFilterSelectedItems,E=e.getCommunityMemberText,A=void 0===E?function(e){return"".concat(e.name)}:E,C=e.maxPreloadValues,N=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["valueField","addable","placeholder","excludeAdmins","includeInactive","filters","shouldFilterSelectedItems","getCommunityMemberText","maxPreloadValues"]),T=(0,l.j)(),I=T.searchCommunityMembers,M=T.communityMembers,L=T.resetCommunityMembers,R=N.value,F=N.defaultValue,U=(t=(0,o.useState)(!0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return h(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),z=U[0],$=U[1];(0,o.useEffect)(function(){var e,t=(0,i.compact)((0,i.flatten)([F,R]));t.length?I({filters:j((g(e={},f,C?t.slice(0,C):t),g(e,"exclude_admins",w),g(e,"include_inactive",P),e),k)}).then(function(){return $(!1)}).catch(function(e){console.error(e)}):$(!1)},[]);var B=(0,o.useMemo)(function(){return M.map(function(e){return{value:e[f],text:A(e),member:e}}).map(function(e){var t=e.value,r=e.text,o=e.member;return{value:t,text:r,listItemText:(0,n.jsx)(m,{member:o})}})},[M,f,A]);if(z)return(0,n.jsx)(s.a,{});var Z=p?(0,a.t)([O,"no_matches_found_try_using_email"]):(0,a.t)([O,"no_matches_found"]),H=null!=b?b:(0,a.t)([O,"start_typing_a_name"]);return(0,n.jsx)(c.P,(r=j({},N),u=u={notFoundContent:Z,addable:p?y:void 0,data:B,onSearch:function(e){var t;return(t=function(){return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){return e?[2,I({filters:j({exclude_admins:w,include_inactive:P},k),per_page:10,query:e})]:(L(),[2])})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){v(i,n,o,a,l,"next",e)}function l(e){v(i,n,o,a,l,"throw",e)}a(void 0)})})()},minSearchValueLength:1,placeholder:H,shouldFilterSelectedItems:void 0!==D&&D,popperOptions:{modifiers:[{name:"offset",options:{offset:[0,2]}}]}},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(u)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(u,e))}),r))}},7437:function(e,t,r){r.d(t,{T:()=>l});var n=r(683551),o=r(279113),i=r(100334),a=r(583972),l=function(e){var t=e.handleChangeCoverClick,r=e.showAddCoverBtn,l=e.customAddCoverBtn;return(0,n.jsx)(o.u,{show:!!r,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-75",leave:"transition-opacity duration-300",leaveFrom:"opacity-75",leaveTo:"opacity-0",children:(0,n.jsx)("div",{role:"button",onClick:t,onKeyDown:t,tabIndex:0,children:l||(0,n.jsxs)("button",{type:"button",className:"form-section__add-cover",children:[(0,n.jsx)(a.JO,{type:"toolbar-image",className:"no-fill"}),(0,i.t)("add_cover")]})})})}},312379:function(e,t,r){r.d(t,{B:()=>a});var n=r(683551),o=r(722024),i=r(870879),a=function(e){var t=e.onChange,r=e.onDelete,a=e.changeButtonText,l=e.removeButtonText,s=(0,o.wh)().isViewOnlyMasquerading;return(0,n.jsxs)("div",{className:"cover-image-overlay hover:opacity-100","data-testid":"cover-image-overlay",children:[(0,n.jsx)(i.z,{variant:"secondary",onClick:t,disabled:s,children:a}),(0,n.jsx)(i.z,{variant:"secondary",onClick:r,type:"button",disabled:s,children:l})]})}},319546:function(e,t,r){r.d(t,{Z:()=>i});var n=r(683551),o=r(583972),i=function(e){var t=e.title,r=e.description;return(0,n.jsxs)("div",{className:"image-input-banner__add",children:[(0,n.jsx)("div",{className:"image-input-banner__add__icon-wrapper",children:(0,n.jsx)(o.JO,{type:"plus-big",viewBox:"0 0 20 20"})}),t&&(0,n.jsx)("span",{className:"image-input-banner__label",children:t}),r&&(0,n.jsx)("span",{className:"image-input-banner__description !text-dark",children:r})]})}},15222:function(e,t,r){r.d(t,{D:()=>f});var n=r(683551),o=r(100334),i=r(953149),a=r(7437),l=r(181514),s=r(312379),c=function(e){var t=e.changeImageText,r=void 0===t?(0,o.t)("edit_cover_image"):t,i=e.handleChangeCoverClick,a=e.handleDelete,c=e.imageUrl,u=e.processing,d=e.value,f=!!u;return(0,n.jsxs)("div",{className:"cover-image-input__preview",children:[f&&(0,n.jsx)("div",{className:"quickpost-progress",children:(0,n.jsx)(l.m,{})}),!!d&&!f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{loading:"lazy",src:c,alt:""}),(0,n.jsx)(s.B,{onDelete:a,onChange:i,removeButtonText:(0,o.t)("remove_cover_image"),changeButtonText:r})]})]})};function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var d=function(e){var t=e.value,r=e.processing;return t||r?(0,n.jsx)(c,u({},e)):(0,n.jsx)(a.T,u({},e))},f=function(e){var t=e.renderer,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["renderer"]);return(0,n.jsx)(i.a,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({renderer:void 0===t?d:t,title:(0,o.t)("quick_post_v2.choose_cover_image")},r))}},322876:function(e,t,r){r.d(t,{W:()=>f});var n=r(683551),o=r(244289),i=r(379600),a=r.n(i),l=r(214813),s=r(260924),c=r(100334),u=r(583972),d=function(e){var t=e.onChange,r=e.value,o=e.fullWidth,i=e.disabled,d=e.minDate,f=e.maxDate,p=e.required,m=e.withIcon,b=e.minuteIncrement,y=e.isStatic,h=e.dateInputOptions,v=e.dataTestId,g=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({enableTime:!0,dateFormat:"F d, Y G:i K",minDate:d,maxDate:f,disableMobile:!0,minuteIncrement:b,static:y},void 0===h?{}:h);return(0,n.jsx)("div",{className:"form-input","data-testid":v,children:(0,n.jsxs)("div",{className:a()("flex",{"flatpickr--static":y}),children:[(0,n.jsx)(s.default,{className:a()("flatpickr bg-primary border-primary text-dark h-[46px] px-4 text-left text-md font-normal",{"w-full":void 0!==o&&o,"!cursor-not-allowed opacity-40":i,"!rounded-r-none !border-r-0":m}),"data-enable-time":!0,options:g,value:r,onValueUpdate:function(e){(0,l.first)(e)&&t(e[0].toISOString())},disabled:i,placeholder:(0,c.t)("select_a_date"),required:p}),!!m&&(0,n.jsx)("div",{className:a()("bg-primary border-primary relative -ml-px inline-flex items-center space-x-2 rounded-r-md border border-l-0 px-4 py-2",{"cursor-not-allowed opacity-40":i}),children:(0,n.jsx)(u.JO,{type:"16-calendar",useWithFillCurrentColor:!0,size:16,className:"text-light"})})]})})},f=function(e){var t=e.name,r=e.rules,i=e.disabled,a=void 0!==i&&i,l=e.fullWidth,s=void 0!==l&&l,c=e.minDate,u=void 0===c?"":c,f=e.maxDate,p=void 0===f?"":f,m=e.minuteIncrement,b=void 0===m?15:m,y=e.required,h=void 0!==y&&y,v=e.withIcon,g=void 0!==v&&v,j=e.isStatic,x=void 0!==j&&j,O=e.dataTestId,w=void 0===O?"":O,S=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","rules","disabled","fullWidth","minDate","maxDate","minuteIncrement","required","withIcon","isStatic","dataTestId"]),P=(0,o.Gc)().control;return(0,n.jsx)(o.Qr,{control:P,name:t,rules:void 0===r?{}:r,render:function(e){var t=e.field,r=t.onChange,o=t.value;return(0,n.jsx)(d,{onChange:r,value:o,fullWidth:s,disabled:a,minDate:u,maxDate:p,withIcon:g,required:h,minuteIncrement:b,isStatic:x,dateInputOptions:S,dataTestId:w})}})}},770518:function(e,t,r){r.d(t,{D:()=>u});var n=r(683551),o=r(933542),i=r(555424),a=r(244289),l=r(100334),s=r(417159),c=r(40297),u=function(e){var t=e.startsAtConfig,r=e.endsAtConfig,u=e.durationConfig,d=e.disabled,f=void 0!==d&&d,p=(0,a.Gc)(),m=p.register,b=p.setValue,y=p.getValues,h=y(t.name),v=(0,s.bl)(h);return(0,n.jsxs)("div",{className:"flex flex-col items-start gap-2 md:flex-row md:items-center",children:[(0,n.jsx)(c.x,{name:t.name,onChange:function(e){var t=y(u.name),n=(0,o.v)(e,t);b(r.name,n)},minDate:t.minDate,dataTestId:"event_starts_at",disabled:f}),(0,n.jsx)("div",{className:"mx-2",children:(0,l.t)("to")}),(0,n.jsx)(c.x,{name:r.name,onChange:function(){var e=y(t.name),n=(0,s.bl)(e),o=y(r.name),a=(0,s.bl)(o),l=(0,i.c)(a,n);l<0||b(u.name,l,{shouldDirty:!0})},minDate:v,dataTestId:"event_ends_at",disabled:f}),(0,n.jsx)("div",{className:"hidden",children:(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},m(u.name)))})]})}},40297:function(e,t,r){r.d(t,{x:()=>v});var n=r(683551),o=r(314121),i=r(379600),a=r.n(i),l=r(906310),s=r(214813),c=r(563941),u=r.n(c),d=r(244289),f=r(417159),p=r(583972),m=r(189713),b=r(847141),y=r(461161);function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var v=function(e){var t=e.className,r=void 0===t?"":t,i=e.classNameDate,c=void 0===i?"":i,v=e.classNameTime,g=void 0===v?"":v,j=e.dataTestId,x=e.datePlaceholder,O=void 0===x?"":x,w=e.disabled,S=void 0!==w&&w,P=e.labelDate,_=void 0===P?"":P,k=e.labelTime,D=void 0===k?"":k,E=e.maxDate,A=e.minDate,C=e.name,N=e.onChange,T=void 0===N?s.noop:N,I=e.timePlaceholder,M=void 0===I?"":I,L=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["className","classNameDate","classNameTime","dataTestId","datePlaceholder","disabled","labelDate","labelTime","maxDate","minDate","name","onChange","timePlaceholder"]),R=(0,d.Gc)().control,F=(0,o.useRef)(),U=(0,o.useRef)(),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.noop;return function(t){var r;if(null!=(r=Date)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](t):t instanceof r){var n=t;A&&(0,l.K)(n,A)&&(0,f.qB)(n)&&(n=(0,f.qe)(A)),e(n.toUTCString()),T(n)}}};return(0,n.jsx)(d.Qr,{control:R,name:C,render:function(e){var t=e.field,o=t.onChange,i=t.value,s=i&&new Date(i),d=s&&A&&E&&(0,l.K)(s,A)&&(0,l.K)(s,E)?{minTime:A,maxTime:E}:s&&A&&(0,l.K)(s,A)?{minTime:A,maxTime:(0,b.i)(A)}:s&&E&&(0,l.K)(s,E)?{minTime:(0,y.b)(E),maxTime:E}:{minTime:void 0,maxTime:void 0},f=d.minTime,v=d.maxTime;return(0,n.jsxs)("div",{className:a()("flex",r),"data-testid":j,children:[(0,n.jsxs)("div",{className:c,children:[_&&(0,n.jsx)("label",{htmlFor:C,className:"mb-2",children:(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:_})}),(0,n.jsxs)("div",{className:"relative mr-1","data-testid":"event_date",children:[(0,n.jsx)(u(),h({ref:F,selected:s,dateFormat:"MMM d, yyyy",onChange:z(o),minDate:A,maxDate:E,name:C,disabled:S,placeholderText:O,className:"relative"},L)),(0,n.jsx)(p.JO,{type:"cheveron-down",className:"absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer hover:text-gray-800",onClick:function(){var e,t;null==(t=F.current)||null==(e=t.input)||e.focus()}})]})]}),(0,n.jsxs)("div",{className:g,children:[D&&(0,n.jsx)("label",{htmlFor:C,className:"mb-2",children:(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:D})}),(0,n.jsxs)("div",{className:"relative ml-1","data-testid":"event_hour",children:[(0,n.jsx)(u(),h({ref:U,selected:s,onChange:z(o),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa",disabled:S,placeholderText:M,minTime:f,maxTime:v,className:"relative"},L)),(0,n.jsx)(p.JO,{type:"cheveron-down",className:"absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer hover:text-gray-800",onClick:function(){var e,t;null==(t=U.current)||null==(e=t.input)||e.focus()}})]})]})]})}})}},834968:function(e,t,r){r.d(t,{P:()=>y});var n=r(683551),o=r(314121),i=r(682240),a=r.n(i),l=r(379600),s=r.n(l),c=r(974617),u=r(564514),d=r(794633),f=r(740002),p=r(716751),m=r(838158);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t,r,i,a=e.content,l=e.disableFullScreenPreview,y=void 0!==l&&l,h=e.contentParentPath,v=e.transformLinks,g=void 0===v?f.G5:v,j=(0,u.k6)(),x=(0,o.useRef)(null),O=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=O[0],S=O[1],P=(0,o.useRef)(null),_=(0,p.I)();(0,o.useEffect)(function(){if(x.current){var e=x.current.querySelector(".trix-content");(0,f.GL)(e),g({containerElement:e,shouldIncludeInternalLinks:_}),(0,f.BU)(e),(0,f.el)(e),new d.W(x.current).addAttachmentClickEventHandler(function(e){var t=e.attachments,r=e.currentIndex;y?j.push(h):(P.current={attachments:t,currentIndex:r},S(!0))})}},[x,_,h,y,j]);var k=(0,o.useMemo)(function(){return(0,f.ND)(a)},[a]);return(0,n.jsxs)("div",{className:s()("react-trix-content text-dark",{"fullscreen-preview-enabled":!y}),ref:x,children:[w&&(0,n.jsx)(m._,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},P.current),i=i={onClose:function(){P.current=null,S(!1)},show:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r)),(0,n.jsx)(c.Z,{html:k})]})};y.propTypes={content:a().string.isRequired,disableFullScreenPreview:a().bool,contentParentPath:a().string,transformLinks:a().func}},59993:function(e,t,r){r.d(t,{A:()=>u});var n=r(683551),o=r(102965),i=r(214813),a=r(583972),l=r(263229),s=r(189713),c=r(459269),u=function(e){var t=e.options,r=e.linkType;return(0,n.jsx)(n.Fragment,{children:t.map(function(e){if((0,c.n)(e))return(0,n.jsx)(o.Lt.Separator,{},(0,i.uniqueId)("separator-"));var t=e.value,u=e.label,d=e.icon,f=e.iconSize,p=e.pathTo,m=e.badge,b=e.badgeVariant,y=e.onClick,h=e.dataTestId,v=e.isActive;return(0,n.jsx)(o.Lt.ItemWithLink,{to:p,onClick:y,linkType:r,active:v,children:(0,n.jsxs)(o.Lt.BadgeContainer,{children:[(0,n.jsxs)(o.Lt.IconContainer,{children:[d&&(0,n.jsx)("span",{className:"flex size-5 self-start",children:(0,n.jsx)(a.JO,{type:d,size:null!=f?f:16})}),(0,n.jsx)(s.Z.LabelXsPlus,{weight:"medium","data-testid":h,children:u})]}),m&&(0,n.jsx)("div",{className:"flex",children:"plain"!==b?(0,n.jsx)(l.g,{inverted:!0,square:!0,label:m}):(0,n.jsx)(s.Z.LabelXsPlus,{weight:"medium","data-testid":h,children:m})})]})},t)})})}},117673:function(e,t,r){r.d(t,{c:()=>i});var n=r(683551),o=r(223820),i=function(e){var t=e.onClick,r=e.children,i=e.as;return(0,n.jsx)(o.v.Item,{as:i,onClick:t,children:r})}},663949:function(e,t,r){r.d(t,{F:()=>y});var n=r(683551),o=r(314121),i=r(338664),a=r.n(i),l=r(426371),s=r.n(l),c=r(415043),u=r(645391),d=r(102965);function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function p(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function m(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var b=function(e){return"to"in e&&!!e.to},y=(0,o.forwardRef)(function(e,t){var r=e.active,o=e.children,i=e.forceClose,l=void 0!==i&&i,y=e.hasDanger,h=void 0!==y&&y,v=e.onClick,g=void 0===v?s():v,j=e.isDark,x=void 0!==j&&j,O=e.isDisabled,w=void 0!==O&&O,S=e.className,P=m(e,["active","children","forceClose","hasDanger","onClick","isDark","isDisabled","className"]),_=(0,d.tv)(),k=_.isOpen,D=_.toggle,E=function(e){l&&k&&D(),a()(g)&&g(e)},A=(0,u.A)("block w-full text-left group py-[0.438rem] px-4 rounded-md hover:bg-tertiary !text-sm font-medium transition-colors duration-75",{"opacity-30":w,"hover:text-dark hover:bg-secondary":!x,"text-default":!h&&!x,"bg-tertiary":r&&!x,"text-v2-danger hover:text-v2-danger":h,"text-white hover:bg-tertiary":x},S);if(b(P))return(0,n.jsx)(c.rU,p(f({ref:t,className:A,onClick:E},P),{children:o}));if(!b(P)){var C=P.linkType,N=m(P,["linkType"]);return(0,n.jsx)("button",p(f({ref:t,onClick:E,className:A},N),{type:void 0===C?"submit":C,disabled:w,children:o}))}return null});y.displayName="ItemLink"},761507:function(e,t,r){r.d(t,{g:()=>l});var n=r(683551),o=r(314121),i=r(223820),a=r(663949),l=function(e){var t=e.children,r=e.active,l=e.onClick,s=e.to,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["children","active","onClick","to"]);return(0,n.jsx)(i.v.Item,{as:o.Fragment,children:function(e){var o,i,u=e.active;return(0,n.jsx)(a.F,(o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({to:s,onClick:l,active:u||r},c),i=i={children:t},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))}),o))}})}},759765:function(e,t,r){r.d(t,{j:()=>a});var n=r(683551),o=r(379600),i=r.n(o),a=function(e){var t,r,o=e.children,a=e.className,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["children","className"]);return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:i()("group flex w-full cursor-pointer items-center justify-center gap-1.5 py-1",a)},l),r=r={children:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},459269:function(e,t,r){r.d(t,{W:()=>p,n:()=>f});var n=r(683551),o=r(338664),i=r.n(o),a=r(583972),l=r(102965),s=r(189713),c=r(117673),u=r(663949),d=r(642339),f=function(e){return"separator"===e.value},p=function(e){var t=e.option,r=e.onChange,o=e.linkType,p=void 0===o?"submit":o,m=e.labelWeight,b=e.isDark,y=e.isActive,h=null!=m?m:"medium";return f(t)?(0,n.jsx)(d.Z,{}):(null==t?void 0:t.hide)?null:(b&&(t.color="text-feature-light group-hover:text-dark"),(0,n.jsx)(c.c,{children:function(e){var o,c=e.active;return(0,n.jsxs)(u.F,{active:void 0!==y?y:c,to:null==t?void 0:t.pathTo,onClick:function(){i()(r)&&r(t.value),i()(null==t?void 0:t.onClick)&&t.onClick()},linkType:p,isDark:b,isDisabled:null==t?void 0:t.isDisabled,className:(null==t?void 0:t.className)||"",children:[(0,n.jsxs)(l.Lt.IconContainer,{children:[t.icon&&(0,n.jsx)("span",{className:"size-5",children:(0,n.jsx)(a.JO,{className:t.iconClassName,type:t.icon,size:null!=(o=t.iconSize)?o:16})}),(0,n.jsx)(s.Z.LabelXsPlus,{weight:h,color:t.color,children:t.label})]}),t.description&&(0,n.jsx)("div",{className:"py-0.5",children:t.description})]})}},t.value))}},642339:function(e,t,r){r.d(t,{Z:()=>o});var n=r(683551),o=function(){return(0,n.jsx)("div",{className:"p-3",children:(0,n.jsx)("hr",{className:"border-primary h-[1px] overflow-hidden border-t"})})}},102965:function(e,t,r){r.d(t,{tv:()=>g,Lt:()=>R,wk:()=>D});var n=r(683551),o=r(314121),i=r(223820),a=r(379600),l=r.n(a),s=r(615556),c=r(377521),u=r.n(c),d=r(189713),f=r(583972),p=r(759765),m=r(459269),b=function(e){var t=e.activeOptionValue,r=e.options,o=void 0===r?[]:r,i=e.className,a=e.labelColor,s=void 0===a?"text-dark":a,c=o.find(function(e){return e.value===t}),b=u()(o),y=c||b;return y&&(0,m.n)(y)?null:(0,n.jsxs)(p.j,{className:l()(i,"focus-visible:bg-tertiary hover:bg-tertiary !gap-1 !rounded-md py-2 !pl-3 !pr-1.5 transition-colors duration-200"),children:[(0,n.jsx)(d.Z.LabelSm,{color:s,weight:"medium",children:null==y?void 0:y.label}),(0,n.jsx)(f.JO,{type:"caret-down","aria-hidden":"true",useWithStrokeCurrentColor:!0,className:l()("size-5",s),viewBox:"0 0 8 4"})]})},y=r(338664),h=r.n(y),v=(0,o.createContext)(null);v.displayName="DropdownContext";var g=function(){var e=(0,o.useContext)(v);if(!e)throw Error("useDropdownContext must be used within a Dropdown");return e},j=function(e){var t=e.isOpen,r=e.toggle,i=e.onToggle,a=e.children;return(0,o.useEffect)(function(){h()(i)&&i(t)},[t,i]),(0,n.jsx)(v.Provider,{value:{isOpen:t,toggle:r,onToggle:i},children:a})},x=r(59993),O=r(117673),w=r(663949),S=r(761507),P=r(279113),_=r(800357),k=r(645391),D={SMALL:"small",MEDIUM:"medium",LARGE:"large",EXTRA_LARGE:"extra-large",FULL:"full"},E={enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"};function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function C(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var N=function(e){var t=e.open,r=e.size,a=e.onChange,l=e.options,s=e.hasOptions,c=e.menuWrapperClassName,u=e.transitionWrapperClassName,d=e.menuItemsClassName,f=e.shouldAddDivider,p=e.popperElRef,b=e.popperAttributes,y=e.popperStyles,h=e.appendTo,v=e.setPopperElement,g=e.children,j=e.linkType,x=e.labelWeight,O=e.isDark,w=e.animations,S=!!h,N=(0,n.jsx)("div",C(A({className:(0,k.A)("z-10",{"w-full":r===D.FULL},u),ref:p,style:y},b),{children:(0,n.jsx)(P.u,C(A({as:o.Fragment,show:t,beforeEnter:function(){return v(null==p?void 0:p.current)},afterLeave:function(){return v(null)}},w||E),{children:(0,n.jsx)("div",{className:(0,k.A)("mt-1",{"px-4":r===D.FULL},c),children:(0,n.jsxs)(i.v.Items,{static:!0,className:(0,k.A)("overflow-hidden rounded-xl border p-4 shadow-xl outline-none focus:outline-none",d,O?"border-[#34373D] bg-[#1F2123]":"bg-primary border-primary",{"divide-primary divide-y":f,"w-32":r===D.SMALL,"w-56":r===D.MEDIUM,"w-[17rem]":r===D.LARGE,"w-96":r===D.EXTRA_LARGE,"w-full":r===D.FULL}),"data-testid":"dropdown-menu-items",children:[l&&s&&l.map(function(e,t){return(0,n.jsx)(m.W,A({option:e,onChange:a,linkType:j,labelWeight:x,isDark:O},!(0,m.n)(e)&&{isActive:e.isActive}),"".concat(e.value,"-").concat(t))}),!s&&g]})})}))}));return S?(0,n.jsx)(n.Fragment,{children:(0,_.createPortal)(N,h)}):N},T=r(642339),I=r(380212);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=Object.assign(function(e){var t=e.as,r=e.buttonWrapperComponent,a=void 0===r?"div":r,c=e.activeOptionValue,u=e.animations,d=e.appendTo,f=e.button,p=e.buttonClassName,m=e.buttonLabel,y=e.buttonType,h=e.buttonWrapperClassName,v=e.children,g=e.className,x=e.dataTestId,O=e.buttonDataTestId,w=void 0===O?"dropdown-button":O,S=e.direction,P=e.isDark,_=void 0!==P&&P,k=e.labelWeight,E=e.linkType,A=e.menuWrapperClassName,C=e.menuItemsClassName,T=e.onChange,M=e.onToggle,R=e.options,F=e.popperOptions,U=e.shouldAddDivider,z=void 0!==U&&U,$=e.size,B=void 0===$?D.MEDIUM:$,Z=e.transitionWrapperClassName,H=e.menuButtonEl,q=void 0===H?"button":H,V=(0,o.useRef)(null),W=(0,o.useRef)(null),J=L((0,o.useState)(null),2),G=J[0],K=J[1],Q=L((0,o.useState)(null),2),X=Q[0],Y=Q[1],ee=!!f,et=!!R,er={placement:void 0===S?"bottom-end":S,strategy:"fixed"};d&&B===D.FULL&&(er.modifiers=[I.Z]),er=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},er,F);var en=(0,s.D)(G,X,er),eo=en.styles,ei=en.attributes,ea=(0,o.useCallback)(function(){var e,t;null==(t=W.current)||null==(e=t.click)||e.call(t)},[W]),el=function(e){e.stopPropagation()};return(0,n.jsx)(i.v,{as:void 0===t?"div":t,className:void 0===g?"inline-block text-left":g,"data-testid":"dropdown",children:function(e){var t=e.open;return(0,n.jsx)(j,{isOpen:t,toggle:ea,onToggle:M,children:(0,n.jsxs)(a,{ref:K,className:h,"data-testid":x||"dropdown-button-wrapper",children:[(0,n.jsxs)(i.v.Button,{as:q,ref:W,className:l()("focus-visible:outline-secondary rounded-md focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",p),"data-testid":w,type:y,"aria-label":m,onClick:el,children:[ee&&f,!ee&&(0,n.jsx)(b,{activeOptionValue:c,options:R})]}),(0,n.jsx)(N,{open:t,size:B,onChange:T,options:R,hasOptions:et,menuWrapperClassName:A,transitionWrapperClassName:Z,shouldAddDivider:z,popperElRef:V,popperAttributes:ei.popper,popperStyles:eo.popper,appendTo:d,setPopperElement:Y,linkType:E,labelWeight:k,animations:u,isDark:_,menuItemsClassName:C,children:v})]})})}})},{Header:function(e){var t=e.children;return(0,n.jsx)("div",{className:"flex items-center px-3 py-2",children:(0,n.jsx)(d.Z.LabelXsPlus,{color:"text-lightest",weight:"medium",children:t})})},Item:O.c,ItemWithLink:S.g,ItemGroup:function(e){var t=e.children;return(0,n.jsx)("div",{className:"py-1",children:t})},ItemLink:w.F,MenuButton:p.j,ActiveLabelButton:b,BadgeContainer:function(e){var t=e.children;return(0,n.jsx)("div",{className:"flex items-center justify-between",children:t})},IconContainer:function(e){var t=e.children;return(0,n.jsx)("div",{className:l()("text-dark flex items-center gap-2"),children:t})},IconWithBadgeList:x.A,Separator:T.Z})},628866:function(e,t,r){r.d(t,{M:()=>a});var n=r(714844),o=r(547550),i=function(){return(0,o.UT)("https://d1d0f0u7zob9x2.cloudfront.net/emoji-set-v3.json")},a=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).options;return(0,n.useQuery)("emoji-mart-data",i,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({staleTime:864e5},e))}},130211:function(e,t,r){r.d(t,{Qe:()=>n.Qe,WS:()=>n.WS,r0:()=>o.r});var n=r(902893),o=r(524090)},74288:function(e,t,r){r.d(t,{c:()=>eu});var n=r(683551),o=r(426371),i=r.n(o),a=r(314121),l=r(100334),s=[{label:(0,l.t)("emoji_picker_v3.tabs.emoji"),value:"emoji"},{label:(0,l.t)("emoji_picker_v3.tabs.shapes"),value:"shapes"},{label:(0,l.t)("emoji_picker_v3.tabs.icon"),value:"icons"},{label:(0,l.t)("emoji_picker_v3.tabs.custom"),value:"custom"}],c=r(615556),u=r(147393);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=function(e){var t=e.pickerAddOns,r=e.placement,n=e.popperOptions,o=f((0,a.useState)(s["0"]),2),i=o[0],l=o[1],d=f((0,a.useState)(null),2),p=d[0],m=d[1],b=f((0,a.useState)(null),2),y=b[0],h=b[1],v=f((0,a.useState)(!1),2),g=v[0],j=v[1],x=(0,a.useRef)(null),O=function(e){return null==t?void 0:t.includes(e)},w=O("icons"),S=O("shapes"),P=O("custom"),_="emoji"===i.value,k=w&&"icons"===i.value,D=S&&"shapes"===i.value,E=P&&"custom"===i.value,A=(0,c.D)(y,p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({strategy:"fixed",placement:r,modifiers:[{name:"offset",options:{offset:[0,8]}}]},n)),C=A.styles,N=A.attributes,T=(0,u.I)(x,{childList:!0,subtree:!0,attributes:!0}),I=T.hasElementMutated,M=T.setHasElementMutated;return(0,a.useEffect)(function(){I&&M(function(e){return!e})},[I]),{activeTab:i,setActiveTab:l,popperElement:p,setPopperElement:m,setTargetElement:h,targetElement:y,emojiPickerPopoverRef:x,isEmojiPickerTabActive:_,isIconPickerTabActive:k,isShapePickerTabActive:D,isCustomPickerTabActive:E,shouldRenderEmojiMartPicker:_||k||D,styles:C,attributes:N,hasElementMutated:I,setHasElementMutated:M,EMOJI_PICKER_ENABLED_TABS_MAPPER:{emoji:!0,shapes:S,icons:w,custom:P},isCustomFileUploadProcessing:g,setIsCustomFileUploadProcessing:j}},m=(0,a.createContext)({activeTab:s["0"],setActiveTab:function(){},setPopperElement:function(){},setTargetElement:function(){},emojiPickerPopoverRef:(0,a.createRef)(),isEmojiPickerTabActive:!1,isIconPickerTabActive:!1,isShapePickerTabActive:!1,isCustomPickerTabActive:!1,shouldRenderEmojiMartPicker:!1,styles:{},attributes:{},EMOJI_PICKER_ENABLED_TABS_MAPPER:{},isCustomFileUploadProcessing:!1,setIsCustomFileUploadProcessing:function(){}});m.displayName="EmojiPickerContext";var b=function(e){var t=e.pickerAddOns,r=e.placement,o=e.popperOptions,i=e.children,a=e.value,l=p({pickerAddOns:t,placement:r,popperOptions:o}),s=l.activeTab,c=l.setActiveTab,u=l.setPopperElement,d=l.setTargetElement,f=l.emojiPickerPopoverRef,b=l.isEmojiPickerTabActive,y=l.isIconPickerTabActive,h=l.isShapePickerTabActive,v=l.isCustomPickerTabActive,g=l.shouldRenderEmojiMartPicker,j=l.styles,x=l.attributes,O=l.EMOJI_PICKER_ENABLED_TABS_MAPPER,w=l.isCustomFileUploadProcessing,S=l.setIsCustomFileUploadProcessing;return(0,n.jsx)(m.Provider,{value:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({activeTab:s,setActiveTab:c,setPopperElement:u,setTargetElement:d,emojiPickerPopoverRef:f,isEmojiPickerTabActive:b,isIconPickerTabActive:y,isShapePickerTabActive:h,isCustomPickerTabActive:v,shouldRenderEmojiMartPicker:g,styles:j,attributes:x,EMOJI_PICKER_ENABLED_TABS_MAPPER:O,isCustomFileUploadProcessing:w,setIsCustomFileUploadProcessing:S},a),children:i})},y=function(){return(0,a.useContext)(m)},h=r(568880),v=r(279113),g=r(379600),j=r.n(g),x=r(800357),O=function(e){var t=e.shouldEmojiPickerRenderAsPortal,r=e.children,o=e.open,i=e.portalTo,a=y().emojiPickerPopoverRef,l="relative z-[9999]";return t?(0,n.jsx)(n.Fragment,{children:o&&(0,x.createPortal)((0,n.jsx)("div",{ref:a,className:l,children:r}),i||document.body)}):(0,n.jsx)("div",{ref:a,className:l,children:r})},w=r(214813),S=r(338664),P=r.n(S),_=r(189713),k=function(e){var t=e.label,r=e.isActive,o=e.onClick,i=e.className;return(0,n.jsx)("button",{type:"submit",className:j()("p-3 no-underline outline-none transition-all duration-100 ease-in-out hover:outline-none focus:outline-none",{"border-darkest border-b":r,"border-b border-transparent":!r},i),onClick:function(e){e.preventDefault(),P()(o)&&o()},children:(0,n.jsx)(_.Z.LabelSm,{weight:"medium",color:r?"text-darkest":"text-light",children:t})})};k.displayName="Tab.Item";var D=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:j()("flex flex-row px-1",r),children:t})};D.displayName="Tab",D.Item=k;var E=function(){var e=y(),t=e.activeTab,r=e.setActiveTab,o=e.onRemoveEmoji,i=e.EMOJI_PICKER_ENABLED_TABS_MAPPER,a=[{label:(0,l.t)("emoji_picker_v3.tabs.emoji"),value:"emoji"},{label:(0,l.t)("emoji_picker_v3.tabs.shapes"),value:"shapes"},{label:(0,l.t)("emoji_picker_v3.tabs.icon"),value:"icons"},{label:(0,l.t)("emoji_picker_v3.tabs.custom"),value:"custom"}];return a.filter(function(e){return i[e.value]}).length<=1?null:(0,n.jsx)("div",{className:"border-primary space-x-6 border-b px-1","data-testid":"emoji-picker-header",children:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,n.jsx)(D,{children:a.map(function(e){var o=e.label,a=e.value;return i[a]?(0,n.jsx)(D.Item,{label:o,isActive:a===t.value,onClick:function(){return r({label:o,value:a})}},a):null})}),(0,w.isFunction)(o)&&(0,n.jsx)(D.Item,{label:(0,l.t)("emoji_picker_v3.tabs.remove"),className:"hover:text-dark",onClick:o})]})})},A=r(598734),C=["image/gif","image/jpeg","image/png"],N=function(e){var t=e.close,r=(0,A.A)(),o=r.uploadFile,i=r.progress,s=r.status,c=r.response,u=r.isError,d=y(),f=d.handleCustomIconUpload,p=d.shouldCloseOnSelect,m=d.setIsCustomFileUploadProcessing;(0,a.useEffect)(function(){P()(f)&&f({status:s,progress:i,response:c,isError:u}),"uploading"===s&&m(!0),"completed"===s&&c&&p&&(m(!1),setTimeout(function(){t()},1e3))},[s,i,c,u]);var b={uploading:(0,l.t)("emoji_picker_v3.custom_icon.cta_uploading"),completed:(0,l.t)("emoji_picker_v3.custom_icon.cta_completed"),idle:(0,l.t)("emoji_picker_v3.custom_icon.file_upload.cta")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"file",id:"custom-icon-upload",className:"hidden",onChange:function(e){var t,r;return o(null==(r=e.target)||null==(t=r.files)?void 0:t[0])},accept:C.join(",")}),(0,n.jsx)("label",{className:j()("text-darkest border-secondary bg-primary hover:bg-tertiary rounded-md border px-[18px] py-[6px] text-center text-sm !font-medium leading-5",{"pointer-events-none cursor-not-allowed":"uploading"===s}),htmlFor:"custom-icon-upload",children:b[s]}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)(_.Z.LabelXs,{color:"text-default",children:[(0,l.t)("emoji_picker_v3.custom_icon.file_upload.recommended_size")," ",(0,n.jsx)("br",{}),(0,l.t)("emoji_picker_v3.custom_icon.file_upload.file_types")]})})]})},T=r(674397),I=r.n(T),M=r(870879);function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var z=function(e){var t,r,o,i=e.close,s=U((0,a.useState)(""),2),c=s[0],u=s[1],d=U((0,a.useState)(null),2),f=d[0],p=d[1],m=U((0,a.useState)(!1),2),b=m[0],h=m[1],v=y(),g=v.handleCustomIconUpload,j=v.shouldCloseOnSelect,x=v.setIsCustomFileUploadProcessing,O=(0,a.useRef)(null),w=(0,A.A)(),S=w.uploadFile,k=w.status,D=w.isError,E=w.response,N=w.progress,T=!D&&"uploading"===k,L=function(e){var t,r=e.url,n=e.id,o=void 0===n?I()():n;return(t=function(){var e,t;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return h(!0),[4,fetch(r)];case 1:return[4,(e=n.sent()).blob()];case 2:var i;return(t=n.sent(),i=e.headers.get("content-type"),C.includes(i))?(S(new File([t],o,{type:"image/jpeg"})),p(null)):p((0,l.t)("emoji_picker_v3.custom_icon.link_upload.error")),h(!1),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){R(i,n,o,a,l,"next",e)}function l(e){R(i,n,o,a,l,"throw",e)}a(void 0)})})()};(0,a.useEffect)(function(){P()(g)&&g({status:k,progress:N,response:E,isError:D}),"uploading"===k&&x(!0),"completed"===k&&E&&j&&(x(!1),setTimeout(function(){i()},1e3)),"completed"===k&&E&&j&&i()},[k,D,E,N]),(0,a.useLayoutEffect)(function(){var e;null==(e=O.current)||e.focus()},[]);var z=(F(o={},(0,l.t)("emoji_picker_v3.custom_icon.cta_uploading"),T),F(o,(0,l.t)("emoji_picker_v3.custom_icon.link_upload.cta_processing"),b),F(o,(0,l.t)("emoji_picker_v3.custom_icon.cta"),!0),o);return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex w-full flex-row",children:[(0,n.jsx)("input",{placeholder:(0,l.t)("emoji_picker_v3.custom_icon.link_upload.placeholder"),type:"url",value:c,onChange:function(e){return u(e.target.value)},ref:O,className:"border-hover focus:!border-darkest hover:border-darkest form-control placeholder:text-light !rounded-r-none border border-r-0 !py-2 !text-sm placeholder:opacity-100 focus:border"}),(0,n.jsx)(M.z,{variant:"secondary-light",className:"rounded-l-none",type:"button",onClick:function(){return L({url:c})},children:Object.keys(z).find(function(e){return z[e]})})]}),(f||D)&&(0,n.jsxs)(_.Z.LabelXs,{children:[f,D&&(null==E||null==(r=E.errors)||null==(t=r[0])?void 0:t.detail)]})]})};let $=function(e){var t=e.close;return(0,n.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,n.jsx)(z,{close:t}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,n.jsx)("div",{className:"border-primary w-full border-t"})}),(0,n.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,n.jsx)("span",{className:"bg-primary text-default px-2",children:(0,l.t)("emoji_picker_v3.custom_icon.or")})})]}),(0,n.jsx)(N,{close:t})]})};var B=r(722024),Z=r(969521),H=function(){return(0,n.jsx)("div",{className:"flex size-full flex-row items-center justify-center","data-testid":"suspense-loader",children:(0,n.jsx)("div",{className:"border-darkest size-4 animate-spin rounded-full border-b-2"})})},q=' \n  .search input[type="search"] {\n    background-color: var(--color-background-primary) !important;\n    border: 1px solid var(--color-border-primary);\n    border-radius: 8px;\n    padding: 12px 32px;\n    color: var(--color-text-dark);\n    font-size: 14px;\n  }\n\n  span.icon.loupe.flex {\n    color: var(--color-text-light);\n    font-size: 16px;\n  }\n\n  div.category {\n    text-transform: uppercase;\n    font-size: 11px;\n    font-weight: 600;\n    letter-spacing: 0.35px;\n    color: var(--color-text-dark);\n    font-family: var(--font-system-ui);\n    padding-bottom: 14px;\n  }\n  div.search,\n  .skin-tone-button{\n    margin-bottom: 12px;\n  }\n',V=["people","nature","foods","activity","travel","objects","places","symbols","flags"],W=["icons"],J=["circle","square","triangle","star","heart","diamond"],G=r(628866);function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Q=function(e){var t=e||document,r=t.createElement("style");r.innerHTML="\nem-emoji-picker {\n  --border-radius: 0;\n  --shadow: 0 0 0 0 rgba(var(--color-black), 0);\n  --font-family: var(--font-system-ui);\n  --font-size: 11px;\n\n  height: 360px;\n  width: 100%;\n\n  --em-rgb-input: var(--color-black);\n  --em-rgb-background: var(--color-background-emoji-picker);\n\n  --color-border: var(--color-border-primary);\n\n  --rgb-color: var(--color-text-emoji);\n  --rgb-background: var(--color-background-emoji-picker);\n  --rgb-accent: var(--color-background-emoji-picker-hover);\n\n  --preview-placeholder-size: 14px;\n}\n",t.head.appendChild(r)},X=function(e){var t=e||document,r=t.querySelector("em-emoji-picker");if(r){var n=r.shadowRoot;if(n)if(Q(t),window.CSSStyleSheet&&"replaceSync"in CSSStyleSheet.prototype)try{var o,i=new CSSStyleSheet;i.replaceSync(q),n.adoptedStyleSheets=(o=n.adoptedStyleSheets,function(e){if(Array.isArray(e))return K(e)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return K(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([i])}catch(e){console.error("Error applying styles via Constructable Stylesheets:",e),Y(n)}else Y(n)}},Y=function(e){var t=e.querySelector("style#custom-picker-styles");t||((t=document.createElement("style")).id="custom-picker-styles",e.appendChild(t)),t.textContent=q},ee=function(e){return e.includes("icon-")},et=function(e){return e.includes("shape-")},er=function(e){return ee(e)?"icons":et(e)?"shapes":"emoji"},en=function(e){var t=e.id,r=e.native,n=e.emoticons;return ee(t)||et(t)?{identifier:t,emoji_type:er(t)}:{emoji:r||(null==n?void 0:n[0]),emoji_type:er(t)}};function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ei(e){return function(e){if(Array.isArray(e))return eo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return eo(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ea=(0,Z.u)(function(){return Promise.all([r.e("1097"),r.e("1346")]).then(r.bind(r,980549))});let el=function(e){var t=e.close,r=y(),o=r.isEmojiPickerTabActive,i=r.isIconPickerTabActive,l=r.isShapePickerTabActive,s=r.customIcons,c=r.customShapeIcons,u=r.value,d=r.name,f=r.shouldShowEmojiPreview,p=r.shouldShowSkinTonePicker,m=r.onEmojiSelect,b=void 0===m?w.noop:m,h=r.shouldCloseOnSelect,v=(0,B.N3)(),g=(0,G.M)(),j=g.data,x=g.isLoading,O=(0,a.useCallback)(function(){return o?V:i?W:l?J:void 0},[o,i,l]);if(x)return(0,n.jsx)(H,{});var S=(null==v?void 0:v.locale)||"en";return(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)(H,{}),children:(0,n.jsx)("div",{"data-emoji-tab-active":o,"data-shape-tab-active":l,"data-icon-tab-active":i,children:(0,n.jsx)(ea,{autoFocus:!0,locale:S,dynamicWidth:!0,data:j,custom:ei(void 0===s?[]:s).concat(ei(void 0===c?[]:c)),categories:O(),navPosition:"none",previewPosition:f?"bottom":"none",skinTonePosition:o&&p?"search":"none",emojiButtonRadius:"8px",onEmojiSelect:function(e){b(en(e),d),h&&t()},previewEmoji:(null==u?void 0:u.id)||"blue-circle"})})})};var es=function(){var e=y(),t=e.as,r=e.setTargetElement,o=e.setPopperElement,i=e.styles,a=e.attributes,l=e.shouldRenderEmojiMartPicker,s=e.isCustomPickerTabActive,c=e.target,u=e.targetWrapperClassName,d=e.shouldEmojiPickerRenderAsPortal,f=e.popoverPanelClassName,p=e.shouldShowEmojiPreview,m=e.isCustomFileUploadProcessing,b=e.portalTo;return(0,n.jsx)(h.J,{as:"div","data-testid":"emoji-picker",children:function(e){var y,g,x=e.close,w=e.open;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.J.Button,{as:t,ref:r,className:j()("inline-flex",u),"data-testid":"emoji-picker-button",children:c}),(0,n.jsx)(O,{open:w,shouldEmojiPickerRenderAsPortal:d,portalTo:b,children:(0,n.jsx)(v.u,{show:(X(null==b?void 0:b.ownerDocument),s&&(!s||m))?s&&m?m:void 0:w,as:"div",enter:"transition ease-out duration-100",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-100",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:(0,n.jsx)(h.J.Panel,(y=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:o,style:i.popper},a.popper),g=g={className:j()("bg-primary border-primary w-[24rem] rounded-md border shadow-lg md:w-[28rem]",f),"data-testid":"emoji-popover-panel",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E,{}),(0,n.jsxs)("div",{className:j()({"py-3":!p,"pt-3":p,"px-1":l,"px-4 pb-3":!l}),children:[l&&(0,n.jsx)(el,{close:x}),s&&(0,n.jsx)($,{close:x})]})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(g)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(g)).forEach(function(e){Object.defineProperty(y,e,Object.getOwnPropertyDescriptor(g,e))}),y))})})]})}})},ec=r(130211),eu=function(e){var t=e.as,r=e.target,o=e.popperOptions,a=e.value,l=e.name,s=e.onRemoveEmoji,c=e.targetWrapperClassName,u=e.popoverPanelClassName,d=e.placement,f=e.pickerAddOns,p=e.handleCustomIconUpload,m=void 0===p?i():p,y=e.onEmojiSelect,h=void 0===y?i():y,v=e.customIcons,g=void 0===v?ec.Qe:v,j=e.customShapeIcons,x=void 0===j?ec.r0:j,O=e.shouldShowEmojiPreview,w=e.shouldShowSkinTonePicker,S=e.shouldEmojiPickerRenderAsPortal,P=e.shouldCloseOnSelect,_=e.portalTo;return(0,n.jsx)(b,{pickerAddOns:void 0===f?[]:f,placement:void 0===d?"bottom-start":d,popperOptions:o,value:{as:void 0===t?"button":t,targetWrapperClassName:void 0===c?"":c,popoverPanelClassName:void 0===u?"":u,shouldShowEmojiPreview:void 0!==O&&O,target:r,shouldEmojiPickerRenderAsPortal:void 0===S||S,value:a,name:l,onRemoveEmoji:s,handleCustomIconUpload:m,onEmojiSelect:h,customIcons:g,customShapeIcons:x,shouldShowSkinTonePicker:void 0===w||w,shouldCloseOnSelect:void 0===P||P,portalTo:_},children:(0,n.jsx)(es,{})})}},132361:function(e,t,r){r.d(t,{u:()=>l});var n=r(683551),o=r(62263),i=r(294830),a=r(189713),l=function(e){var t,r,l,s,c=e.header,u=e.description,d=e.primaryLabel,f=e.primaryDisabled,p=e.onPrimaryClick,m=e.secondaryLabel,b=e.secondaryDisabled,y=e.onSecondaryClick,h=e.tertiaryLabel,v=e.tertiaryDisabled,g=e.onTertiaryClick,j=e.fontSize,x=!!(p&&d),O=!!(y&&m),w=!!(g&&h),S={};return"sm"===(void 0===j?"md":j)?(l=a.Z.TitleSm,S={weight:"semibold"},s=a.Z.BodySm):(l=a.Z.TitleMd,s=a.Z.BodyMd),(0,n.jsxs)("div",{className:"flex size-full flex-col items-center justify-center gap-9 p-8 text-center","data-testid":"empty-state",children:[(0,n.jsxs)("div",{className:"flex max-w-lg flex-col gap-3",children:[(0,n.jsx)(l,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},S),r=r={children:c},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),u&&(0,n.jsx)(s,{children:(0,n.jsx)(o.w,{content:u})})]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[x&&(0,n.jsx)(i.z,{type:"button",variant:"circle",onClick:p,disabled:void 0!==f&&f,children:d}),O&&(0,n.jsx)(i.z,{type:"button",variant:"secondary",onClick:y,disabled:void 0!==b&&b,children:m})]}),w&&(0,n.jsx)(i.z,{type:"button",variant:"link",onClick:g,disabled:void 0!==v&&v,children:h})]})}},161154:function(e,t,r){r.d(t,{i:()=>a});var n=r(683551),o=r(244289),i=r(776640),a=function(e){var t=e.name,r=e.options,a=e.rules,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","options","rules"]),s=(0,o.Gc)().control;return(0,n.jsx)(o.Qr,{control:s,name:t,rules:void 0===a?{}:a,render:function(e){var t,o,a=e.field,s=a.onChange,c=a.onBlur,u=a.value,d=a.ref,f=a.name;return(0,n.jsx)(i.h,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l),o=o={menuItems:r,onBlur:c,name:f,ref:d,value:u,onChange:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}),t))}})};a.displayName="Form.AnimatedSelect"},552156:function(e,t,r){r.d(t,{K:()=>b,s:()=>y});var n=r(683551),o=r(314121),i=r(379600),a=r.n(i),l=r(828264),s=r(244289),c=r(100334),u=r(286638);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){var t,r=e.onOpenPicker,i=e.onClosePicker,s=e.show,c=void 0!==s&&s,f=e.onChange,p=e.value,m=e.disabled,b=(t=(0,l.rd)(p||"#000000"),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return d(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=b[0],h=b[1],v=(0,o.useRef)(null);return(0,o.useEffect)(function(){p&&p!==y.hex&&!c&&h(l.x4.convert("hex",p))},[h,p,c,y.hex]),(0,u.Z)(v,i),(0,n.jsxs)("div",{className:a()("relative flex size-5 items-center",{"pointer-events-none":void 0!==m&&m}),children:[(0,n.jsx)("button",{type:"button",className:"size-5 cursor-pointer rounded-sm ring-1 ring-current",style:{backgroundColor:y.hex},onClick:r}),c&&(0,n.jsx)("div",{className:"border-primary bg-primary absolute left-0 top-5 z-10 min-h-[160px] w-48 rounded-md border p-3",ref:v,"data-testid":"color-picker-popup",children:(0,n.jsx)("div",{className:"w-[166px]",children:(0,n.jsx)(l.zH,{height:114,color:y,onChange:function(e){h(e)},onChangeComplete:function(e){e.hex!==p&&f(e.hex)},hideInput:!0,hideAlpha:!0})})})]})},p=r(299937);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},y=function(e){var t,r,i,u=e.name,d=e.disabled,y=void 0!==d&&d,h=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","disabled"]),v=(0,s.Gc)(),g=v.watch,j=v.setValue,x=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return m(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),O=x[0],w=x[1],S=g(u);return(0,n.jsx)(p.y,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},h),i=i={disabled:y,variant:"text",name:u,maxLength:7,rules:{validate:function(e){return!!b(e)||(0,c.t)("invalid_color")}},onBlur:function(){j(u,l.x4.convert("hex",S).hex,{shouldDirty:!0,shouldValidate:!0})},prefix:(0,n.jsx)("div",{className:a()("py-3 pl-4",{"cursor-not-allowed":y}),children:(0,n.jsx)(f,{value:S,onChange:function(e){return!y&&j(u,e,{shouldDirty:!0,shouldValidate:!0})},onOpenPicker:function(){return!y&&w(!0)},onClosePicker:function(){return!y&&w(!1)},show:O,disabled:y})}),className:"form-control !border-l-0 uppercase"},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r))};y.displayName="Form.ColorPicker"},16764:function(e,t,r){r.d(t,{L:()=>a});var n=r(683551),o=r(244289),i=r(322407),a=function(e){var t=e.name,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name"]),a=(0,o.Gc)().control;return(0,n.jsx)(o.Qr,{control:a,name:t,render:function(e){var t,o,a=e.field,l=a.onChange,s=a.value,c=a.name;return(0,n.jsx)(i.CommunityMemberSelect,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),o=o={name:c,onChange:function(e){return l(e.value)},value:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}),t))}})};a.displayName="Form.CommunityMemberSelect"},884505:function(e,t,r){r.d(t,{n:()=>c});var n=r(683551),o=r(314121),i=r(379600),a=r.n(i),l=r(244289),s=r(308540),c=(0,o.forwardRef)(function(e,t){var r=e.name,o=e.className,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","className"]),c=(0,l.Gc)().control;return(0,n.jsx)(l.Qr,{control:c,name:r,render:function(e){var r,l,c=e.field,u=c.onChange,d=c.value,f=c.name;return(0,n.jsx)(s.Z,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i),l=l={className:a()("placeholder:text-light placeholder:opacity-100",o),name:f,onChange:function(e){return u(e.target.value)},value:d,ref:t},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(l)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(l)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(l,e))}),r))}})});c.displayName="FormTextAreaAutosize"},543109:function(e,t,r){r.d(t,{$:()=>l});var n=r(683551),o=r(214813),i=r(244289),a=r(799746),l=function(e){var t=e.name,r=e.onChangeCallback,l=void 0===r?o.noop:r,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","onChangeCallback"]),c=(0,i.Gc)().control;return(0,n.jsx)(i.Qr,{control:c,name:t,render:function(e){var t=e.field,r=t.onChange,i=t.value;return(0,n.jsx)(a.R,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({value:i,onChange:function(e){(0,o.isFunction)(l)&&l(e),r(e)}},s))}})}},381275:function(e,t,r){r.d(t,{_:()=>j});var n=r(683551),o=r(244289),i=r(314121),a=r(687066),l=r(379600),s=r.n(l),c=r(214813),u=r(100334),d=r(980973),f=r(870879);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=["places"],y={streetViewControl:!1,mapTypeControl:!1,scrollWheel:!1,fullscreenControl:!1,panControl:!1,rotateControl:!1,gestureHandling:"none",clickableIcons:!1,controlSize:25,disableDoubleClickZoom:!0,draggableCursor:"arrow",draggingCursor:"arrow",keyboardShortcuts:!1},h={fields:["place_id","name","formatted_address","geometry.location","url","website"]},v=function(e){if(null==e?void 0:e.geometry)return{lat:(0,c.isFunction)(e.geometry.location.lat)?e.geometry.location.lat():e.geometry.location.lat,lng:(0,c.isFunction)(e.geometry.location.lng)?e.geometry.location.lng():e.geometry.location.lng}},g=(0,i.memo)(function(e){var t=e.name,r=e.onChange,o=e.value,l=e.placeholder,c=e.className,p=e.autoFocus,g=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","onChange","value","placeholder","className","autoFocus"]),j=(0,a.Ji)({id:"google-map-script",googleMapsApiKey:window.GOOGLE_MAPS_API_KEY||"",libraries:b}).isLoaded,x=m((0,i.useState)((0,d.qO)(o)),2),O=x[0],w=x[1],S=m((0,i.useState)(null),2),P=S[0],_=S[1],k=m((0,i.useState)(!1),2),D=k[0],E=k[1],A=(0,i.useRef)(null);(0,i.useEffect)(function(){var e=O?JSON.stringify(O):"";e!==o&&r(e)},[O]),(0,i.useEffect)(function(){w((0,d.qO)(o))},[o]);var C=(0,i.useCallback)(function(e){return _(e)},[]),N=(0,i.useCallback)(function(e){"Enter"===e.key&&e.preventDefault()},[]);return j?(0,n.jsxs)("div",{className:"location-picker",children:[(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",name:t,value:o},g)),!O&&(0,n.jsx)(a.F2,{onLoad:C,onPlaceChanged:function(){var e=P.getPlace();(null==e?void 0:e.formatted_address)?w(e):w(null),E(!1)},options:h,children:(0,n.jsx)("input",{type:"text",placeholder:l,className:s()("placeholder:text-light placeholder:opacity-100",void 0===c?"form-control":c),autoFocus:p||D,onKeyPress:N,ref:A})}),O&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.b6,{mapContainerClassName:"map-container",zoom:15,options:y,center:v(O),children:O&&(0,n.jsx)(a.Jx,{cursor:"arrow",position:v(O)})}),(0,n.jsxs)("div",{className:"location-picker__location",children:[(0,n.jsxs)("div",{className:"info",children:[O.name&&(0,n.jsx)("p",{className:"name",children:O.name}),O.formatted_address&&(0,n.jsx)("p",{children:O.formatted_address})]}),(0,n.jsx)(f.z,{variant:"secondary",onClick:function(e){e.preventDefault(),E(!0),w(null)},children:(0,u.t)("location_picker.edit")})]})]})]}):null}),j=function(e){var t=e.name,r=e.rules,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","rules"]),a=(0,o.Gc)().control;return(0,n.jsx)(o.Qr,{control:a,name:t,rules:r,render:function(e){var t,r,o=e.field,a=o.onChange,l=o.value,s=o.name;return(0,n.jsx)(g,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i),r=r={name:s,onChange:a,value:l},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}})};j.displayName="Form.LocationPicker"},471465:function(e,t,r){r.d(t,{D:()=>i,X:()=>o});var n=r(314121),o=(0,n.createContext)(!1);o.displayName="ConnectPopoverContext";var i=function(){return(0,n.useContext)(o)}},270483:function(e,t,r){r.d(t,{L:()=>u});var n=r(683551),o=r(314121),i=r(426371),a=r.n(i),l=r(680482),s=function(e){var t=e.editor,r=e.inputRef,n=(0,o.useRef)(null);if(t)n.current={getText:function(){return t.getText()},insertText:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.state.selection.anchor;t.chain().focus().insertContentAt(r,e).run()},insertLink:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r?t.state.selection.anchor-2:t.state.selection.anchor,o=t.chain().focus();r&&o.deleteRange({from:n,to:n+2}),o.insertContentAt(n,'<a href="'.concat(e,'">').concat(e,"</a>")).run()},getCursorPosition:function(){return t.state.selection.anchor},textUpToAnchor:function(){return t.state.doc.textBetween(0,t.state.selection.anchor," ")}};else if(null==r?void 0:r.current){var i=r.current;n.current={getText:function(){return i.value},insertText:function(e){var t,r,n=null!=(t=i.selectionStart)?t:0,o=null!=(r=i.selectionEnd)?r:0,a=i.value.substring(0,n),l=i.value.substring(o);i.value=a+e+l,i.setSelectionRange(n+e.length,n+e.length),i.focus()},insertLink:function(){},getCursorPosition:function(){var e,t;return(null!=(t=null==r||null==(e=r.current)?void 0:e.selectionStart)?t:0)+1},textUpToAnchor:function(){var e,t;return i.value.substring(0,(null!=(t=null==r||null==(e=r.current)?void 0:e.selectionStart)?t:0)+1)}}}return n.current},c=["{{community.url}}","{{trigger.event.url}}","{{trigger.event.space.url}}","{{trigger.event.space.space_group.url}}","{{trigger.comment.url}}","{{trigger.comment.post.url}}","{{trigger.comment.post.space.url}}","{{trigger.comment.post.space.space_group.url}}","{{trigger.post.url}}","{{trigger.post.space.url}}","{{trigger.post.space.space_group.url}}"],u=function(e){var t=e.editor,r=e.inputRef,i=e.setInputChangeHandler,u=void 0===i?a():i,d=e.variables,f=e.wrapperClassName,p=e.optionsClassName,m=e.enableLinkInsertion,b=e.children,y=e.shouldRenderPortal,h=s({editor:t,inputRef:r}),v=!!t&&!!(void 0!==m&&m),g=function(){if(!h)return"";var e=h.textUpToAnchor();return e.length>=2?e.slice(-2):e},j=function(e){var t="{{"===g(),r=t?e.slice(2):e,n=c.includes(e);v&&n?null==h||h.insertLink(e,t):null==h||h.insertText(r)},x=(0,o.useRef)(null);return(0,o.useEffect)(function(){var e=function(){"{{"===g()&&x.current&&x.current.click()};return t?t.on("update",e):u(e),function(){t?t.off("update",e):u(a())}},[h]),(0,n.jsx)("div",{className:void 0===f?"max-w-sm pt-3":f,children:(0,n.jsx)(l.l,{options:d,groupBy:function(e){return e.group},onSelect:function(e){return j(e)},buttonRef:x,optionsClassName:p,shouldRenderPortal:void 0!==y&&y,children:b})})}},711866:function(e,t,r){r.d(t,{m:()=>f,q:()=>d});var n=r(683551),o=r(379600),i=r.n(o),a=r(100334),l=r(527804),s=r(844527),c=r(270483),u=(0,a.t)("dynamic_vars_groups.member"),d=[{group:u,label:"{{member.first_name}}",value:"{{member.first_name}}"},{group:u,label:"{{member.last_name}}",value:"{{member.last_name}}"},{group:u,label:"{{member.name}}",value:"{{member.name}}"},{group:u,label:"{{member.email}}",value:"{{member.email}}"},{group:u,label:"{{member.public_uid}}",value:"{{member.public_uid}}"}],f=function(e){var t,r,o=e.tooltipPlacement,u=e.className,d=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["tooltipPlacement","className"]);return(0,n.jsx)(c.L,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},d),r=r={children:(0,n.jsx)(l.T,{placement:void 0===o?"bottom":o,delay:300,content:(0,a.t)("tiptap.add_variable"),interactive:!1,children:(0,n.jsx)(s.h,{iconSize:20,buttonSize:32,name:"20-variables",className:i()("disabled:cursor-not-allowed disabled:opacity-40",u),ariaLabel:(0,a.t)("tiptap.add_variable")})})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},472107:function(e,t,r){r.d(t,{Q:()=>a});var n=r(683551),o=r(379600),i=r.n(o),a=function(e){var t,r,o=e.href,a=e.variant,l=void 0===a?"primary":a,s=e.children,c=e.full,u=e.small,d=e.extraLarge,f=e.large,p=e.className,m=e.forwardedRef,b=e.rel,y=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["href","variant","children","full","small","extraLarge","large","className","forwardedRef","rel"]);return(0,n.jsx)("a",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},y),r=r={href:o,rel:void 0===b?"noopener noreferrer":b,ref:m,className:i()("focus-visible:!outline-secondary inline-block rounded-md font-bold leading-5 transition-colors duration-150 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",{"px-8 py-3 leading-normal":d,"px-6 py-2 leading-normal":f,"px-[18px] py-[6px] text-sm":!f&&!u&&!d,"px-2 py-1 text-xs":u,"w-full":c,"bg-brand !text-brand-button hover:opacity-90":"primary"===l,"border-secondary bg-primary !text-darkest hover:bg-tertiary border !font-medium":"secondary"===l,"border-hover bg-primary !text-darkest hover:bg-primary border":"secondary-light"===l,"!text-link bg-transparent":"plain"===l,"border-v2-danger bg-v2-danger border !text-white hover:opacity-90":"danger"===l,"border-v2-danger bg-primary !text-v2-danger border !font-medium hover:opacity-90":"danger-outline"===l,"border-circle-button bg-circle-button !text-circle-button hover:border-circle-button-hover hover:bg-circle-button-hover border":"circle"===l,"!text-default hover:!text-darkest bg-transparent !p-0 font-medium transition-colors":"text"===l,"!text-darkest hover:bg-tertiary !font-semibold":"circle-plain"===l,"!text-circle !p-0 !font-semibold":"circle-text"===l},p),children:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},818329:function(e,t,r){r.d(t,{E:()=>l});var n=r(714844),o=r(100334),i=r(309785),a=r(169530),l=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=(0,a.pm)(),l=r.success,s=r.error,c=(0,n.useQueryClient)(),u=(0,n.useQuery)({queryKey:["mediaSettings",e],queryFn:function(){return i.Ss.show(e)},enabled:!!e&&t}),d=u.data,f=u.isLoading,p=u.refetch,m=(0,n.useMutation)({mutationFn:function(t){return i.Ss.update(e,t)},onSuccess:function(){l((0,o.t)("media_settings.success")),p(),c.invalidateQueries(["mediaSettings",e])},onError:function(e){s((0,o.t)("media_settings.error")),console.error(e)}}),b=m.mutate;return{mediaSettings:d,isLoading:f,isUpdating:m.isLoading,update:b,refetch:p}}},583362:function(e,t,r){r.d(t,{m:()=>v});var n=r(683551),o=r(100334),i=r(500672),a=r(645391),l=r(430701),s=r(263229),c=r(379600),u=r.n(c),d=r(961653),f=r(241394),p=r(903431);function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var b=function(e){var t=e.memberTag,r=e.className,o=(0,f.TC)().currentAppearance,i=t||{},a=i.name,l=i.emoji,c=i.color,b=i.display_format,y=i.custom_emoji_url,h=i.custom_emoji_dark_url,v=i.is_public,g=i.is_background_enabled;if(!v)return null;var j={};return g&&(j.borderColor=c,j.backgroundColor=c,j.color=c&&(0,d.Vi)(c).isDark()?"#ffffff":"#000000"),(0,n.jsx)(s.g,m({className:u()(r,{"cursor-pointer":"icon"===b,"font-medium":!0,"px-2":!0})},(l||y||h)&&{emoji:(0,n.jsx)(p.S,{emoji:l,className:"!h-3",appearance:o,customEmojiUrl:y,customEmojiDarkUrl:h})},"icon"===b?{tooltipText:a}:{label:a},c&&{styles:m({},j)}))},y=r(527804),h=function(e){var t=e.memberTags,r=e.labelVariant,i=(0,f.TC)().currentAppearance,a=(0,n.jsx)("ul",{className:"flex !list-none flex-col gap-1 py-1",children:t.map(function(e){return(0,n.jsx)("li",{children:(0,n.jsx)(b,{memberTag:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),className:"border-secondary"})},e.id)})}),l="words"===(void 0===r?"words":r)?(0,o.t)("member_tags.show_more",{count:t.length}):"+".concat(t.length);return(0,n.jsx)("div",{children:(0,n.jsx)(y.T,{content:a,className:"flex",theme:i,children:(0,n.jsx)(s.g,{label:l})})})},v=function(e){var t=e.isAdmin,r=void 0!==t&&t,c=e.limit,u=void 0===c?3:c,d=e.memberTags,f=e.showMoreTag,p=e.memberId,m=e.shouldShowActivityScore,y=void 0!==m&&m,v=e.showMoreLabelVariant,g=e.className,j=(void 0===d?[]:d).filter(function(e){return e.is_public});if(!j.length&&!r&&!y)return null;var x=j.slice(0,u),O=j.slice(u,j.length);return(0,n.jsxs)("div",{className:(0,a.A)("flex flex-wrap gap-2",g),children:[y&&p&&(0,n.jsx)(l.XR,{ids:[p],children:(0,n.jsx)(i.z,{memberId:p,shouldHideIfNoScore:!0})}),r&&(0,n.jsx)(s.g,{className:"!bg-brand !text-brand-button !border-none",label:(0,o.t)("admin"),dataTestId:"admin-badge"}),x.map(function(e){return(0,n.jsx)(b,{memberTag:e},e.id)}),(void 0===f||f)&&O.length>0&&(0,n.jsx)(h,{memberTags:O,labelVariant:v})]})}},478669:function(e,t,r){r.d(t,{u:()=>b});var n=r(683551),o=r(314121),i=r(279113),a=r(100358),l=r(753856),s=r(379600),c=r.n(s),u=r(100334),d=function(e){var t=e.id,r=e.children,s=e.show,d=e.onClose,f=e.title,p=e.className,m=e.hideCloseButton,b=e.overflowVisible,y=e.containerClassName;return(0,n.jsx)(i.u.Root,{show:s,as:o.Fragment,children:(0,n.jsx)(a.V,{as:"div",static:!0,className:"react-modal react-modal--default ".concat(void 0===y?"default":y),open:s,onClose:d,children:(0,n.jsxs)("div",{className:"react-modal__wrapper",children:[(0,n.jsx)(i.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)(a.V.Overlay,{className:"fixed inset-0 bg-gray-900/50"})}),(0,n.jsx)("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true",style:{content:"&#8203;"}}),(0,n.jsx)(i.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,n.jsxs)("div",{id:t,className:c()("react-modal__container",{"overflow-hidden":!(void 0!==b&&b)},void 0===p?"px-6 py-6":p),children:[(0,n.jsx)("div",{className:"react-modal__close-button-container",children:!m&&(0,n.jsxs)("button",{type:"button",className:"react-modal__close-button",onClick:d,children:[(0,n.jsx)("span",{className:"sr-only",children:(0,u.t)("close")}),(0,n.jsx)(l.Z,{className:"size-6","aria-hidden":"true"})]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(a.V.Title,{as:"h3",className:"text-darkest text-lg font-medium leading-6",children:f}),(0,n.jsx)("div",{className:"h-full",children:r})]})]})})]})})})},f=r(583972),p=function(e){var t,r,l=e.show,s=e.onClose,c=e.className,u=e.title,d=e.passThroughProps,p=e.hideCloseButton,m=e.hideTitle,b=e.children,y=(0,o.useRef)(null),h=(0,o.useRef)(null);return(0,n.jsx)(i.u.Root,{show:l,as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)(a.V,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({as:"div",static:!0,className:"fullscreen-modal ".concat(c),initialFocus:p?h:y,open:l,onClose:s},d),r=r={children:(0,n.jsxs)("div",{className:"fullscreen-modal__body-outer",children:[(0,n.jsx)(a.V.Overlay,{className:"fixed inset-0 bg-gray-900/50"}),(0,n.jsx)("span",{className:"hidden","aria-hidden":"true",style:{content:"&#8203;"}}),(0,n.jsx)("div",{className:"fullscreen-modal__body-wrap",children:(0,n.jsxs)("div",{className:"fullscreen-modal__body",ref:h,children:[!p&&(0,n.jsx)("button",{type:"submit",className:"fullscreen-modal__close-icon",onClick:s,ref:y,children:(0,n.jsx)(f.JO,{type:"close"})}),!m&&(0,n.jsx)("h2",{className:"fullscreen-modal__title",children:u}),b]})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},m=function(e){var t,r,l=e.show,s=e.title,c=e.onClose,u=e.hideCloseButton,d=e.className,p=e.passThroughProps,m=e.children,b=(0,o.useRef)(null);return(0,n.jsx)(i.u.Root,{show:l,as:o.Fragment,children:(0,n.jsx)(a.V,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({as:"div",static:!0,className:"fullpage-modal fixed inset-0 z-10 overflow-y-auto ".concat(d),initialFocus:b,open:l,onClose:c},p),r=r={children:(0,n.jsxs)("div",{className:"fullpage-modal__body-outer size-full",children:[(0,n.jsx)(i.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)(a.V.Overlay,{className:"fixed inset-0 bg-gray-900/50"})}),(0,n.jsx)("span",{className:"hidden","aria-hidden":"true",style:{content:"&#8203;"}}),(0,n.jsx)(i.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,n.jsx)("div",{className:"z-1 fullpage-modal__body-wrap relative m-0 size-full",children:(0,n.jsxs)("div",{className:"bg-primary fullpage-modal__body h-full rounded-none md:rounded-md","data-testid":"modal",children:[(0,n.jsx)("h2",{className:"fullpage-modal__title sticky",children:s}),!u&&(0,n.jsx)("button",{type:"submit",className:"fullpage-modal__close-icon z-10",onClick:c,ref:b,children:(0,n.jsx)(f.JO,{type:"close",useWithFillCurrentColor:!0})}),m]})})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},b=function(e){var t,r=e.variant,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["variant"]);switch(r){case"fullscreen":t=p;break;case"large":t=m;break;default:t=d}return(0,n.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o))}},617408:function(e,t,r){r.d(t,{q:()=>l});var n=r(683551),o=r(314121),i=r(379600),a=r.n(i),l=(0,o.forwardRef)(function(e,t){var r=e.children,o=e.iconEl,i=e.actionButtonEl,l=e.className;return(0,n.jsxs)("div",{ref:t,className:a()("flex gap-3 rounded-md px-4 py-3",l),children:[o,(0,n.jsx)("div",{className:"flex-1",children:r}),i]})})},605622:function(e,t,r){r.d(t,{a:()=>c});var n=r(683551),o=r(314121),i=r(379600),a=r.n(i),l=r(189713),s=r(617408),c=(0,o.forwardRef)(function(e,t){var r,o,i=e.children,c=e.className,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["children","className"]);return(0,n.jsx)(s.q,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:a()("bg-v2-warning/5 border-v2-warning border",c),ref:t},u),o=o={children:(0,n.jsx)(l.Z.LabelSm,{color:"text-stroke-foreground",as:"span",children:i})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r))})},713719:function(e,t,r){r.d(t,{R:()=>l});var n=r(683551),o=r(190920),i=r(379600),a=r.n(i),l=function(e){var t=e.children,r=e.value,i=e.className,l=void 0===i?"":i;return(0,n.jsx)(o.E.Option,{value:r,className:function(e){var t=e.checked;return a()("bg-primary hover:border-secondary relative flex cursor-pointer rounded-lg border p-6 shadow-sm transition-colors focus:outline-none",{"border-secondary":t,"border-primary":!t},l)},children:function(e){var r=e.checked;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"flex flex-1",children:(0,n.jsx)("span",{className:"flex flex-col",children:t})}),(0,n.jsx)("span",{className:a()("mt-1.5 flex size-4 shrink-0 items-center justify-center rounded-full border border-transparent",{"bg-toggle-active":r,"bg-primary":!r}),"aria-hidden":"true",children:(0,n.jsx)("span",{className:"bg-primary size-1.5 rounded-full"})})]})}})}},952466:function(e,t,r){r.d(t,{Iv:()=>a,Mz:()=>n,Q_:()=>i,l3:()=>o});var n=64,o=48,i=64,a=360},672003:function(e,t,r){r.d(t,{S:()=>x});var n=r(683551),o=r(314121),i=r(214813),a=r(715686),l=r(250822),s=r(963934),c=r(645391),u=r(38324),d=r(28737),f=r(263303),p=r(41310),m=r(277010),b=r(379600),y=r.n(b),h=r(952466),v=function(e){var t=e.startResizing,r=e.isMessagingModalOpen,o=e.isTrialBannerExists,i=(0,f.f)();return(0,n.jsx)("div",{className:y()("border-primary hover:bg-circle invisible z-[21] shrink-0 grow-0 basis-0.5 cursor-col-resize resize-x justify-self-end hover:w-0.5 md:visible",{"h-[calc(100vh-40px)]":r,"h-[calc(100vh-64px)]":!r&&!o,"h-[calc(100vh-64px-48px)]":!r&&!o&&i,"h-[calc(100vh-112px)]":!r&&o,"h-[calc(100vh-144px-48px)]":!r&&o&&i}),onMouseDown:t})};function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=function(e){var t,r=e.isBelowHeader,b=e.noBorderLeft,y=e.isLoading,g=e.loaderVariant,x=e.children,O=e.className,w=e.shouldHideRailbarDragger,S=e.isFullWidth,P=void 0!==S&&S,_=e.isSmallScreen,k=(0,a.k)().isTrialBannerExists,D=(0,d.U)().isMessagingModalOpen,E=(0,u.x)(),A=E.isLiveStream,C=E.isCourseSpace,N=E.isDrawer,T=(0,l.BT)()||void 0!==_&&_,I=(0,f.f)(),M=(0,s.L)().isElectron,L=(0,o.useRef)(null),R=j((0,o.useState)(!1),2),F=R[0],U=R[1],z=(0,p._)("circle-railbar-width"),$=z.setValue,B=z.getValue,Z=j((0,o.useState)(B()||h.Iv),2),H=Z[0],q=Z[1],V=(0,o.useCallback)(function(){U(!0)},[]),W=(0,o.useCallback)(function(){U(!1)},[]),J=(0,o.useCallback)(function(e){if(F){var t,r=(null==(t=L.current)?void 0:t.getBoundingClientRect().right)||0,n=Math.abs(e.clientX-r);n>332&&n<720&&(q(n),$(n))}},[F]);(0,o.useEffect)(function(){return window.addEventListener("mousemove",J),window.addEventListener("mouseup",W),function(){window.removeEventListener("mousemove",J),window.removeEventListener("mouseup",W)}},[J,W]);var G=void 0!==w&&w||A||C;if(y)return(0,n.jsx)(m.gi,{variant:void 0===g?"rail-bar":g});var K=G?h.Iv:H;return(0,n.jsxs)("div",{className:(0,c.A)("flex h-full flex-row",void 0===O?"":O),style:{width:K},children:[!G&&(0,n.jsx)(v,{startResizing:V,isMessagingModalOpen:D,isTrialBannerExists:k}),(0,n.jsx)("div",{ref:L,id:"rail-content",className:(0,c.A)("bg-primary border-primary fixed right-[inherit] top-0 z-20 h-full border-l opacity-100",{"md:top-16":!D,"lg:!top-0":D||A||N||(t=document.getElementById("lesson-hello-bar"),C&&(0,i.isEmpty)(t)),"lg:top-28":k&&!C||I,"lg:top-40":k&&!C&&I,"lg:top-20":void 0!==r&&r,"border-l-0":void 0!==b&&b,"z-50 !h-full !w-full":T,"absolute !h-[calc(100vh-32px)] rounded-md":A&&!T,"!w-96":A&&!P,"!w-full":N||P,"!top-[6.325rem]":M}),style:{width:K},children:x})]})};x.Header=function(e){var t=e.hasNoBorder,r=e.children,o=e.className,i=(0,d.U)().isMessagingModalOpen,a=(0,u.x)(),l=a.isChatSpace,s=a.isCourseSpace,c="min-h-[64px]";return t?c="min-h-[48px]":i?c="min-h-[56px]":(l||s)&&(c="min-h-[72px]"),(0,n.jsx)("div",{className:y()("text-darkest flex items-center px-6 font-medium",c,{"border-primary border-b py-3":!t},o),children:r})},x.Content=function(e){var t=e.children,r=e.heightGap,i=e.noPadding,s=e.adaptHeightToLgScreen,c=void 0===s||s,u=e.isBelowHeader,f=void 0!==u&&u,p=e.isCourseSpace,m=void 0!==p&&p,b=e.className,v=e.id,g=(0,a.k)().isTrialBannerExists,j=(0,d.U)().isMessagingModalOpen,x=(0,l.j)(),O=(0,o.useMemo)(function(){var e=h.Mz;return r?e=r:f&&(e=h.Mz+h.l3),j?e+=40:(g&&!m&&(e+=48),x&&c&&(e+=48)),e},[r,f,g,j,x,m,c]);return(0,n.jsx)("div",{id:void 0===v?"":v,className:y()("scrollbar-hide overflow-auto",{"px-6 py-4":!(void 0!==i&&i)},void 0===b?"":b),style:{height:"calc(100dvh - ".concat(O,"px)")},children:t})}},901686:function(e,t,r){r.d(t,{O:()=>c});var n=r(683551),o=r(314121),i=r(379600),a=r.n(i),l=r(244289),s=r(848286),c=(0,o.forwardRef)(function(e,t){var r=e.name,o=e.className,i=e.textboxClassName,c=void 0===i?"":i,u=(0,l.Gc)().control;return(0,n.jsx)("div",{className:a()("react-rich-text-input",void 0===o?"":o),children:(0,n.jsx)(l.Qr,{control:u,name:r,render:function(r){var o,i,a=r.field,l=a.onChange,u=a.value;return(0,n.jsx)(s.y,(o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),i=i={className:c,onChange:function(e){return l(e.target.innerHTML)},value:u,ref:t},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))}),o))}})})});c.displayName="RichTextInputControlledInput"},714517:function(e,t,r){r.d(t,{X:()=>b});var n=r(683551),o=r(314121),i=r(379600),a=r.n(i),l=r(214813),s=r(814655),c=r(100334),u=r(63550),d={1:"line-clamp-1",2:"line-clamp-2",3:"line-clamp-3",4:"line-clamp-4",5:"line-clamp-5",6:"line-clamp-6",7:"line-clamp-7",8:"line-clamp-8"},f={1:"overflow-hidden max-h-6 h-6",2:"overflow-hidden max-h-12 h-12",3:"overflow-hidden max-h-18 h-18",4:"overflow-hidden max-h-24 h-24",5:"overflow-hidden max-h-30 h-30",6:"overflow-hidden max-h-36 h-36",7:"overflow-hidden max-h-42 h-42",8:"overflow-hidden max-h-48 h-48"};function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=function(e){var t,r,i=e.children,p=e.disabled,b=void 0!==p&&p,y=e.hideToggle,h=e.lines,v=void 0===h?2:h,g=e.onToggle,j=e.seeMoreClassName,x=(0,o.useRef)(null),O=(0,o.useRef)(null),w=m((0,o.useState)(!1),2),S=w[0],P=w[1],_=m((0,o.useState)(!b),2),k=_[0],D=_[1],E=m((0,o.useState)(!1),2),A=E[0],C=E[1],N=(0,u.G6)()||(0,u.qx)()?f[v]:d[v];(0,o.useEffect)(function(){!b&&k&&g&&g(S)},[b,S,k,g]),(0,o.useEffect)(function(){if(!S&&x.current&&k&&A){var e=x.current,t=setTimeout(function(){(0,s.Z)(e,{scrollMode:"if-needed",block:"center",inline:"center",behavior:"smooth"})},100);return function(){return clearTimeout(t)}}},[x,A,S,k]),(0,o.useLayoutEffect)(function(){var e=(0,l.defer)(function(){if(O.current&&!b){var e=O.current;requestAnimationFrame(function(){D(e.scrollHeight>e.offsetHeight)})}});return function(){return clearTimeout(e)}},[b,O]);var T=!k||b||void 0!==y&&y,I=S||b||!k;return(0,n.jsxs)("div",{className:"flex flex-col","data-testid":"see-more-less",children:[(0,n.jsx)("div",{ref:O,className:a()((t={"line-clamp-none h-auto":I},r=!I,N in t?Object.defineProperty(t,N,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[N]=r,t)),"data-testid":"see-more-less-content",children:i}),(0,n.jsx)("button",{type:"button",ref:x,"data-testid":"show-expand",onClick:function(){b||(C(!0),P(function(e){return!e}))},className:a()("text-light hover:text-dark focus-visible:text-dark inline-flex text-md",{hidden:T},j),children:S?(0,c.t)("show_less"):(0,c.t)("show_more")})]})}},106309:function(e,t,r){r.d(t,{S:()=>u});var n=r(683551),o=r(190920),i=r(527804),a=r(645391),l=r(189713);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={sm:"px-2 py-1.5",md:"px-3 py-2"},u=function(e){var t,r=e.value,u=e.onChange,d=e.options,f=e.size,p=e.className,m=e.checkedClassName,b=void 0===m?"bg-tertiary":m,y=e.optionClassName,h=void 0===y?"":y,v=null!=(t=c[void 0===f?"md":f])?t:c.md;return(0,n.jsx)(o.E,{value:r,onChange:u,children:(0,n.jsx)("div",{className:(0,a.A)("flex items-center gap-6",void 0===p?"":p),children:d.map(function(e){var t=e.label,r=e.value,c=e.tooltipText;return(0,n.jsx)(o.E.Option,{value:r,className:function(e){var t=e.checked;return(0,a.A)("hover:bg-tertiary","focus:bg-tertiary focus:ring-primary focus:ring-2 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2","flex cursor-pointer select-none rounded-lg leading-none transition-colors",v,s({},b,t),h)},children:function(e){var r,u,d=e.checked,f="string"==typeof t?(0,n.jsx)(l.Z.LabelSm,{weight:d?"medium":"normal",children:t}):t;return(0,n.jsx)(o.E.Label,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}({as:"span",className:(0,a.A)("flex whitespace-nowrap",{"text-light":!d,"text-dark":d})},d&&{"aria-checked":d}),u=u={children:c?(0,n.jsx)(i.T,{content:c,arrow:!1,delay:100,duration:100,children:f}):f},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(u)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(u,e))}),r))}},r)})})})}},776640:function(e,t,r){r.d(t,{h:()=>d});var n=r(683551),o=r(314121),i=r(223820),a=r(279113),l=r(645391),s=r(583972),c=r(163614);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=(0,o.forwardRef)(function(e,t){var r,d=e.value,f=e.fullWidth,p=e.showAllItems,m=e.menuItems,b=e.onChange,y=e.disabled,h=e.direction,v=void 0===h?"down":h,g=e.allowEmpty,j=void 0!==g&&g,x=e.placeholder,O=e.dataTestId,w=e.onBlur,S=e.name,P=e.className,_=e.buttonTextClassName,k=e.truncateLabel,D=void 0!==k&&k,E=(r=(0,o.useState)(),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(r,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),A=E[0],C=E[1];return(0,o.useEffect)(function(){var e;m&&(null==m?void 0:m.length)!==0&&(d||j?d&&(e=m.find(function(e){return e.value===d})):e=m[0],C((null==e?void 0:e.label)||x))},[d,m,j,x]),(0,n.jsx)(i.v,{as:"div",className:(0,l.A)("react-dropdown",{"react-dropdown--fullWidth":f,"react-dropdown--showAllItems":p}),"data-testid":O,children:function(e){var r,u,d=e.open;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.v.Button,{ref:t,disabled:y,className:(0,l.A)("form-control react-dropdown__button disabled:react-dropdown__button--disabled",{"react-dropdown__button--disabled":y,"text-default ring-1 ring-current":d},P),"data-testid":"dropdown-button",onBlur:w,name:S,children:[(0,n.jsx)("span",{className:(0,l.A)(D&&"overflow-hidden truncate",_),children:A}),(0,n.jsx)(s.JO,{type:"cheveron-down",className:"react-dropdown__button-icon shrink-0"})]}),(0,n.jsx)(a.u,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({as:o.Fragment,show:d},c.SP),u=u={children:(0,n.jsx)(i.v.Items,{static:!0,className:(0,l.A)("react-dropdown__items","up"===v?"bottom-full !mb-1":"!mt-1"),"data-testid":"dropdown-items",children:null==m?void 0:m.map(function(e){return e.hidden?null:(0,n.jsx)(i.v.Item,{children:function(t){var r=t.active;return(0,n.jsx)("button",{type:"button",onClick:function(){return null==b?void 0:b(e.value)},className:(0,l.A)("react-dropdown__item",{"react-dropdown__item--active":r},e.className),"data-testid":"dropdown-option",children:e.label})}},e.id)})})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(u)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(u,e))}),r))]})}})});d.displayName="SimpleDropdown"},289075:function(e,t,r){r.d(t,{D:()=>l,d:()=>a});var n=r(683551),o=r(314121),i=(0,o.createContext)({item:{},listeners:{}});i.displayName="ListItemData";var a=function(){return(0,o.useContext)(i)},l=function(e){var t=e.item,r=e.listeners,o=e.children;return(0,n.jsx)(i.Provider,{value:{item:t,listeners:r},children:o})}},418347:function(e,t,r){r.d(t,{d:()=>c,y:()=>u});var n=r(683551),o=r(314121),i=r(130209),a=r(214813);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=(0,o.createContext)({activeItem:{},distance:0,items:[],lockedHorizontalAxis:!1,lockedVerticalAxis:!1,onSort:a.noop,setActiveItem:a.noop,useAnimation:!1,useDragHandle:!1});s.displayName="SortableListData";var c=function(){return(0,o.useContext)(s)},u=function(e){var t,r=e.children,c=e.distance,u=e.items,d=e.lockedHorizontalAxis,f=e.lockedVerticalAxis,p=e.onDragEnd,m=e.onDragOver,b=e.onDragStart,y=e.onSort,h=e.useAnimation,v=e.useDragHandle,g=(t=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),j=g[0],x=g[1],O=function(e){var t=e.active,r=e.over;if(t.id!==r.id){var n=u.findIndex(function(e){return e.id===t.id}),o=u.findIndex(function(e){return e.id===r.id});y((0,i.Rp)(u,n,o))}};return(0,n.jsx)(s.Provider,{value:{activeItem:j,distance:void 0===c?0:c,items:u,lockedHorizontalAxis:void 0!==d&&d,lockedVerticalAxis:void 0!==f&&f,onDragEnd:function(e){return x(null),(0,a.isFunction)(p)?p(e):O(e)},onDragOver:m,onDragStart:(0,a.isFunction)(b)?b:function(e){x(u.find(function(t){return t.id===e.active.id}))},onSort:y,setActiveItem:x,useAnimation:void 0===h||h,useDragHandle:void 0!==v&&v},children:r})}},74692:function(e,t,r){r.d(t,{dw:()=>i.d,yx:()=>i.y,dI:()=>l.d,LB:()=>f,Fo:()=>a});var n=r(683551),o=r(130209),i=r(418347),a=function(e){var t,r=e.id,a=e.items,l=e.children,s=(0,i.d)(),c=s.items,u=s.lockedVerticalAxis,d=s.lockedHorizontalAxis;return u?t=o.qw:d&&(t=o.PG),(0,n.jsx)(o.Fo,{id:r,items:null!=a?a:c,strategy:t,children:l})},l=r(289075),s=r(593370),c=r(665658);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=function(e){var t=e.children,r=e.shouldUseKeyboardSensor,a=(0,i.d)(),l=a.lockedVerticalAxis,u=a.lockedHorizontalAxis,f=a.onDragStart,p=a.onDragEnd,m=a.onDragOver,b=a.distance,y=(0,s.VT)(s.we,{activationConstraint:{distance:b}}),h=(0,s.VT)(s.Lg,{coordinateGetter:o.is}),v=[y];r&&v.push(h);var g=s.Dy.apply(void 0,d(v)),j=[c.hg].concat(d(l?[c.DL]:[]),d(u?[c.K7]:[]));return(0,n.jsx)(s.LB,{sensors:g,modifiers:j,collisionDetection:s.pE,onDragStart:f,onDragEnd:p,onDragOver:m,children:t})}},899076:function(e,t,r){r.d(t,{y:()=>u});var n=r(683551),o=r(593370),i=r(665658),a=r(800357),l=r(165034),s=r(418347),c=r(690896),u=function(e){var t,r,u,d=e.children,f=e.portalTo,p=e.shouldRestrictToParent,m=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["children","portalTo","shouldRestrictToParent"]),b=(0,l.useFrame)(),y=null==b||null==(u=b.document)?void 0:u.documentElement,h=(0,s.d)(),v=h.activeItem,g=h.useAnimation,j=(void 0===f?null:f)||y||window.document.body;return(0,n.jsx)(n.Fragment,{children:(0,a.createPortal)((0,n.jsx)(o.y9,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({adjustScale:!0,dropAnimation:{duration:100*!!g}},void 0!==p&&p&&{modifiers:[i.F4]},m),r=r={children:v?(0,n.jsx)(c.g,{item:v,isDragOverlay:!0,children:d}):null},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),j)})}},115338:function(e,t,r){r.d(t,{c:()=>s});var n=r(683551),o=r(130209),i=r(418347),a=r(690896);function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var s=function(e){var t,r,s=e.item,c=e.disabled,u=e.dataTestId,d=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["item","disabled","dataTestId"]),f=s.id,p=(0,i.d)().useAnimation,m=(0,o.nB)((t=l({id:f},!p&&{transition:{duration:0,easing:"linear"}}),r=r={disabled:void 0!==c&&c},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),b=m.attributes,y=m.listeners,h=m.transform,v=m.transition,g=m.isDragging,j=m.setNodeRef;return(0,n.jsx)(a.g,l({ref:j,item:s,attributes:b,listeners:y,transform:h,transition:v,isDragging:g,dataTestId:void 0===u?"":u},d))}},853485:function(e,t,r){r.d(t,{a:()=>l});var n=r(683551),o=r(379600),i=r.n(o),a=r(74692),l=function(e){var t,r,o=e.gap,l=e.className,s=e.children,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["gap","className","children"]);return(0,n.jsx)(a.Fo,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},c),r=r={children:(0,n.jsx)("ul",{className:i()("grid gap-".concat(void 0===o?2:o),void 0===l?"":l),children:s})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},690896:function(e,t,r){r.d(t,{g:()=>d});var n=r(314121),o=r(683551),i=r(465448),a=r(379600),l=r.n(a),s=r(289075),c=r(418347),u=(0,n.forwardRef)(function(e,t){var r,n,a=e.item,u=e.transform,d=e.transition,f=e.listeners,p=e.attributes,m=e.isDragging,b=e.isDragOverlay,y=e.placeholder,h=e.className,v=e.children,g=e.dataTestId,j=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["item","transform","transition","listeners","attributes","isDragging","isDragOverlay","placeholder","className","children","dataTestId"]),x=(0,c.d)().useDragHandle,O={transform:i.ux.Transform.toString(u),transition:d};return(0,o.jsx)("li",(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:t,style:O,className:l()("w-full min-w-0 list-none",{"cursor-auto":x,"cursor-move":!x},h)},p,j,!x&&f),n=n={"data-testid":void 0===g?"":g,children:(0,o.jsx)(s.D,{item:a,listeners:f,children:!(void 0!==m&&m&&!(void 0!==b&&b))&&v?v:y?(0,o.jsx)(y,{}):(0,o.jsx)("div",{className:"h-10"})})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))});u.displayName="ListItem";var d=(0,n.memo)(u);d.displayName="ListItemMemo"},750287:function(e,t,r){r.d(t,{cm:()=>l,dI:()=>o.dI,dw:()=>o.dw,Fo:()=>o.Fo});var n=r(683551),o=r(74692),i=r(899076),a=r(115338),l=Object.assign(function(e){var t,r,i=e.children,a=e.shouldUseKeyboardSensor,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["children","shouldUseKeyboardSensor"]);return(0,n.jsx)(o.yx,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l),r=r={children:(0,n.jsx)(o.LB,{shouldUseKeyboardSensor:void 0===a||a,children:i})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},{List:r(853485).a,Item:a.c,DragOverlay:i.y})},596077:function(e,t,r){r.d(t,{O:()=>s});var n=r(683551),o=r(379600),i=r.n(o),a={success:"text-v2-success",warning:"text-v2-warning-900",danger:"text-v2-danger",default:"text-dark",info:"text-v2-info"},l={success:"bg-v2-success-100",warning:"bg-v2-warning-100",danger:"bg-v2-danger-100",default:"bg-secondary",info:"bg-blue-100"},s=function(e){var t=e.children,r=e.variant,o=void 0===r?"default":r,s=e.textTransform,c=a[o]||a.default,u=l[o]||l.default;return(0,n.jsx)("span",{className:i()("rounded-md px-2 py-1 text-xs font-semibold",c,u,s),"data-testid":"status-badge",children:t})}},643843:function(e,t,r){r.d(t,{E:()=>s});var n=r(683551),o=r(314121),i=r(645391),a=r(135452),l={2:"h-2 w-2 border-2","3.5":"h-3.5 w-3.5 border-3",5:"h-5 w-5 border-4"},s=function(e){var t,r,s,c=e.idleColor,u=e.onlineColor,d=e.size,f=e.status,p=(0,o.useMemo)(function(){var e="idle"===f?c:u;return e&&(0,a.V)(e).isValid()?e:void 0},[c,u,f]),m=(0,o.useMemo)(function(){return p?{backgroundColor:p}:void 0},[p]),b=!!p;return(0,n.jsx)("div",{className:(0,i.A)("border-tertiary rounded-full border-solid content-none",l[void 0===d?"3.5":d],(t={},r="idle"===f?"bg-amber-500":"bg-green-500",s=!b,r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t)),"data-testid":"status-indicator-element",style:m})};s.displayName="StatusIndicator"},952105:function(e,t,r){r.d(t,{r:()=>u});var n=r(683551),o=r(285120),i=r(379600),a=r.n(i),l=r(426371),s=r.n(l),c=r(583972),u=function(e){var t=e.as,r=e.checked,i=void 0!==r&&r,l=e.onChange,u=void 0===l?s():l,d=e.disabled,f=void 0!==d&&d;return(0,n.jsx)(o.r,{as:void 0===t?"button":t,checked:i,onChange:u,disabled:f,className:a()("disabled:bg-disabled relative mb-0 flex h-4 w-6 items-center rounded-full transition-colors disabled:cursor-not-allowed",{"bg-toggle-checked":i,"bg-toggle-unchecked":!i}),children:(0,n.jsx)("span",{className:a()("text-darkest inline-block size-2.5 rounded-full transition-transform",{"bg-toggle-circle-checked translate-x-2.5":i,"bg-toggle-circle-unchecked translate-x-1":!i}),children:(0,n.jsx)(c.JO,{type:"10-circle-check",size:10,style:{width:"auto",display:"block"},className:a()("text-selector-active transition-opacity",{"opacity-30":i&&f,"opacity-100":i&&!f,"opacity-0":!i}),useWithStrokeCurrentColor:!0})})})}},693397:function(e,t,r){r.d(t,{p:()=>a});var n=r(683551),o=r(844651);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=function(e){var t=e.isFullRounded,r=void 0!==t&&t,a=e.size,l=void 0===a?"7":a,s=e.users;if(0===s.length)return null;var c=function(e){if(Array.isArray(e))return e}(s)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(s,3)||function(e,t){if(e){if("string"==typeof e)return i(e,3);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}(s,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=c[0],d=c[1],f=c[2];return(0,n.jsxs)("div",{className:"inline-flex flex-row-reverse border-inherit","data-testid":"three-user-row",children:[f&&(0,n.jsx)("div",{className:"-ml-1 inline-flex border-inherit","data-testid":"user-row",children:(0,n.jsx)(o.s,{hasBorder:!0,isFullRounded:r,name:f.name,size:l,src:f.src})}),d&&(0,n.jsx)("div",{className:"-ml-1 inline-flex border-inherit","data-testid":"user-row",children:(0,n.jsx)(o.s,{hasBorder:!0,isFullRounded:r,name:d.name,size:l,src:d.src})}),u&&(0,n.jsx)("div",{className:"inline-flex border-inherit","data-testid":"user-row",children:(0,n.jsx)(o.s,{hasBorder:!0,isFullRounded:r,name:u.name,size:l,src:u.src})})]})};a.displayName="ThreeUserRow"},225947:function(e,t,r){r.d(t,{V:()=>i});var n=r(683551),o=r(256636),i=function(e){var t=e.content_type;return"application/pdf"==t?(0,n.jsx)(o.Q3,{}):(null==t?void 0:t.startsWith("audio"))?(0,n.jsx)(o.Bb,{}):(null==t?void 0:t.startsWith("video"))?(0,n.jsx)(o.nk,{}):(0,n.jsx)(o.$B,{})}},879686:function(e,t,r){r.d(t,{P:()=>l});var n=r(336940);function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var a=function(e){try{var t=window.location.host,r=new URL(e).host;return t===r}catch(e){return!1}},l=n.ZP.extend({inclusive:!1,addOptions:function(){var e;return i(o({},null==(e=this.parent)?void 0:e.call(this)),{openInternalLinksInCurrentTab:!1})},addAttributes:function(){var e,t=this;return i(o({},null==(e=this.parent)?void 0:e.call(this)),{target:{default:this.options.HTMLAttributes.target,renderHTML:function(e){return{target:t.options.openInternalLinksInCurrentTab&&a(e.href)?null:e.target}}}})},addPasteRules:function(){var e;return((null==(e=this.parent)?void 0:e.call(this))||[]).map(function(e){return i(o({},e),{find:function(t){var r,n="function"==typeof e.find&&null!=(r=e.find(t))?r:[];if(!n.length)return n;var o=t.match(/\{\{\s*(?![%}])([^{}"]|"[^"]*")+\s*\}\}/g);return(null==o?void 0:o.length)?n.filter(function(e){return!o.some(function(t){return t.includes(e.text)})}):n}})})},parseHTML:function(){return[{tag:'a[href]:not([href *= "javascript:" i]):not([class *= "mention__name"])'}]}})},796779:function(e,t,r){r.d(t,{Uc:()=>o,jF:()=>i,lK:()=>a});var n=r(100334),o=function(e,t){var r=0,n=0,o=0,i=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;if(o+=u,e<o){n=e-(o-u);break}r++}}catch(e){a=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}return{groupIndex:r,insideGroupIndex:n}},i=function(e){return({space:(0,n.t)("tiptap.extensions.entities.spaces"),post:(0,n.t)("tiptap.extensions.entities.posts"),event:(0,n.t)("tiptap.extensions.entities.events"),lesson:(0,n.t)("tiptap.extensions.entities.lessons"),course:(0,n.t)("tiptap.extensions.entities.courses")})[e]},a=function(e){var t="space"===e.type||"Space"===e.type;return"comment"===e.type||"Comment"===e.type?e.comment:t?"#"+e.name:e.name}},623951:function(e,t,r){r.d(t,{Y:()=>L,B:()=>M});var n=r(266009),o=r(543418),i=r(882513),a=r(181159),l=r(424676),s=r(886663),c=r(971819),u=r(683551),d=r(100334),f=r(535319),p=r(963934),m=r(527804),b=r(902414),y=r(155921),h=r(796779),v=function(e){var t=e.node,r=(0,p.L)(),n=r.navigateToUrl,i=r.isElectron,a=(0,y.p)(),l=(0,b.S)()||a,s=l.sgidToObjectMap,c=l.localSgidToObjectMap,v=(void 0===c?{}:c)[t.attrs.sgid]||(void 0===s?{}:s)[t.attrs.sgid],g=function(){var e=v.url;i?n(e):window.open(e,"_blank","noreferrer")},j=(0,f.k)(g);if(!v)return(0,u.jsx)(o.T5,{as:"span",children:(0,u.jsx)(m.T,{interactive:!1,content:(0,d.t)("unavailable_entity_message"),placement:"top",children:(0,u.jsx)("span",{className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 px-0.5 font-medium",children:(0,d.t)("unavailable_entity")})})});var x="space"===v.type||"Space"===v.type,O=(0,h.lK)(v);return(0,u.jsx)(o.T5,{as:"span",children:(0,u.jsx)(m.T,{interactive:!1,content:O,placement:"top",disabled:!O,children:(0,u.jsxs)("span",{onClick:g,onKeyDown:j,role:"button",contentEditable:!1,className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 px-0.5 text-left font-medium",tabIndex:0,children:[x&&"#",v.name||(0,d.t)("tiptap.entity_untitled")]})})})},g=r(314121),j=r(214813),x=r(714844),O=r(189713),w=r(547550),S=r(904812),P=r(703339),_=r(435105),k=r(379600),D=r.n(k),E=r(241394),A=r(903431),C=function(e){var t=e.entity,r=e.handleClick,n=e.isSelected,o=t||{},i=o.name,a=o.emoji,l=o.custom_emoji_url,s=o.custom_emoji_dark_url,c=(0,E.TC)().currentAppearance;return(0,u.jsx)(m.T,{interactive:!1,content:i,disabled:(null==i?void 0:i.length)<40,children:(0,u.jsxs)("button",{type:"button",className:D()("hover:bg-tertiary flex w-full cursor-pointer items-center truncate px-6 py-2.5 text-left",{"bg-tertiary":n}),onClick:r,children:["space"===t.type&&(0,u.jsx)(A.S,{className:"!text-dark mr-2 flex !h-5 !w-auto items-center",emoji:a,customEmojiUrl:l,customEmojiDarkUrl:s,appearance:c}),(0,u.jsx)(O.Z.LabelSm,{weight:"medium",children:(0,j.truncate)(i,{length:40})})]})})};function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var T=(0,g.forwardRef)(function(e,t){var r,n=e.query,o=e.command,i=(0,b.S)(),a=(0,y.p)(),l=(i||a).addToLocalSgidToObjectMap,s=(0,P.O)().setPopupsVisible,c=(r=(0,g.useState)(0),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(r,2)||function(e,t){if(e){if("string"==typeof e)return N(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=c[0],f=c[1],p=(0,x.useQuery)(["entities",n],function(){return(0,w.UT)(S.av.searchV2.advanced.index({params:{query:n,per_page:10,page:1,type:"entity_list"}}))},{select:function(e){return(e.records||[]).map(function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={label:e.name},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t})},enabled:!!n,retry:1,keepPreviousData:!0}),m=p.data,v=void 0===m?[]:m,k=p.isLoading,D=(0,j.isArray)(v)&&v.length>0,E=function(e){e&&(l({sgid:e.sgid,object:e}),o(e))};(0,g.useEffect)(function(){n&&!k&&D?s(!0):s(!1)},[D,n,k,s]);var A=Object.values((0,j.groupBy)(v,"type")),T=A.map(function(e){return e.length}),I=(0,j.flatten)(A),M=(0,g.useCallback)(function(e,t){var r=(0,h.Uc)(d,T),n=r.groupIndex,o=r.insideGroupIndex;return n===e&&o===t},[d,T]);return((0,_.h)({selectedIndex:d,setSelectedIndex:f,ref:t,items:I,selectItem:function(e){E(I[e])}}),D)?(0,u.jsx)("div",{className:"bg-primary border-primary relative max-h-[550px] min-w-[250px] max-w-[320px] space-y-6 overflow-auto rounded-md border pt-4 text-sm shadow-md",children:A.map(function(e,t){var r=e[0].type;return(0,u.jsxs)("div",{className:"flex flex-col",children:[(0,u.jsx)("div",{className:"px-6 pb-2",children:(0,u.jsx)(O.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,h.jF)(r)})}),e.map(function(e,r){return(0,u.jsx)(C,{entity:e,handleClick:function(){E(e),(0,j.defer)(function(){return s(!1)})},isSelected:M(t,r)},e.id)})]},r)})}):(0,u.jsx)("div",{className:"h-[50vh] min-w-[250px] max-w-[320px] bg-transparent"})});T.displayName="EntityList";var I=function(e){var t=e.href,r=e.command,n=(0,b.S)(),o=(0,y.p)(),i=(n||o).addToLocalSgidToObjectMap;return(0,x.useQuery)({queryKey:[S.av.richTextFields.unfurlURLs({params:{urls:[t]}})],initialData:[],onSuccess:function(e){var t,n=null!=(t=null==e?void 0:e[0])?t:{type:"",sgid:""};n.type&&"message"!==n.type&&(i({sgid:n.sgid,object:n}),r(n.sgid))}}),null};I.displayName="EntityPaste";var M={name:"entity",group:"inline",inline:!0,selectable:!1,atom:!0,priority:1100,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("data-sgid")},renderHTML:function(e){return e.sgid?{"data-sgid":e.sgid}:{}}}}},addOptions:function(){return{portalTargetId:null,frameDocument:null}},parseHTML:function(){return[{tag:"entity-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["entity-react",(0,n.P1)(t)]},addNodeView:function(){return(0,o.fW)(v)},addProseMirrorPlugins:function(){var e=this,t=this.editor,r=this.name;return[new a.Sy({key:new a.H$("entityLinkPaste"),props:{handlePaste:function(e,n){if(!e.state.selection.empty)return!1;var i=n.clipboardData.getData("text/plain").trim(),a=RegExp("^https?://".concat(window.location.host,"/c/[-\\]_.~!*'();:@&=+$,/?%#[A-z0-9]*$"),"g").exec(i);if(!a)return!1;var l=a[0],s=e.state.selection.ranges[0].$from.pos;t.chain().focus().insertContentAt(s,{type:"text",text:l,marks:[{type:"link",attrs:{href:l,target:"_blank"}}]}).run();var u=new o.M_(I,{props:{href:l,command:function(e){(0,c.R)({editor:t,range:{from:s,to:s+l.length},name:r,attrs:{sgid:e}}),u.destroy()}},editor:t});return!0}}}),(0,i.ZP)({editor:this.editor,char:"#",allowSpaces:!0,pluginKey:new a.H$("entity"),command:function(t){var r=t.editor,n=t.range,o=t.props;return(0,c.R)({editor:r,range:n,name:e.name,attrs:o})},allow:function(t){var r=t.state,n=t.range;return(0,c.k)({state:r,range:n,name:e.name})},render:function(){var r,n,i=(0,s.D)(e.options.portalTargetId,e.options.frameDocument),a=e.options.frameDocument||document;return{onStart:function(e){r=new o.M_(T,{props:e,editor:e.editor}),n=(0,l.ZP)(i,{getReferenceClientRect:function(){var t;return(null==(t=e.clientRect)?void 0:t.call(e))||new DOMRect(0,0,0,0)},content:r.element,appendTo:function(){return i||a.body},showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border"})},onUpdate:function(e){var t;r.updateProps(e),null==(t=n[0])||t.setProps({getReferenceClientRect:e.clientRect})},onKeyDown:function(e){var o;if("Space"===e.event.code){var i=t.getText();if((null==i?void 0:i.at(-1))==" ")return n[0].hide(),!1}else if("Escape"===e.event.code)return n[0].hide(),!1;return null==(o=r.ref)?void 0:o.onKeyDown(e)},onExit:function(){var e;null==(e=n[0])||e.destroy(),null==r||r.destroy()}}}})]}},L=n.NB.create(M)},798999:function(e,t,r){r.d(t,{X:()=>S,A:()=>P});var n=r(683551),o=r(314121),i=r(214813),a=r(438667),l=r(703339),s=r(357382),c=r(902414),u=r(155921),d=r(435105),f=r(379600),p=r.n(f),m=r(712781),b=r(189713),y=r(583972),h=function(e){var t=e.member,r=e.isSelected,o=e.handleClick;return(0,n.jsxs)("button",{type:"button","data-testid":"mention-item",className:p()("hover:bg-tertiary flex w-full cursor-pointer items-center px-3 py-1.5",{"bg-tertiary":r}),onClick:o,children:[(0,n.jsx)("div",{className:"mr-3",children:"group_mention"===t.type?(0,n.jsx)(y.JO,{type:"20-members",size:20,className:"!text-darkest ml-1 mr-2"}):(0,n.jsx)(m.W,{size:"8",name:t.name,src:t.avatar_url})}),(0,n.jsx)(b.Z.LabelSm,{weight:"medium",children:t.name})]})},v=function(e){var t=e.spaceId,r=e.isDirectMessaging,n=e.isThread,o=e.editorType,i=e.isUpdate,a=e.disableGroupMentions;return"block"===o?"post":n||i||a?"thread":t?"space":r?"direct":"group_chat"},g=r(714844),j=r(547550),x=r(904812),O=function(e){var t=e.query,r=e.scope,n=void 0===r?"space":r,o=e.spaceId,a=(0,g.useInfiniteQuery)(["entities",t],function(e){var r,i=e.pageParam;return r=void 0===i?1:i,(0,j.UT)(x.av.searchV2.advanced.index({params:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({query:t,per_page:20,page:r,type:"mentions",mention_scope:n,order:"relevance"},o&&{space_id:o})}))},{select:function(e){var t=e.pages,r=void 0===t?[]:t;return{pages:(0,i.flatten)(r.map(function(e){return e.records})),pageParams:r.map(function(e){return e.page}),pagesList:r}},enabled:!!t,retry:1,getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),l=a.data,s=(void 0===l?{}:l).pages;return{items:void 0===s?[]:s,isLoading:a.isLoading,fetchNextPage:a.fetchNextPage,hasNextPage:a.hasNextPage}};function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S="mentionList",P=(0,o.forwardRef)(function(e,t){var r,f=e.query,p=e.command,m=(0,c.S)(),b=(0,u.p)(),y=m||b,g=y.addToLocalSgidToObjectMap,j=y.spaceId,x=y.chatProps,P=y.type,_=y.isUpdate,k=x||{},D=k.isThread,E=k.isDirectMessaging,A=k.disableGroupMentions,C=(0,l.O)().setPopupsVisible,N=O({query:f,spaceId:j,scope:v({spaceId:j,isDirectMessaging:E,isThread:D,editorType:P,isUpdate:_,disableGroupMentions:A})}),T=N.items,I=N.fetchNextPage,M=N.hasNextPage,L=N.isLoading,R=(0,i.isArray)(T)&&T.length>0,F=(r=(0,o.useState)(0),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(r,2)||function(e,t){if(e){if("string"==typeof e)return w(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),U=F[0],z=F[1],$=function(e){var t=T[e];t&&(g({sgid:t.sgid,object:t}),p(t))};return((0,o.useEffect)(function(){return z(0)},[T]),(0,d.h)({selectedIndex:U,setSelectedIndex:z,ref:t,items:T,selectItem:$}),(0,o.useEffect)(function(){f&&!L&&R?C(!0):C(!1)},[R,f,C,L]),R)?(0,n.jsx)("div",{className:"bg-primary border-primary relative flex max-h-[50vh] min-w-[250px] max-w-[320px] flex-col space-y-0.5 overflow-y-auto rounded-sm border py-1.5 text-sm shadow-md",id:S,children:(0,n.jsx)(a.Z,{scrollThreshold:.8,next:I,hasMore:!!M,dataLength:T.length,loader:(0,n.jsx)(s.a,{center:!0}),scrollableTarget:"mentionList",children:T.map(function(e,t){return(0,n.jsx)(h,{member:e,handleClick:function(){$(t),(0,i.defer)(function(){return C(!1)})},isSelected:t===U},e.id)})})}):(0,n.jsx)("div",{className:"h-[50vh] min-w-[250px] max-w-[320px] bg-transparent"})});P.displayName="MentionList"},405665:function(e,t,r){r.d(t,{R:()=>O,z:()=>w});var n=r(266009),o=r(543418),i=r(882513),a=r(181159),l=r(424676),s=r(886663),c=r(971819),u=r(798999),d=r(683551),f=r(902414),p=r(155921),m=function(e){var t=e.mention;return(0,d.jsx)("span",{contentEditable:!1,className:"text-link cursor-pointer font-medium",children:t.name})},b=r(645391),y=r(991138),h=r(722024),v=r(37881),g=["GroupMention","group_mention"],j=function(e){var t,r,n=e.mention,o=(0,h.N3)(),i=(0,f.S)(),a=(0,p.p)(),l=(i||a||{}).type,s=(0,v.O)({public_uid:n.public_uid}),c="chat"===l,u="CommunityMember"===n.type,m=g.some(function(e){return e===n.type}),j=m||u&&n.id===(null==o?void 0:o.id),x=(0,b.A)("mx-0.5 rounded-sm px-0.5 py-[1px] font-normal",m?"text-[#42464D]":"text-circle cursor-pointer",j?"bg-amber-100":"bg-indigo-100");return(0,d.jsx)(y.C,{communityMemberId:n.id,name:n.name,publicUid:n.public_uid,headline:n.headline,avatarURL:n.avatar_url,side:"top",sideOffset:10,disabled:m,children:(0,d.jsxs)("span",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({contentEditable:!1,className:c?x:"text-link cursor-pointer font-medium"},m?{}:s),r=r={children:[c?"@":"",n.name]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},x=function(e){var t=e.node,r=(0,f.S)(),n=(0,p.p)(),i=r||n||{},a=i.sgidToObjectMap,l=i.localSgidToObjectMap,s=i.disableMentionClicks,c=(void 0===l?{}:l)[t.attrs.sgid]||(void 0===a?{}:a)[t.attrs.sgid];return c?void 0!==s&&s?(0,d.jsx)(o.T5,{as:"span",children:(0,d.jsx)(m,{mention:c})}):(0,d.jsx)(o.T5,{as:"span",children:(0,d.jsx)(j,{mention:c})}):null},O={name:"mention",group:"inline",inline:!0,selectable:!0,atom:!0,addOptions:function(){return{portalTargetId:null,frameDocument:null}},addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("data-sgid")},renderHTML:function(e){return e.sgid?{"data-sgid":e.sgid}:{}}}}},parseHTML:function(){return[{tag:"mention-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["mention-react",(0,n.P1)(t)]},addNodeView:function(){return(0,o.fW)(x)},addProseMirrorPlugins:function(){var e=this,t=(0,s.D)(this.options.portalTargetId,this.options.frameDocument);return[(0,i.ZP)({editor:this.editor,char:"@",allowSpaces:!0,pluginKey:new a.H$("mention"),command:function(t){var r=t.editor,n=t.range,o=t.props;return(0,c.R)({editor:r,range:n,name:e.name,attrs:o})},allow:function(t){var r=t.state,n=t.range;return(0,c.k)({state:r,range:n,name:e.name})},render:function(){var r,n,i=e.options.frameDocument||document;return{onStart:function(e){r=new o.M_(u.A,{props:e,editor:e.editor});var a={top:0,left:0,width:0,height:0,right:0,bottom:0,x:0,y:0,toJSON:function(){return""}};n=(0,l.ZP)(t,{getReferenceClientRect:function(){var t;return(null==(t=e.clientRect)?void 0:t.call(e))||a},appendTo:function(){return t||i.body},content:r.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border",popperOptions:{modifiers:[{name:"offset",options:{offset:[-20,0]}}]}})},onUpdate:function(e){var t;r.updateProps(e),null==(t=n[0])||t.setProps({getReferenceClientRect:e.clientRect})},onKeyDown:function(e){var t;return"Escape"===e.event.key?(n[0].hide(),!0):null==(t=r.ref)?void 0:t.onKeyDown(e)},onExit:function(){var e;null==(e=n[0])||e.destroy(),null==r||r.destroy()}}}})]}},w=n.NB.create(O)},435105:function(e,t,r){r.d(t,{h:()=>a});var n=r(314121),o=r(214813),i=r(703339),a=function(e){var t=e.selectedIndex,r=e.setSelectedIndex,a=e.items,l=e.ref,s=e.selectItem,c=(0,i.O)().setPopupsVisible;(0,n.useImperativeHandle)(l,function(){return{onKeyDown:function(e){switch(e.event.key){case"ArrowUp":return r((Number(t)+Number(a.length)-1)%a.length),!0;case"ArrowDown":return r((Number(t)+1)%a.length),!0;case"Enter":if(!a.length)return!1;return s(t),(0,o.defer)(function(){return c(!1)}),!0;default:return c(!1),!1}}}},[a,t,s,c,r])}},971819:function(e,t,r){r.d(t,{R:()=>n,k:()=>o});var n=function(e){var t,r=e.editor,n=e.range,o=e.name,i=e.attrs,a=r.view.state.selection.$to.nodeAfter;(null==a||null==(t=a.text)?void 0:t.startsWith(" "))&&(n.to+=1),r.chain().focus().insertContentAt(n,[{type:o,attrs:i},{type:"text",text:" "}]).run()},o=function(e){var t=e.state,r=e.range,n=e.name,o=t.doc.resolve(r.from),i=t.schema.nodes[n];return!!o.parent.type.contentMatch.matchType(i)}},884352:function(e,t,r){r.d(t,{a:()=>n});var n=r(938816).Z.extend({parseHTML:function(){return[{tag:"u"}]}})},454383:function(e,t,r){r.d(t,{l:()=>i});var n=r(683551),o=r(583972),i=function(e){var t=e.type,r=e.iconSize,i=e.className;return(0,n.jsx)("span",{className:"flex items-center",children:(0,n.jsx)(o.JO,{type:t,size:void 0===r?20:r,className:i,useWithFillCurrentColor:!0})})}},98299:function(e,t,r){r.d(t,{p:()=>c});var n=r(683551),o=r(338664),i=r.n(o),a=r(645391),l=r(467213),s=r(454383),c=function(e){var t=e.label,r=e.isActive,o=e.onClick,c=e.tooltipPlacement,u=e.iconType,d=e.iconSize,f=e.iconClassName,p=(0,n.jsx)("button",{type:"button",onClick:function(){return i()(o)&&o()},className:(0,a.A)("rounded-full p-1.5","text-default","hover:bg-secondary",{"bg-tertiary text-dark":r}),children:(0,n.jsx)(s.l,{type:u,iconSize:d,className:f})});return t?(0,n.jsx)(l.Y,{content:t,placement:void 0===c?"top":c,theme:"text-modifiers-tooltip",children:p}):(0,n.jsx)(n.Fragment,{children:p})}},160373:function(e,t,r){r.d(t,{E:()=>o});var n=r(266009),o=function(e){var t=e.view,r=e.state,o=e.from,i=e.to,a=r.doc,l=r.selection,s=l.empty,c=l.$from.node(),u=!a.textBetween(o,i).length&&(0,n.xh)(l),d=t.hasFocus(),f=["paragraph","heading"].includes(c.type.name);return d&&!s&&f&&!u}},104921:function(e,t,r){r.d(t,{o:()=>c});var n=r(683551),o=r(314121),i=r(379600),a=r.n(i),l=r(651369),s=r(583972),c=(0,o.forwardRef)(function(e,t){var r,i,c=e.icon,u=e.isLight,d=e.shouldAnimateSpin,f=e.className,p=e.disabled,m=e.size,b=void 0===m?20:m,y=e.isSendButton,h=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["icon","isLight","shouldAnimateSpin","className","disabled","size","isSendButton"]),v=(0,l.TC)().isDarkAppearance,g=(0,o.useMemo)(function(){return"28-message-send"===c?v?"28-message-send-dark":"28-message-send":c},[c,v]);return(0,n.jsx)("button",(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:t,type:"button",className:a()("flex size-7 items-center justify-center rounded-sm",{"hover:bg-tertiary focus-visible:bg-tertiary p-1":!y,"cursor-not-allowed":p},f),disabled:p},h),i=i={children:(0,n.jsx)(s.JO,{type:g,size:b,className:a()(28===b?"h-7 !w-7":"size-5",{"text-default dark:text-dark":u,"text-light dark:text-default":!u,"animate-spin":d,"!text-brand":y&&u,"!text-disabled":y&&!u})})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r))});c.displayName="MenuIconButton"},902414:function(e,t,r){r.d(t,{S:()=>i,i:()=>o});var n=r(314121),o=(0,n.createContext)(null);o.displayName="TipTapEditorContext";var i=function(){return(0,n.useContext)(o)}},189492:function(e,t,r){r.d(t,{$:()=>o});var n=r(683551),o=function(){return(0,n.jsxs)("svg",{className:"size-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},878936:function(e,t,r){r.d(t,{B7:()=>p,$j:()=>u.$,KN:()=>m});var n=r(683551),o=r(314121),i=r(100334),a=r(583972),l=r(645391),s=r(209048),c=r(995822),u=r(189492),d=r(417159);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e){var t,r=e.isRecording,i=(t=(0,o.useState)(0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return f(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],l=i[1];return(0,o.useEffect)(function(){if(r){var e=setInterval(function(){l(function(e){return e+1})},1e3);return function(){return clearInterval(e)}}return function(){}},[r]),(0,n.jsx)("div",{children:(0,d.He)(a)})},m=function(e){var t=e.onClose,r=(0,o.useMemo)(function(){return(0,s.zs)()},[]),d=(0,c.Y)({recordingId:r}),f=d.isRecording,m=d.status,b=d.isBusy,y=d.isError,h=d.onSubmit,v=d.setServerError;(0,c.r)({onClose:t,recordingId:r,setServerError:v});var g=(0,i.t)("tiptap.voice_message.".concat(m));return(0,n.jsx)("div",{className:"bg-primary shadow-voice-message absolute left-0 top-0 z-10 flex size-full items-center justify-center rounded-md",children:(0,n.jsxs)("div",{className:(0,l.A)("flex items-center rounded-full bg-gray-100 p-1 text-gray-700 dark:bg-gray-900 dark:text-gray-300",{"text-red-600 dark:text-red-600":f}),children:[(0,n.jsx)("button",{type:"submit",onClick:t,className:"bg-primary flex items-center justify-center rounded-full p-2",children:(0,n.jsx)(a.JO,{type:"20-close",viewBox:"0 0 20 20",className:"text-icon dark:text-white"})}),(0,n.jsxs)("div",{className:"ml-4 mr-2 flex",children:[(0,n.jsx)("div",{className:"min-w-[160px]",children:g}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"mr-2 min-w-[45px]",children:(0,n.jsx)(p,{isRecording:f})}),(0,n.jsx)(a.JO,{type:"20-microphone",className:(0,l.A)("mt-[2px] text-gray-700 dark:text-gray-300",{"text-red-600 dark:text-red-600":f})})]})]}),(0,n.jsx)("button",{type:"submit",className:"bg-brand flex items-center justify-center rounded-full p-2",onClick:h,disabled:b,children:b?(0,n.jsx)(u.$,{}):(0,n.jsx)(a.JO,{type:y?"20-retry":"20-checkmark",viewBox:"0 0 20 20",className:"text-white"})})]})})}},443949:function(e,t,r){r.d(t,{Fq:()=>n,K2:()=>i,mq:()=>o,x4:()=>a});var n=60,o={WAITING_FOR_MIC_PERMISSION:"waiting_for_mic_permission",RECORDING:"recording",PROCESSING:"processing",UPLOADING:"uploading",UPLOAD_ERROR:"upload_error",SERVER_ERROR:"server_error"},i="VOICE_MESSAGE_PROCESSED",a="VOICE_MESSAGE_ERROR"},209048:function(e,t,r){r.d(t,{PW:()=>a,g5:()=>l,zs:()=>i});var n=r(443949);function o(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var i=function(){var e=new Uint8Array(5);return crypto.getRandomValues(e),Array.from(e,function(e){return e.toString(36)}).join("").slice(0,7)},a=function(e){return{isRecording:e===n.mq.RECORDING,isBusy:e===n.mq.UPLOADING||e===n.mq.PROCESSING,isError:e===n.mq.UPLOAD_ERROR||e===n.mq.SERVER_ERROR}},l=function(e){var t;return(t=function(){return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,navigator.permissions.query({name:"microphone"})];case 1:if("granted"!==t.sent().state)throw Error("Microphone permission not granted");return[3,3];case 2:return t.sent(),e(n.mq.WAITING_FOR_MIC_PERMISSION),[3,3];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function l(e){o(a,n,i,l,s,"next",e)}function s(e){o(a,n,i,l,s,"throw",e)}l(void 0)})})()}},995822:function(e,t,r){r.d(t,{r:()=>S,Y:()=>g});var n=r(314121),o=r(198002),i=r(653355),a=r(443949),l=r(209048),s=r(214813),c=r(904812);function u(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,l,"next",e)}function l(e){u(i,n,o,a,l,"throw",e)}a(void 0)})}}function f(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var p={accept:"application/json","content-type":"application/json"},m=function(e,t,r){return d(function(){var n;return f(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,fetch(c.av.voiceMessages.processFileUrl(),{method:"POST",headers:p,body:JSON.stringify({object_id:e,recording_id:t})})];case 1:return o.sent(),[3,3];case 2:return n=o.sent(),(0,s.isFunction)(r)&&r(),console.error("Error processing audio file:",n),[3,3];case 3:return[2]}})})()};function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){y(i,n,o,a,l,"next",e)}function l(e){y(i,n,o,a,l,"throw",e)}a(void 0)})}}function v(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var g=function(e){var t,r=e.recordingId,s=(t=(0,n.useState)(a.mq.RECORDING),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=s[0],y=s[1],g=(0,n.useRef)(null),j=(0,n.useRef)(null),x=(0,n.useRef)(null),O=(0,n.useRef)([]),w=(0,n.useRef)(null),S=(0,n.useRef)(!1),P=(0,n.useRef)(null),_=(0,l.PW)(u),k=_.isRecording,D=_.isBusy,E=_.isError,A=(0,n.useCallback)(function(){x.current&&j.current&&(x.current.stop(),x.current=null,j.current.getTracks().forEach(function(e){return e.stop()}),j.current=null,O.current=[],w.current&&clearTimeout(w.current))},[]),C=(0,n.useCallback)(function(){return h(function(){var e;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),(0,l.g5)(y),[4,navigator.mediaDevices.getUserMedia({audio:!0})];case 1:return j.current=e=t.sent(),x.current=new MediaRecorder(e),x.current.addEventListener("dataavailable",function(e){O.current.push(e.data)}),x.current.addEventListener("stop",function(){if(S.current){S.current=!1;return}y(a.mq.UPLOADING);var e=new Blob(O.current,{type:"audio/mp4"});g.current=new i.Z,g.current.use(o.Z,{shouldUseMultipart:!1,getUploadParameters:function(e){return h(function(){var t;return v(this,function(r){switch(r.label){case 0:var n;return r.trys.push([0,2,,3]),[4,(n=e.data,d(function(){var e,t;return f(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch(c.av.voiceMessages.signedUploadUrl(),{method:"POST",headers:p,body:JSON.stringify({filename:n.name,contentType:n.type})})];case 1:return[4,r.sent().json()];case 2:return[2,{method:(e=r.sent()).method,url:e.url,fields:e.fields,headers:{"Content-Type":n.type}}];case 3:throw t=r.sent(),L(),console.error("Error uploading audio file:",t),t;case 4:return[2]}})})())];case 1:if(!(t=r.sent()))throw Error("Failed to get upload parameters");return[2,t];case 2:return console.error(r.sent()),[2,{url:"",error:"Failed to get upload parameters"}];case 3:return[2]}})})()}}),g.current.addFile({name:"audio.mp4",data:e}),g.current.upload(),g.current.on("upload-success",function(e,t){var n,o=null==t||null==(n=t.uploadURL)?void 0:n.split(".com/")[1].split("/")[0];o?(P.current=o,m(o,r,M),y(a.mq.PROCESSING)):L()}),g.current.on("upload-error",function(){return L()})}),x.current.start(),y(a.mq.RECORDING),w.current=setTimeout(function(){return A()},60*a.Fq*1e3),[3,3];case 2:return console.error("Error accessing microphone:",t.sent()),[3,3];case 3:return[2]}})})()},[A,r]),N=(0,n.useCallback)(function(){S.current=!0,A()},[A]),T=function(){y(a.mq.UPLOADING),g.current&&g.current.retryAll()},I=function(){y(a.mq.PROCESSING),P.current?m(P.current,r):L()},M=function(){return y(a.mq.SERVER_ERROR)},L=function(){return y(a.mq.UPLOAD_ERROR)};return(0,n.useEffect)(function(){return C(),function(){N()}},[C,N]),{setServerError:M,status:u,isRecording:k,isBusy:D,isError:E,onSubmit:function(){E?u===a.mq.UPLOAD_ERROR?T():I():A()}}},j=r(805855),x=r(722024),O=r(902414);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=e.onClose,r=e.recordingId,n=e.setServerError,o=((0,x.wh)().currentCommunityMember||{}).id,i=(0,O.S)(),l=i.localAttachments,s=i.setLocalAttachments;(0,j.I)(void 0===o?0:o,function(e){if((e.event===a.K2||e.event===a.x4)&&e.json_message.recording_id===r)if(e.event===a.K2)s(((function(e){if(Array.isArray(e))return w(e)})(l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return w(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}(l)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{url:e.json_message.url,signed_id:e.json_message.signed_id,content_type:e.json_message.content_type,metadata:{voice_message:!0}}])),t();else e.event===a.x4&&n()})}},922006:function(e,t,r){r.d(t,{V:()=>o,v:()=>n});var n={content:[{content:[],type:"paragraph"}],type:"doc"},o={chatParticipantsCount:0,disableGroupMentions:!1,isChatAdminOrModerator:!1,isDirectMessaging:!1,isThread:!1,isTyping:!1,unfurlUrls:{}}},662347:function(e,t,r){r.d(t,{T:()=>t1});var n=r(683551),o=r(314121),i=r(543418),a=r(214813),l=r(854520),s=r(682604),c=r(100334),u=r(439292),d=r(301333),f=r(152834),p=r(645391),m=r(85416),b=r(379685),y=r(98299),h=r(160373),v=r(512806),g=r(798158),j=function(e){var t=e.editor,r=e.allowBubbleMenuOverflow,o=(0,g.K)(),a=(0,v.k)("top",void 0===r||r),l=[{name:"bold",iconType:"20-character-bold",label:(0,c.t)("tiptap.bubble_menu.bold"),onClick:function(){return t.chain().focus().toggleBold().run()}},{name:"italic",iconType:"20-character-italic",label:(0,c.t)("tiptap.bubble_menu.italic"),onClick:function(){return t.chain().focus().toggleItalic().run()}},{name:"strike",iconType:"20-character-strike",label:(0,c.t)("tiptap.bubble_menu.strike"),onClick:function(){return t.chain().focus().toggleStrike().run()}},{name:"underline",iconType:"20-character-underline",label:(0,c.t)("tiptap.bubble_menu.underline"),onClick:function(){return t.chain().focus().toggleUnderline().run()}},{name:"blockquote",iconType:"16-blockquote",label:(0,c.t)("tiptap.bubble_menu.blockquote"),onClick:function(){return t.chain().focus().toggleBlockquote().run()},iconSize:16,iconClassName:"!h-5 !w-5"},{name:"link",iconType:"20-character-link",label:(0,c.t)("tiptap.bubble_menu.link"),onClick:function(){return o.show({editor:t})}}];return(0,n.jsx)("div",{children:(0,n.jsx)(i.NM,{editor:t,tippyOptions:a,shouldShow:h.E,children:(0,n.jsx)("div",{className:"bg-primary border-dark divide-primary flex gap-1 divide-x rounded-full border p-0.5 shadow-sm",children:(0,n.jsx)("div",{children:l.map(function(e){return(0,n.jsx)(y.p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({isActive:t.isActive(e.name)},e),e.name)})})})})})},x=r(703339),O=r(583972),w=function(){return(0,n.jsxs)("p",{className:"text-light bg-secondary/90 absolute left-0 top-0 z-20 flex size-full items-center justify-center space-x-2 rounded-md",children:[(0,n.jsx)(O.JO,{size:20,type:"20-attachment"}),(0,n.jsx)("span",{children:(0,c.t)("tiptap.drag_and_drop_file")})]})},S=r(941771),P=r(653769),_=r(898941),k=r(351175),D=r(183794),E=r(464388),A=r(544519),C=r(411102),N=r(219483),T=r(79887),I=r(791192),M=r(994587),L=r(489761),R=r(578686),F=r(495913),U=r(240954),z=r(908250),$=r(457914),B=r(864671),Z=r(650034),H=r(926041),q=r(266009),V=function(e){return e.editor.commands.first(function(e){var t=e.commands;return[function(){return t.splitListItem("listItem")},function(){return t.newlineInCode()},function(){return t.createParagraphNear()},function(){return t.liftEmptyBlock()},function(){return t.splitBlock()}]})},W=q.hj.create({name:"desktopKeymap",addKeyboardShortcuts:function(){var e=this.editor;return{"Shift-Enter":function(){return V({editor:e})},Enter:function(){return!0}}}}),J=q.hj.create({name:"mobileKeymap",addKeyboardShortcuts:function(){var e=this.editor;return{"Shift-Enter":function(){return V({editor:e})},Enter:function(){return V({editor:e})}}}}),G=r(884352),K=r(567386),Q=r(711866),X=r(181159),Y=r(971819),ee=r(722024),et=r(535319),er=r(37745),en=r(527804),eo=r(902414),ei=r(189713),ea=r(547550),el=r(904812);function es(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var ec=function(e,t){var r=!0,n=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var l=i.value;if(Object.prototype.hasOwnProperty.call(l,e)&&!0===l[e])return!0}}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return!1},eu=function(e){var t,r=e.chatRoomUuid,n=e.messageId;return(t=function(){return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(0,ea.UT)(el.av.chatRoomMessages.show({uuid:r,id:n}))];case 1:if(e.sent())return[2,!0];return[2,void 0];case 2:return console.error("No chat message access",e.sent()),[2,!1];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){es(i,n,o,a,l,"next",e)}function l(e){es(i,n,o,a,l,"throw",e)}a(void 0)})})()};function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ef(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function ep(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ed(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ed(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var em=function(e){var t=e.node,r=ep((0,o.useState)(!1),2),a=r[0],l=r[1],s=(0,ee.N3)(),u=ep((0,m.k)(),2),d=u[0],f=u[1],p=(0,eo.S)(),b=p.sgidToObjectMap,y=p.localSgidToObjectMap,h=p.addMessageAttachments,v=p.removeMessageAttachments,g=p.chatRoomAccessArr,j=void 0===g?[]:g,x=p.setShouldShowPrivateMessageConfirmationOnSubmit,O=p.editor,w=(void 0===y?{}:y)[t.attrs.sgid]||(void 0===b?{}:b)[t.attrs.sgid],S=(0,et.k)(function(){k()});if((0,o.useEffect)(function(){return w?(h(w),w.is_private_message&&x(!0)):l(!0),function(){v(w),(null==w?void 0:w.is_private_message)&&x(!1)}},[w]),(0,o.useEffect)(function(){if(a){var e=setTimeout(function(){l(!1)},1e3);return function(){return clearTimeout(e)}}},[a]),a)return(0,n.jsx)(i.T5,{as:"span",children:(0,n.jsx)("span",{className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 font-medium",children:(0,c.t)("tiptap.extensions.entities.loading")})});if(!w)return(0,n.jsx)(i.T5,{as:"span",children:(0,n.jsx)(en.T,{interactive:!1,content:(0,c.t)("unavailable_entity_message"),placement:"top",children:(0,n.jsx)("span",{className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 font-medium",children:(0,c.t)("unavailable_entity")})})});var P=w.data,_=w.sender,k=function(){var e;return(e=function(){var e,t,r,n,o,i,a;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(l){switch(l.label){case 0:if(e=j.length>0,t=!O.isEditable&&!e,r=_.community_member_id===(null==s?void 0:s.id),n=function(){return!!O.isEditable||ec(w.id,j)},o=function(){return eu({chatRoomUuid:P.chat_room_uuid,messageId:w.id})},!r)return[3,1];return i=!0,[3,5];case 1:if(!t)return[3,3];return[4,o()];case 2:return a=l.sent(),[3,4];case 3:a=n(),l.label=4;case 4:i=a,l.label=5;case 5:return i?window.open(P.url,"_blank","noreferrer"):f(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){ef(i,n,o,a,l,"next",e)}function l(e){ef(i,n,o,a,l,"throw",e)}a(void 0)})})()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.T5,{as:"span",children:(0,n.jsx)(en.T,{interactive:!1,content:P.url,placement:"top",children:(0,n.jsx)("span",{role:"button",id:"message-link-".concat(P.id),contentEditable:!1,className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 py-[1px] font-medium",onClick:k,onKeyDown:S,tabIndex:0,children:P.label})})}),(0,n.jsx)(er.c,{isOpen:d,title:(0,c.t)("messaging.actions.unable_to_open_link.title"),onConfirm:f,confirmVariant:"danger",confirmText:(0,c.t)("close"),children:(0,n.jsx)(ei.Z.BodyMd,{children:(0,c.t)("messaging.actions.unable_to_open_link.description")})})]})},eb=r(714844),ey=r(564514),eh=r(534140),ev=function(){var e,t=(0,ey.TH)().pathname.includes("/messages"),r=(0,ee.L2)().data,n=(0,eh.z)({forEdition:!1}).currentLesson,o=void 0===n?{}:n;return{chatRoomUuid:t?null==(e=window.location.pathname)?void 0:e.split("messages/")[1]:(null==r?void 0:r.chat_room_uuid)||(null==o?void 0:o.chat_room_uuid)}},eg=function(e){var t=e.href,r=e.command,n=(0,eo.S)().addToLocalSgidToObjectMap,o=ev().chatRoomUuid;return(0,eb.useQuery)({queryKey:[el.av.richTextFields.unfurlURLs({params:{urls:[t],open_chat_room_uuid:o}})],initialData:[],onSuccess:function(e){var t,o=null!=(t=null==e?void 0:e[0])?t:{type:"",sgid:""};o.type&&(n({sgid:o.sgid,object:o}),r(o.sgid))}}),null};eg.displayName="ChatMessagePaste";var ej=q.NB.create({name:"message",group:"inline",inline:!0,selectable:!1,atom:!0,priority:1200,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("data-sgid")},renderHTML:function(e){return e.sgid?{"data-sgid":e.sgid}:{}}}}},parseHTML:function(){return[{tag:"chat-message-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["chat-message-react",(0,q.P1)(t)]},addNodeView:function(){return(0,i.fW)(em)},addProseMirrorPlugins:function(){var e=this.editor,t=this.name;return[new X.Sy({key:new X.H$("chatMessageLinkPaste"),props:{handlePaste:function(r,n){var o=n.clipboardData.getData("text/plain");if(!o.includes("#message_"))return!1;var a=r.state.selection.ranges[0].$from.pos;e.chain().focus().insertContentAt(a,{type:"text",text:o,marks:[{type:"link",attrs:{href:o,target:"_blank"}}]}).run();var l=new i.M_(eg,{props:{href:o,command:function(r){(0,Y.R)({editor:e,range:{from:a,to:a+o.length},name:t,attrs:{sgid:r}}),l.destroy()}},editor:e});return!0}}})]}}),ex=r(879686),eO=r(795439),ew=function(){var e=(0,eo.S)().editedAt,t=(0,eO.H)(e||new Date),r=t.day,o=t.time;return(0,n.jsx)(i.T5,{as:"span",children:(0,n.jsx)(en.T,{content:"".concat(r," at ").concat(o),disabled:!e,children:(0,n.jsx)("span",{style:{color:"#717680"},className:"ml-0.5 cursor-default",children:(0,c.t)("edited")})})})},eS=q.NB.create({name:"editedlabel",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:function(){return{id:{default:(0,a.random)()}}},parseHTML:function(){return[{tag:"edited-label"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["edited-label",(0,q.P1)(t)]},addNodeView:function(){return(0,i.fW)(ew)},addCommands:function(){return{addEditedLabelNode:function(){return function(e){var t=e.commands;return e.editor.isEmpty?t.insertContent({type:"paragraph",content:[{type:"text",text:""},{type:"editedlabel"}]}):t.insertContent({type:"editedlabel"})}}}}}),eP=q.hj.create({name:"emojiReplacer",addInputRules:function(){return[(0,q.DS)({find:/-___- $/,replace:"\uD83D\uDE11 "}),(0,q.DS)({find:/:'-\) $/,replace:"\uD83D\uDE02 "}),(0,q.DS)({find:/':-\) $/,replace:"\uD83D\uDE05 "}),(0,q.DS)({find:/':-D $/,replace:"\uD83D\uDE05 "}),(0,q.DS)({find:/>:-\) $/,replace:"\uD83D\uDE06 "}),(0,q.DS)({find:/-__- $/,replace:"\uD83D\uDE11 "}),(0,q.DS)({find:/':-\( $/,replace:"\uD83D\uDE13 "}),(0,q.DS)({find:/:'-\( $/,replace:"\uD83D\uDE22 "}),(0,q.DS)({find:/>:-\( $/,replace:"\uD83D\uDE20 "}),(0,q.DS)({find:/O:-\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/0:-3 $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/0:-\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/0;\^\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/O;-\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/0;-\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/O:-3 $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/:'\) $/,replace:"\uD83D\uDE02 "}),(0,q.DS)({find:/:-D $/,replace:"\uD83D\uDE03 "}),(0,q.DS)({find:/':\) $/,replace:"\uD83D\uDE05 "}),(0,q.DS)({find:/'=\) $/,replace:"\uD83D\uDE05 "}),(0,q.DS)({find:/':D $/,replace:"\uD83D\uDE05 "}),(0,q.DS)({find:/'=D $/,replace:"\uD83D\uDE05 "}),(0,q.DS)({find:/>:\) $/,replace:"\uD83D\uDE06 "}),(0,q.DS)({find:/>;\) $/,replace:"\uD83D\uDE06 "}),(0,q.DS)({find:/>=\) $/,replace:"\uD83D\uDE06 "}),(0,q.DS)({find:/;-\) $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/\*-\) $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/;-\] $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/;\^\) $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/B-\) $/,replace:"\uD83D\uDE0E "}),(0,q.DS)({find:/8-\) $/,replace:"\uD83D\uDE0E "}),(0,q.DS)({find:/B-D $/,replace:"\uD83D\uDE0E "}),(0,q.DS)({find:/8-D $/,replace:"\uD83D\uDE0E "}),(0,q.DS)({find:/:-\* $/,replace:"\uD83D\uDE18 "}),(0,q.DS)({find:/:\^\* $/,replace:"\uD83D\uDE18 "}),(0,q.DS)({find:/:-\) $/,replace:"\uD83D\uDE42 "}),(0,q.DS)({find:/-_- $/,replace:"\uD83D\uDE11 "}),(0,q.DS)({find:/:-X $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/:-# $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/:-x $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/>.< $/,replace:"\uD83D\uDE23 "}),(0,q.DS)({find:/:-O $/,replace:"\uD83D\uDE2E "}),(0,q.DS)({find:/:-o $/,replace:"\uD83D\uDE2E "}),(0,q.DS)({find:/O_O $/,replace:"\uD83D\uDE2E "}),(0,q.DS)({find:/>:O $/,replace:"\uD83D\uDE2E "}),(0,q.DS)({find:/:-P $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:-p $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:- $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:- $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:-b $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/>:P $/,replace:"\uD83D\uDE1C "}),(0,q.DS)({find:/X-P $/,replace:"\uD83D\uDE1C "}),(0,q.DS)({find:/x-p $/,replace:"\uD83D\uDE1C "}),(0,q.DS)({find:/':\( $/,replace:"\uD83D\uDE13 "}),(0,q.DS)({find:/'=\( $/,replace:"\uD83D\uDE13 "}),(0,q.DS)({find:/>:\\ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/>:\/ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/:-\/ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/:-. $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/>:\[ $/,replace:"\uD83D\uDE1E "}),(0,q.DS)({find:/:-\( $/,replace:"\uD83D\uDE1E "}),(0,q.DS)({find:/:-\[ $/,replace:"\uD83D\uDE1E "}),(0,q.DS)({find:/:'\( $/,replace:"\uD83D\uDE22 "}),(0,q.DS)({find:/;-\( $/,replace:"\uD83D\uDE22 "}),(0,q.DS)({find:/#-\) $/,replace:"\uD83D\uDE35 "}),(0,q.DS)({find:/%-\) $/,replace:"\uD83D\uDE35 "}),(0,q.DS)({find:/X-\) $/,replace:"\uD83D\uDE35 "}),(0,q.DS)({find:/>:\( $/,replace:"\uD83D\uDE20 "}),(0,q.DS)({find:/0:3 $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/0:\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/O:\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/O=\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/O:3 $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/<\/3 $/,replace:"\uD83D\uDC94 "}),(0,q.DS)({find:/:D $/,replace:"\uD83D\uDE03 "}),(0,q.DS)({find:/=D $/,replace:"\uD83D\uDE03 "}),(0,q.DS)({find:/;\) $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/\*\) $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/;\] $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/;D $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/B\) $/,replace:"\uD83D\uDE0E "}),(0,q.DS)({find:/8\) $/,replace:"\uD83D\uDE0E "}),(0,q.DS)({find:/:\* $/,replace:"\uD83D\uDE18 "}),(0,q.DS)({find:/=\* $/,replace:"\uD83D\uDE18 "}),(0,q.DS)({find:/:\) $/,replace:"\uD83D\uDE42 "}),(0,q.DS)({find:/=\] $/,replace:"\uD83D\uDE42 "}),(0,q.DS)({find:/=\) $/,replace:"\uD83D\uDE42 "}),(0,q.DS)({find:/:\] $/,replace:"\uD83D\uDE42 "}),(0,q.DS)({find:/:X $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/:# $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/=X $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/=x $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/:x $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/=# $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/:O $/,replace:"\uD83D\uDE2E "}),(0,q.DS)({find:/:o $/,replace:"\uD83D\uDE2E "}),(0,q.DS)({find:/:P $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/=P $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:p $/,replace:"\uD83D\uDE1B  "}),(0,q.DS)({find:/=p $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/: $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/: $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:b $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/d: $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:\/ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/:\\ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/=\/ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/=\\ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/:L $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/=L $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/:\( $/,replace:"\uD83D\uDE1E "}),(0,q.DS)({find:/:\[ $/,replace:"\uD83D\uDE1E "}),(0,q.DS)({find:/=\( $/,replace:"\uD83D\uDE1E "}),(0,q.DS)({find:/;\( $/,replace:"\uD83D\uDE22 "}),(0,q.DS)({find:/D: $/,replace:"\uD83D\uDE28 "}),(0,q.DS)({find:/:\$ $/,replace:"\uD83D\uDE33 "}),(0,q.DS)({find:/=\$ $/,replace:"\uD83D\uDE33 "}),(0,q.DS)({find:/#\) $/,replace:"\uD83D\uDE35 "}),(0,q.DS)({find:/%\) $/,replace:"\uD83D\uDE35 "}),(0,q.DS)({find:/X\) $/,replace:"\uD83D\uDE35 "}),(0,q.DS)({find:/:@ $/,replace:"\uD83D\uDE20 "}),(0,q.DS)({find:/<3 $/,replace:" "}),(0,q.DS)({find:/\/shrug $/,replace:"\xaf\\_()_/\xaf"})]}}),e_=r(623951),ek=r(405665);function eD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function eA(e){return function(e){if(Array.isArray(e))return eD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return eD(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eD(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Promise.all([r.e("2834"),r.e("9525")]).then(r.bind(r,161540)).then(function(e){e.default.highlightAll()}).catch(console.error);var eC=function(e){var t=e.placeholder,r=e.maxLength,n=e.menubarProps,o=e.type,i=e.shouldDisableEntities,a=void 0!==i&&i,s=e.shouldDisableMentions,c=e.portalTargetId,u=void 0===c?null:c,d=e.shouldSupportCodeBlocks,f=e.shouldSupportTables,p=e.frameDocument,m=void 0===p?null:p,b="workflow"==o;return eA(void 0!==f&&f?[F.ZP.configure({resizable:!1}),U.Z,z.Z,$.Z]:[]).concat(eA(void 0!==d&&d?[D.Z.configure({lowlight:Z.$,HTMLAttributes:{spellCheck:"false"}})]:[]),[E.Z,M.Z,B.Z,P.ZP,S.ZP,T.ZP,R.ZP,C.ZP.configure({HTMLAttributes:{class:"highlight-class"}}),G.a,eS,N.Z,l.isMobile?J:W,ex.P.configure({openOnClick:!1,autolink:!0,validate:function(e){return!(n.dynamicVariables||Q.q).map(function(e){return e.label.replace(/{{|}}/g,"")}).some(function(t){return t.includes(e)})}}),L.Z.configure({placeholder:t,emptyEditorClass:"is-editor-empty"}),eE({},!b&&!(void 0!==s&&s)&&ek.z.configure({portalTargetId:u,frameDocument:m})),eE({},!a&&e_.Y.configure({portalTargetId:u,frameDocument:m})),eE({},!a&&ej),A.Z.extend({addKeyboardShortcuts:function(){return{}}}),eP,k.Z.configure({limit:void 0===r?null:r}),_.ZP,I.ZP,K.E.configure({type:o}),H.r.configure({portalTargetId:u,frameDocument:m})])},eN=r(208854),eT=r(870879),eI=r(74288),eM=r(886663),eL=r(146224),eR=r(104921),eF=r(878936);function eU(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ez=function(e){var t,r=e.isLight,i=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eU(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eU(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],l=i[1];return(0,eL.X)()?(0,n.jsxs)("div",{children:[(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.voice_message.action"),dataTestId:"add_voice_message",children:(0,n.jsx)(eR.o,{type:"submit",onClick:function(){return l(!0)},"aria-label":(0,c.t)("tiptap.voice_message.action"),icon:"20-mic-2",isLight:r,iconClassName:"relative top-[2px] left-[2px]"})}),a&&(0,n.jsx)(eF.KN,{onClose:function(){return l(!1)}})]}):null},e$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"message-scroll-view",t=document.getElementById(e);t&&(t.scrollTop=t.scrollHeight)},eB=function(e){var t=!1;try{e.state.doc.descendants(function(e){"editedlabel"==e.type.name&&(t=!0)})}catch(e){console.error(e)}return t},eZ=r(568880),eH=r(800357),eq=r(615556),eV=r(438667),eW=r(328213),eJ=r(654423);function eG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eK=function(e){var t=e.gif,r=e.close,o=(0,eo.S)(),i=o.localAttachments,a=void 0===i?[]:i,l=o.setLocalAttachments;return(0,n.jsx)("button",{type:"submit",onClick:function(){var e="video"===t.type;l(((function(e){if(Array.isArray(e))return eG(e)})(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return eG(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eG(e,t)}}(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{url:t.images.original.url,id:t.id,content_type:e?"video/mp4":"image/gif",toUpload:!0,progress:0}])),r()},"aria-label":t.title,children:(0,n.jsx)("img",{loading:"eager",alt:"",width:180,src:t.images.preview_gif.url})})},eQ=function(e){var t=e.query,r=e.setQuery;return(0,n.jsx)("div",{className:"p-2 pb-0",children:(0,n.jsx)("input",{type:"text",placeholder:c.ZP.t("tiptap.search_giphy"),onChange:function(e){return r(e.target.value)},value:t||"",className:"bg-secondary placeholder:text-light w-full rounded-sm border-none text-sm placeholder:opacity-100 focus:border-none focus:shadow-none focus:ring-0"})})};function eX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eY=function(e){var t,r=e.close,i=(t=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eX(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eX(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],s=i[1],u=(0,eb.useInfiniteQuery)(["chat-members-search",l],function(e){var t=e.pageParam,r=void 0===t?1:t;return l?eJ.y(l,{offset:r,limit:10}):eJ.q({offset:r,limit:10})},{getNextPageParam:function(e){return e.pagination.offset+e.pagination.count<e.pagination.total_count?e.pagination.offset+10:null}}),d=u.data,f=u.fetchNextPage,p=u.hasNextPage,m=u.isLoading,b=(0,o.useMemo)(function(){var e;return(0,a.uniqBy)((0,a.flatten)(null==d||null==(e=d.pages)?void 0:e.map(function(e){return e.data})),"id")},[d]);return(0,n.jsxs)("div",{className:"bg-primary border-primary flex w-[360px] flex-col space-y-1 rounded-sm border shadow","data-testid":"giphy-picker",children:[(0,n.jsx)(eQ,{query:l,setQuery:s}),(0,n.jsxs)("div",{className:"h-[360px]",children:[!b.length&&(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:m?(0,n.jsx)(O.JO,{type:"loader"}):(0,n.jsx)("span",{children:(0,c.t)("tiptap.no_results_found")})}),!!b.length&&(0,n.jsx)(eV.Z,{dataLength:b.length,next:f,hasMore:!!p,scrollThreshold:.6,height:360,loader:(0,n.jsx)("div",{className:"col-span-2 flex justify-center py-3",children:(0,n.jsx)(O.JO,{type:"loader"})}),className:"mb-2 p-2",children:(0,n.jsx)(eW.Z,{columnsCount:2,gutter:"8",children:b.map(function(e){return(0,n.jsx)(eK,{gif:e,close:r},e.id)})})})]})]})};function e0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e0(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var e2=function(e){var t=e.isLight,r=e1((0,o.useState)(null),2),i=r[0],a=r[1],l=e1((0,o.useState)(null),2),s=l[0],d=l[1],f=(0,eq.D)(i,s,{placement:"top",modifiers:[{name:"offset",enabled:!0,options:{offset:[80,10]}}]}),p=f.styles,m=f.attributes,b=(0,eo.S)().portalTargetId,y=(0,u.D)().frameDocument,h=(0,eM.D)(b,y);return(0,n.jsx)(eZ.J,{className:"relative",children:function(e){var r,o,i=e.open,l=e.close;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_gif"),dataTestId:"add_gif_message",children:(0,n.jsx)(eZ.J.Button,{as:eR.o,ref:a,isLight:t,icon:"20-gif-2","aria-label":(0,c.t)("tiptap.add_gif")})}),i&&(0,eH.createPortal)((0,n.jsx)(eZ.J.Panel,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({static:!0,className:"z-[1060]",ref:d,style:p.popper},m.popper),o=o={children:(0,n.jsx)(eY,{close:l})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r)),h||(null==y?void 0:y.body)||document.body)]})}})},e3=function(e){var t=e.editor,r=e.handleSubmit,o=e.openFilePicker,i=e.isUploading,a=e.editorHasNoContent,l=e.isFocused,s=e.isSubmitting,d=e.isUpdate,f=e.isLiveStream,m=e.submitButtonLabel,b=e.submittingLabel,y=e.portalTargetId,h=(0,ee.Cc)().record.voice_messages_enabled,v=(0,eN.T)(),g=(0,u.D)(),j=g.frameDocument,x=g.isInFrame,O=y?(0,eM.D)(y,j):(null==j?void 0:j.body)||document.body,w=l||document.getElementById("tiptapMessageTextBox")===document.activeElement||!a();return(0,n.jsxs)("div",{className:(0,p.A)("flex items-end justify-between",m?"mt-3":"mt-4"),children:[(0,n.jsxs)("div",{className:"flex gap-1",children:[v&&(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_image"),dataTestId:"add_image_message",children:(0,n.jsx)(eR.o,{onClick:o,"aria-label":(0,c.t)("tiptap.add_image"),icon:"20-image-2",isLight:w})}),(0,n.jsx)(eI.c,{portalTo:O,placement:"top-start",onEmojiSelect:function(e){return t.chain().focus().insertContent(e.emoji).insertContent(" ").run()},targetWrapperClassName:"!flex",popoverPanelClassName:x?"max-w-full":void 0,target:(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_emoji"),dataTestId:"add_emoji_message",children:(0,n.jsx)(eR.o,{"aria-label":(0,c.t)("tiptap.add_image"),icon:"20-reaction",isLight:w})})}),(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_entity"),dataTestId:"add_entity_list",children:(0,n.jsx)(eR.o,{onClick:function(){t.chain().focus().insertContent(" #").run()},"aria-label":(0,c.t)("add_entity"),icon:"20-hash",isLight:w})}),(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_mention"),dataTestId:"add_mention_message",children:(0,n.jsx)(eR.o,{onClick:function(){t.chain().focus().insertContent(" @").run()},"aria-label":(0,c.t)("add_mention"),icon:"20-mention",isLight:w})}),v&&(0,n.jsx)(e2,{isLight:w}),v&&(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.attach_file"),dataTestId:"add_attachment_message",children:(0,n.jsx)(eR.o,{onClick:o,"aria-label":(0,c.t)("tiptap.attach_file"),icon:"20-attachment",isLight:w})}),h&&!(void 0!==f&&f)&&!d&&(0,n.jsx)(ez,{isLight:w})]}),m?(0,n.jsx)(eT.z,{type:"submit",variant:"circle",onClick:r,disabled:s||a()||i,small:!0,className:"!px-4",children:s&&b||m}):(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("chat_space.send_message"),dataTestId:"submit_button_message",children:(0,n.jsx)(eR.o,{type:"submit",onClick:r,disabled:s||a()||i,id:"tiptap-send","aria-label":(0,c.t)("chat_space.send_message"),icon:i||s?"loader":"28-message-send",size:i||s?20:28,isLight:!a(),shouldAnimateSpin:i||s,isSendButton:!0})})]})},e5=r(863792),e8=r(386899),e6=r(42984),e4=r(867550),e9=r(327205),e7=r(289502),te=r(832818),tt=r(225947),tr=function(e){var t=e.attachment;return(0,n.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,n.jsx)("div",{className:"mb-1 flex items-center",children:(0,n.jsx)(tt.V,{content_type:t.content_type})}),(0,n.jsxs)("div",{className:"flex flex-col truncate",children:[(0,n.jsx)("div",{className:"truncate text-left",children:(0,n.jsx)(ei.Z.LabelSm,{weight:"semibold",children:t.filename})}),(0,n.jsx)("div",{className:"text-left",children:(0,n.jsx)(ei.Z.LabelXs,{weight:"regular",children:(0,te.s)(t.byte_size)})})]})]})},tn=r(617100),to=function(e){var t=e.queuedForCancellation,r=e.removeCurrentAttachment,o=e.progress,i=e.isUploading;return(0,n.jsxs)("button",{type:"button",onClick:function(e){t.current=!0,r(),e.preventDefault()},className:(0,p.A)("group/close-button bg-primary absolute -right-3 -top-3 flex cursor-pointer items-center justify-center rounded-full",{"hidden group-hover:block":!i}),children:[i&&(0,n.jsx)("div",{className:"m-1 flex !h-4 !w-4 items-center justify-center group-hover/close-button:hidden",children:(0,n.jsx)(tn.D,{percentage:o,size:14,strokeWidth:2})}),(0,n.jsx)(en.T,{content:c.ZP.t("tiptap.remove_attachment"),children:(0,n.jsx)("div",{className:(0,p.A)({"hidden group-hover/close-button:block":i}),children:(0,n.jsx)(O.JO,{type:"16-close-rounded",className:"m-1 !h-4 !w-4",size:16})})})]})},ti=function(e){var t=e.url;return(0,n.jsx)("button",{type:"submit",className:"from-primary pointer-events-none absolute right-0 -my-2 hidden h-full items-center rounded-md bg-gradient-to-l px-1 pl-36 group-hover:flex",children:(0,n.jsx)("a",{className:"bg-primary pointer-events-auto p-2",href:t,download:!0,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(O.JO,{type:"download"})})})},ta=function(e){var t,r=e5.$.isImage(e.content_type),n=!!(null==(t=e.metadata)?void 0:t.voice_message),o=!n&&e5.$.isNativelySupportedVideo(e.content_type),i=!n&&(0,e5.c)(e.content_type);return{isImage:r,isVoiceMessage:n,isVideo:o,doesAttachmentSupportGalleryPreview:i,isImageOrVideo:r||o}};function tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ts(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function tc(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){ts(i,n,o,a,l,"next",e)}function l(e){ts(i,n,o,a,l,"throw",e)}a(void 0)})}}function tu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function td(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||tf(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tf(e,t){if(e){if("string"==typeof e)return tl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tl(e,t)}}function tp(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var tm=function(e){var t,r,i,a,l,s=e.attachmentsForGalleryPreview,u=e.attachment,d=e.index,f=e.shouldShowEnlarged,m=(0,eo.S)(),b=m.disableAttachmentClicks,y=void 0!==b&&b,h=m.editor,v=m.setLocalAttachments,g=m.shouldScrollIntoView,j=(0,e4.T)().show,x=(0,e6.Op)().scrollerId,w=td((0,o.useState)(0),2),S=w[0],P=w[1],_=td((0,o.useState)(!1),2),k=_[0],D=_[1],E=td((0,o.useState)(!1),2),A=E[0],C=E[1],N=(0,o.useRef)(!1),T=u.image_variants||{},I=(0,o.useCallback)(function(e){v(function(t){var r=function(e){if(Array.isArray(e))return tl(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||tf(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return r[d]=e,r})},[d,v]),M=function(e){var t=e.url,r=e.filename,n=e.content_type;return tc(function(){var e,o;return tp(this,function(i){switch(i.label){case 0:return[4,fetch(t)];case 1:return e=i.sent(),o=File.bind,[4,e.blob()];case 2:return[2,new(o.apply(File,[void 0,[i.sent()],r,{type:n}]))]}})})()},L=(0,o.useCallback)(function(){return tc(function(){var e,t;return tp(this,function(r){switch(r.label){case 0:if(C(!0),t=u.file)return[3,2];return[4,M({url:u.url,filename:"".concat(u.id,".").concat(u.content_type.split("/")[1]),content_type:u.content_type})];case 1:t=r.sent(),r.label=2;case 2:return e=t,new e8.TX(e,(0,el.hq)(),{directUploadWillStoreFileWithXHR:function(e){return e.upload.addEventListener("progress",function(t){N.current&&(e.abort(),C(!1)),P(t.loaded/t.total*100)})}}).create(function(e,t){if(e)throw Error("Direct upload failed: ".concat(String(e)));var r,n,o=(0,el.Gd)({signed_id:t.signed_id,filename:t.filename});I((r=tu({},t),n=n={url:o,uploaded:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r)),C(!1)}),[2]}})})()},[u,I]);(0,o.useEffect)(function(){u.toUpload&&!A&&L()},[u,A,L]);var R=ta(u),F=R.isImage,U=R.isVoiceMessage,z=R.isVideo,$=R.doesAttachmentSupportGalleryPreview,B=R.isImageOrVideo,Z=u.url;return h.isEditable||(Z=f?null!=(a=T.small)?a:u.url:null!=(l=T.thumbnail)?l:u.url),Z=null!=Z?Z:null==u?void 0:u.url,(0,n.jsxs)("button",{type:"button",onClick:function(){return!y&&!h.isEditable&&$&&j({attachments:s,startIndex:s.findIndex(function(e){return e.url==u.url})})},className:(0,p.A)("group relative flex max-w-[264px]",{"cursor-pointer":!y,"cursor-default":y,"h-[60px] min-w-[150px] px-4 py-2":!B&&!U,"h-[60px] w-[60px]":B&&!f&&!U,"h-[200px] w-auto min-w-[150px]":B&&f&&!U,"border-tertiary bg-tertiary group gap-2 rounded-md border":!U}),children:[h.isEditable&&(0,n.jsx)(to,{isUploading:A,progress:S,queuedForCancellation:N,removeCurrentAttachment:function(){v(function(e){return e.filter(function(e,t){return t!==d})})}}),z&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e7.W,{src:u.url,type:u.content_type,poster:null==u||null==(t=u.image_variants)?void 0:t.thumbnail,className:"h-full rounded-md border object-cover",controls:!1,preload:"none"}),f?(0,n.jsxs)("div",{className:"absolute bottom-2 left-2 flex items-center rounded-sm bg-black/50 py-0.5 pr-2",children:[(0,n.jsx)(O.JO,{type:"12-play",size:12,className:"size-4 text-white"}),(0,n.jsx)(ei.Z.BodyXs,{color:"text-white",weight:"font-medium",children:(0,c.t)("tiptap.video")})]}):(0,n.jsx)("div",{className:"absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center rounded-sm bg-black/50 px-0.5 py-1",children:(0,n.jsx)(O.JO,{type:"12-play",size:12,className:"text-white"})})]}),!$&&!h.isEditable&&!U&&(0,n.jsx)(ti,{url:u.url}),F&&(0,n.jsx)("img",tu({loading:"eager",alt:(0,c.t)("tiptap.attachment_previews.image"),className:(0,p.A)("rounded-md object-cover",k?"border-primary size-full border":"hidden"),src:Z},{onLoad:function(){D(!0),g&&e$(x)},onError:function(){D(!0)}})),U&&(0,n.jsx)(e9.z,{src:u.url,controls:["play","progress","current-time"],isVoiceMessage:U,transcriptionId:null==(r=u.metadata)?void 0:r.transcript_id,transcriptionPreview:null==(i=u.metadata)?void 0:i.transcript_preview}),!$&&!U&&(0,n.jsx)(tr,{attachment:u})]})},tb=function(e){var t=e.attachmentsList,r=(0,eo.S)().editor;if(!t.length)return null;var o=1===t.length,i=t.filter(function(e){return(0,e5.c)(e.content_type)});return(0,n.jsx)("div",{className:(0,p.A)("flex items-center gap-2 pb-2",{"flex-wrap":!r.isEditable}),children:t.map(function(e,t){return(0,n.jsx)(tm,{index:t,attachmentsForGalleryPreview:i,attachment:e,shouldShowEnlarged:!r.isEditable&&o},e.signed_id)})})},ty=function(e){var t=e.onRemove;return(0,n.jsx)("button",{type:"button",className:"text-default bg-primary group absolute -right-3 -top-3 hidden cursor-pointer items-center justify-center rounded-full group-hover:flex",onClick:t,"aria-label":(0,c.t)("tiptap.attachment_previews.remove_link_preview"),children:(0,n.jsx)(en.T,{content:(0,c.t)("tiptap.attachment_previews.remove_link_preview"),children:(0,n.jsx)(O.JO,{type:"16-close-rounded","aria-hidden":!0,size:16,className:"m-1 !h-4 !w-4"})})})};function th(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tv=function(e){var t=e.url,r=e.meta,o=(0,eo.S)(),i=o.editor,a=o.setLinkPreviews,l=o.linkPreviews,s=o.isWorkflowType;if(!(t&&r.title))return null;var u=i.isEditable;return(0,n.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:(0,p.A)("border-primary bg-primary hover:border-dark hover:bg-tertiary group relative flex min-w-[200px] max-w-full shrink-0 flex-col rounded-md border px-4 py-3 sm:w-[304px]",u?"h-[68px] w-[274px] md:w-[328px]":"max-h-[114px] w-[286px] md:w-[363px]"),children:[(0,n.jsxs)("div",{className:"text-default flex items-center pb-1.5",children:[r.favicon?(0,n.jsx)("img",{loading:"eager",alt:"",src:r.favicon,className:"mr-1.5 size-4"}):(0,n.jsx)(O.JO,{type:"12-globe",size:12,className:"mr-1 !w-3"}),(0,n.jsx)("div",{className:"flex-1 truncate text-xs font-semibold",children:r.site_name||function(e){try{return new URL(e).hostname}catch(t){return null==e?void 0:e.replace(/(^\w+:|^)\/\//,"")}}(t)})]}),u?(0,n.jsxs)("div",{className:"mt-0.5 flex w-full flex-row items-center truncate",children:[(0,n.jsx)("div",{className:"text-dark text-sm font-semibold",children:r.title}),r.description&&(0,n.jsxs)("div",{className:"text-light line-clamp-1 truncate text-sm",children:[(0,n.jsx)("span",{className:"px-1",children:(0,c.t)("typing_cursor")}),(0,n.jsx)("span",{children:r.description})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"text-dark mb-0.5 truncate text-sm font-semibold",children:r.title}),r.description&&(0,n.jsx)("div",{className:"text-light line-clamp-2 flex-1 text-sm",children:r.description})]}),!s&&u&&(0,n.jsx)(ty,{onRemove:function(e){e.preventDefault(),e.stopPropagation(),l&&Object.keys(l).includes(t)&&a(function(e){var r,n;return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){th(e,t,r[t])})}return e}({},e),n=null!=(n=th({},t,!1))?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r})}})]})},tg=r(712781),tj=r(860524);function tx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tO(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var tw=function(e){var t,r=e.message,o=(0,ee.N3)(),i=(t=(0,m.k)(),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tx(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tx(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],l=i[1],s=(0,eo.S)()||{},u=s.chatRoomAccessArr,d=void 0===u?[]:u,f=s.editor,b=r.sender,y=r.data,h=y.url,v=y.chat_room_uuid,g=y.message_body,j=y.sent_at,x=y.attachments_count,O=void 0===x?0:x,w=r.sender.community_member_id,S=r.id,P=(0,tj.TF)(j),_=function(){var e;return(e=function(){var e,t,r,n,i,a,s;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(c){switch(c.label){case 0:if(e=d.length>0,t=!f.isEditable&&!e,r=w===(null==o?void 0:o.id),n=function(){return!!f.isEditable||ec(S,d)},i=function(){return eu({chatRoomUuid:v,messageId:S})},!r)return[3,1];return a=!0,[3,5];case 1:if(!t)return[3,3];return[4,i()];case 2:return s=c.sent(),[3,4];case 3:s=n(),c.label=4;case 4:a=s,c.label=5;case 5:return a?window.open(h,"_blank","noreferrer"):l(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){tO(i,n,o,a,l,"next",e)}function l(e){tO(i,n,o,a,l,"throw",e)}a(void 0)})})()},k=(0,et.k)(function(){_()});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{type:"button",onClick:_,onKeyDown:k,className:(0,p.A)("bg-primary border-primary hover:border-dark focus-visible:border-secondary hover:bg-tertiary relative flex max-w-full shrink-0 cursor-pointer flex-row space-x-3 rounded-md border px-4 py-3 text-left sm:w-[304px]",f.isEditable?"w-[274px] md:w-[328px]":"w-[286px] md:w-[363px]"),children:[(0,n.jsx)(tg.W,{src:b.avatar_url,name:b.name,size:"9"}),(0,n.jsxs)("div",{className:"max-w-[calc(100%-48px)]",children:[(0,n.jsxs)("div",{className:"mb-0.5 flex flex-row space-x-2 truncate",children:[(0,n.jsx)(ei.Z.LabelSm,{weight:"semibold",children:b.name}),(0,n.jsx)(ei.Z.BodyXs,{color:"text-light",children:P})]}),g&&(0,n.jsx)("div",{className:"text-default line-clamp-2 flex-1 text-sm font-normal",children:g}),O>0&&(0,n.jsx)(ei.Z.BodySm,{color:"text-light",children:(0,c.t)("bookmarks.attachments_count",{count:O})})]})]}),(0,n.jsx)(er.c,{isOpen:a,title:(0,c.t)("messaging.actions.unable_to_open_link.title"),onConfirm:l,confirmVariant:"danger",confirmText:(0,c.t)("close"),children:(0,n.jsx)(ei.Z.BodyMd,{children:(0,c.t)("messaging.actions.unable_to_open_link.description")})})]})},tS=function(e){var t=e.linkHrefs,r=e.setHasLinks,n=(0,eo.S)(),i=n.linkPreviews,a=n.setLinkPreviews,l=n.editor,s=function(e){return e.title||e.description},c=function(e){a(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},Object.keys(i).filter(function(e){return t.includes(e)}).reduce(function(e,t){return e[t]=i[t],e},{}),e.filter(function(e){return!Object.keys(i).includes(e.url)}).reduce(function(e,t){return e[t.url]=!0,e},{})))},u=(0,eb.useQuery)(["unfurlURLs",t],function(){return(0,ea.UT)(el.av.richTextFields.unfurlURLs({params:{urls:t}}))},{enabled:t.length>0,keepPreviousData:!0,initialData:[],onSuccess:function(e){r(e.filter(function(e){return t.includes(e.url)&&s(e)}).length>0)}}),d=u.data,f=void 0===d?[]:d,p=u.isLoading;(0,o.useEffect)(function(){l.isEditable&&c(f.filter(function(e){return t.includes(e.url)&&s(e)}))},[f,l.isEditable,t.length]);var m=f.filter(function(e){return!Object.keys(i).includes(e.url)||Object.keys(i).some(function(t){return t===e.url&&!0===i[t]})});return{unfurledLinks:f,isLoading:p,filteredUnfurledLinks:m}},tP=r(709385),t_=function(e){var t=e.linkMarks,r=e.messageAttachments,i=e.hasAttachments,l=e.setHasLinks,s=e.isEditMode,c=(0,eo.S)().shouldScrollIntoView,u=(0,a.uniq)(t.map(function(e){var t;return null==e||null==(t=e.attrs)?void 0:t.href})),d=(0,o.useMemo)(function(){return(0,tP.D)()},[]),f=tS({linkHrefs:u.map(function(e){return null==e?void 0:e.replace(/\/$/,"")}),setHasLinks:l}),m=f.filteredUnfurledLinks,b=f.isLoading;return((0,o.useEffect)(function(){c&&m.length>0&&!b&&e$()},[m,b,c]),!(m.length||r.length)||b)?null:(0,n.jsxs)(n.Fragment,{children:[i&&s&&(0,n.jsx)("div",{className:"border-primary mx-0.5 h-16 w-px rounded-md border-l-2"}),(0,n.jsxs)("div",{className:(0,p.A)("flex w-full gap-2 pb-2",{"flex-wrap":!i,"flex-col":!s}),children:[r.map(function(e){return(0,n.jsx)(tw,{message:e},e.id)}),m.map(function(e){var t=e.url,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["url"]);return(0,n.jsx)(tv,{url:t,meta:r},"".concat(t,"-").concat(d))})]})]})};function tk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tE(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var tA=function(e){var t=e.editor,r=e.type;try{var n=t.getJSON().content,o=[];return((null==n?void 0:n.filter(function(e){return"paragraph"==e.type}))||[]).forEach(function(e){var t;null==e||null==(t=e.content)||t.forEach(function(e){"hardBreak"!==e.type&&e.marks&&e.marks.forEach(function(e){var t;e.type==r&&(o=(t=o,function(e){if(Array.isArray(e))return tk(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return tk(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tk(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]))})})}),o}catch(e){return console.error("Error while fetching marks by type ".concat(r),e),[]}},tC=function(e){var t=e.marks,r=!1;return{marks:t.map(function(e){return"link"==e.type&&"_blank"!==e.attrs.target&&"_self"!==e.attrs.target?(r=!0,tE(tD({},e),{attrs:tE(tD({},e.attrs),{target:"_blank"})})):e}),isMarkUpdated:r}},tN=function(e){var t=e.editor;try{var r=!1,n=t.getJSON().content,o=(void 0===n?[]:n).map(function(e){if("paragraph"==e.type){var t,n=null==(t=e.content)?void 0:t.map(function(e){if("text"===e.type&&e.marks){var t=tC({marks:e.marks}),n=t.marks,o=t.isMarkUpdated;return r=r||o,tE(tD({},e),{marks:n})}return e});return tE(tD({},e),{content:n})}return e});r&&t.commands.setContent(o)}catch(e){console.error("Error while updating link marks",e)}};function tT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tI=function(){var e,t=(0,eo.S)(),r=t.editor,i=t.attachments,a=t.localAttachments,l=t.messageAttachments,s=r.isEditable?void 0===a?[]:a:void 0===i?[]:i,c=tA({editor:r,type:"link"}),u=Number(c.length),d=Number(null==s?void 0:s.length),f=Number(null==l?void 0:l.length),m=(e=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return tT(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tT(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],y=m[1],h=d>0;if((0,o.useEffect)(function(){y(u>0)},[u]),!h&&!b&&!(f>0))return null;var v=u+d+f,g=r.isEditable;return(0,n.jsxs)("div",{className:(0,p.A)("flex gap-x-2",g?"items-center pt-4":"flex-col items-start pt-2",{"overflow-x-auto":v>2}),children:[(0,n.jsx)(tb,{attachmentsList:s}),(0,n.jsx)(t_,{linkMarks:c,setHasLinks:y,messageAttachments:l,hasAttachments:h,isEditMode:g})]})},tM=r(922006),tL=r(790173),tR=function(e,t){var r=e.replace(/\r\n?|\n/g,"\n").split("\n"),n=[];r.forEach(function(e,o){if(e.length>0){var i,a={type:"paragraph",content:[{type:"text",text:e}]};(null==(i=r[o+1])?void 0:i.length)==0&&a.content.push({type:"hardBreak"}),n.push(tL.NB.fromJSON(t.doc.type.schema,a))}});var o=tL.HY.from(n);return tL.p2.maxOpen(o)};function tF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tU(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var tz=function(e){var t=e.editor;t.isEmpty||tN({editor:t})},t$=function(e){try{if(!e)return;var t=e.content.map(function(e){if("paragraph"==e.type){var t,r=null==(t=e.content)?void 0:t.filter(function(e){return"text"!==e.type||""!==e.text});return tU(tF({},e),{content:r})}return e});return tU(tF({},e),{content:t})}catch(e){console.error("Error while sanitizing jsonContent",e)}},tB=function(e){if(!e||e.isEmpty)return!0;var t=e.getJSON();if(!t)return!0;var r=(t||{}).content;return!r||!r.some(function(e){if("paragraph"===e.type){var t;return null==(t=e.content)?void 0:t.some(function(e){return"mention"===e.type||"entity"===e.type||"message"===e.type})}})},tZ=r(935023);function tH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tq(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||tW(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tW(e,t){if(e){if("string"==typeof e)return tH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tH(e,t)}}var tJ=function(e){var t=e.initialValue,r=tV((0,m.k)(!1),3),n=r[0],i=r[2],a=tV((0,o.useState)(void 0===t?{}:t),2),l=a[0],s=a[1],c=tV((0,o.useState)([]),2),u=c[0],d=c[1];return{isFocused:n,setIsFocused:i,localSgidToObjectMap:l,setLocalSgidToObjectMap:s,addToLocalSgidToObjectMap:function(e){var t=e.sgid,r=e.object;s(function(e){var n,o;return n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tq(e,t,r[t])})}return e}({},e),o=null!=(o=tq({},t,r))?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}),n})},messageAttachments:u,setMessageAttachments:d,addMessageAttachments:function(e){d(function(t){return t.some(function(t){return t.id===e.id})?t:((function(e){if(Array.isArray(e))return tH(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||tW(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e])})},removeMessageAttachments:function(e){d(function(t){return e?t.filter(function(t){return t.id!==e.id}):t})}}};function tG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tK(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function tQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||t0(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tY(e){return function(e){if(Array.isArray(e))return tG(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t0(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t0(e,t){if(e){if("string"==typeof e)return tG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tG(e,t)}}var t1=function(e){var t,r,y,h,v,g=e.autofocus,O=e.chatProps,S=void 0===O?tM.V:O,P=e.chatRoomAccessArr,_=e.className,k=e.disabled,D=e.editable,E=void 0===D||D,A=e.editedAt,C=e.editorClassName,N=e.editorRef,T=e.isChatSpace,I=e.isLiveStream,M=e.isUpdate,L=void 0!==M&&M,R=e.maxLength,F=e.menuBarComponent,U=e.menubarProps,z=void 0===U?{}:U,$=e.messageBoxClassName,B=e.onBlur,Z=e.onChange,H=e.onDelete,q=e.onFocus,V=e.onSubmit,W=e.placeholder,J=void 0===W?(0,c.t)("message_placeholder"):W,G=e.portalTargetId,K=e.rich_text_body,Q=e.shouldDisableEntities,X=e.shouldDisableMentions,Y=e.shouldRefetch,ee=e.shouldScrollIntoView,et=e.shouldShowPreviewBlocks,er=void 0===et||et,en=e.shouldShowTextModifiersMenu,ei=e.shouldSupportCodeBlocks,ea=e.shouldSupportTables,el=e.showMenuBar,es=e.spaceId,ec=e.submitOnEnter,eu=e.type,ed=void 0===eu?"chat":eu,ef=e.value,ep=e.isMediaUploadAllowed,em=void 0===ep||ep,eb=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["autofocus","chatProps","chatRoomAccessArr","className","disabled","editable","editedAt","editorClassName","editorRef","isChatSpace","isLiveStream","isUpdate","maxLength","menuBarComponent","menubarProps","messageBoxClassName","onBlur","onChange","onDelete","onFocus","onSubmit","placeholder","portalTargetId","rich_text_body","shouldDisableEntities","shouldDisableMentions","shouldRefetch","shouldScrollIntoView","shouldShowPreviewBlocks","shouldShowTextModifiersMenu","shouldSupportCodeBlocks","shouldSupportTables","showMenuBar","spaceId","submitOnEnter","type","value","isMediaUploadAllowed"]),ey=tX((0,m.k)(),2),eh=ey[0],ev=ey[1],eg=tX((0,m.k)(),2),ej=eg[0],ex=eg[1],eO=tX((0,o.useState)(!1),2),ew=eO[0],eS=eO[1],eP="workflow"===ed,e_=(E&&eP?{body:(null==ef?void 0:ef.body)||ef,sgids_to_object_map:(null==ef?void 0:ef.localSgidToObjectMap)||{}}:void 0===K?{}:K)||{},ek=e_.body,eD=e_.attachments,eE=void 0===eD?[]:eD,eA=e_.sgids_to_object_map,eN=void 0===eA?{}:eA,eT=(0,x.O)().arePopupsVisible,eI=(0,u.D)(),eM=eI.frameDocument,eL=eI.isInFrame,eR=tJ({initialValue:L||eP?eN:{}}),eF=eR.isFocused,eU=eR.setIsFocused,ez=eR.localSgidToObjectMap,e$=eR.addToLocalSgidToObjectMap,eZ=eR.setLocalSgidToObjectMap,eH=eR.messageAttachments,eq=eR.addMessageAttachments,eV=eR.removeMessageAttachments,eW=eR.setMessageAttachments,eJ=(0,o.useRef)(ez);eJ.current=ez;var eG=tX((0,o.useState)(!1),2),eK=eG[0],eQ=eG[1],eX=tX((0,o.useState)(E?eE:[]),2),eY=eX[0],e0=eX[1],e1=tX((0,o.useState)(S.unfurlUrls||{}),2),e2=e1[0],e5=e1[1],e8=!!A,e6=(0,a.debounce)(function(e){(0,a.isFunction)(Z)&&Z({body:e.getJSON(),localSgidToObjectMap:eJ.current})},500),e4=(0,o.useMemo)(function(){return eP?t$((null==ef?void 0:ef.body)||ef||ek):t$(ef||ek)},[eP,ef,ek]),e9=(0,i.jE)({editable:E,content:e4,onUpdate:function(e){var t=e.editor;tz({editor:t}),e6(t)},onFocus:function(){eU(!0),(0,a.isFunction)(q)&&q()},onBlur:function(){eU(!1),(0,a.isFunction)(B)&&B()},autofocus:void 0!==g&&g,extensions:eC({placeholder:J,maxLength:R,menubarProps:z,type:ed,shouldDisableEntities:void 0!==Q&&Q,shouldDisableMentions:void 0!==X&&X,shouldSupportCodeBlocks:void 0!==ei&&ei,shouldSupportTables:void 0!==ea&&ea,portalTargetId:G,frameDocument:eM}),editorProps:{transformPastedHTML:function(e){var t=e.replace(/<edited-label[^>]*>.*?<\/edited-label>/gi,""),r=(0,tZ.n)(t);return r.length&&(0,tZ.S)({sgids:r,setLocalSgidToObjectMap:eZ}),t},clipboardTextParser:tR,attributes:{class:(0,p.A)(C,"tiptap-editor")}}});(0,o.useEffect)(function(){(null==e9?void 0:e9.isEditable)?L&&S.unfurlUrls?e5(S.unfurlUrls):e5({}):e5(S.unfurlUrls||{})},[null==e9?void 0:e9.isEditable,L,S.unfurlUrls]);var e7=eY.some(function(e){return e.progress>=0}),te=function(){var e,t;return(null==e9||null==(t=e9.state)||null==(e=t.doc)?void 0:e.textContent.trim().length)===0},tt=function(){return tB(e9)&&((null==e9?void 0:e9.isEmpty)||te())},tr=function(){null==e9||e9.commands.clearContent(),e0([]),eZ({}),eW([]),e5({})},tn=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(e=function(){var e,r,n;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(o){switch(o.label){case 0:if((e=tt()&&!eY.length)&&!L||e7)return[2];if(e&&L)return[2,null==H?void 0:H()];if(r=Object.values(ez).some(function(e){return"group_mention"==e.type}),!t&&r)return ev(),[2];if(ew)return ex(),[2];if(!(0,a.isFunction)(V))return[3,5];n=V({body:tt()?tM.v:null==e9?void 0:e9.getJSON(),attachments:eY.map(function(e){return e.signed_id}),localAttachments:eY,localSgidToObjectMap:ez,unfurlUrls:e2}),o.label=1;case 1:return o.trys.push([1,3,4,5]),eQ(!0),[4,n];case 2:return o.sent(),[3,5];case 3:return console.error(o.sent()),[3,5];case 4:return eQ(!1),tr(),[7];case 5:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){tK(i,n,o,a,l,"next",e)}function l(e){tK(i,n,o,a,l,"throw",e)}a(void 0)})})()};(0,b.M)("enter",function(){tn()},{enabled:eF&&(void 0===ec||ec)&&!eT&&!l.isMobile&&!function(e){if(!e)return!1;var t=e.getText();return/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/.test(t)}(e9),enableOnContentEditable:!0},[e9,eY,eT,eF,ew,e2]);var to=function(e){return e0(function(t){return tY(t).concat(tY(e.map(function(e){return{file:e,url:URL.createObjectURL(e),filename:e.name,byte_size:e.size,content_type:e.type,toUpload:!0,progress:0}})))})},ti=(0,s.uI)({onDrop:em?to:a.noop,noClick:!0,disabled:!em}),ta=ti.getRootProps,tl=ti.getInputProps,ts=ti.isDragActive,tc=ti.open,tu=tl();if((0,o.useEffect)(function(){Y&&!E&&e9&&e9.commands.setContent(e4),!E&&e8&&e9&&"addEditedLabelNode"in e9.commands&&"function"==typeof e9.commands.addEditedLabelNode&&requestAnimationFrame(function(){eB(e9)||e9.chain().focus("end").addEditedLabelNode().run()})},[e4,e9,Y,e8,E]),!e9)return null;N&&(N.current=e9);var td=(null==e9||null==(h=e9.storage)||null==(y=h.characterCount)?void 0:y.characters())||0,tf="".concat(String(td),"/").concat(String(R)),tp=S.isTyping;return(0,n.jsxs)(eo.i.Provider,{value:{addMessageAttachments:eq,addToLocalSgidToObjectMap:e$,attachments:eE,chatProps:S,chatRoomAccessArr:void 0===P?[]:P,disableAttachmentClicks:eL,disableMentionClicks:eL,editedAt:A,editor:e9,isUpdate:L,localAttachments:eY,localSgidToObjectMap:ez,messageAttachments:eH,portalTargetId:G,removeMessageAttachments:eV,setLocalAttachments:e0,setShouldShowPrivateMessageConfirmationOnSubmit:eS,sgidToObjectMap:eN,shouldRefetch:Y,shouldScrollIntoView:ee,spaceId:es,type:ed,linkPreviews:e2,setLinkPreviews:e5,isWorkflowType:eP},children:[e9.isEditable?(0,n.jsxs)("div",(t=tQ({className:(0,p.A)("text-dark relative flex flex-col px-4 py-3 text-sm transition-colors",void 0!==T&&T?"md:mb-6":"mb-6","bg-secondary-dark focus-within:bg-primary hover:bg-primary active:bg-primary hover:border-dark border-hover rounded-lg border active:border-very-dark focus-within:border-very-dark hover:focus-within:border-very-dark",{"border-none":ts,"border-light":!tt(),"pointer-events-none opacity-70":void 0!==k&&k||eK,"!mb-0":tp,"!bg-primary":L},_)},eb,ta()),r=r={onPaste:function(e){var t,r;em&&(null==(r=e.clipboardData)||null==(t=r.files)?void 0:t.length)>0&&(e.preventDefault(),to(Array.from(e.clipboardData.files)))},"data-testid":"tiptap-editor",children:[ts&&(0,n.jsx)(w,{}),(0,n.jsx)("input",tQ({},tu)),(0,n.jsxs)("div",{className:(0,p.A)("chat-message-word-wrap max-h-[300px] cursor-text overflow-auto",$),children:[(0,n.jsx)(i.kg,{editor:e9}),R&&(0,n.jsx)("div",{className:"text-light",children:tf})]}),e9&&(void 0===en||en)&&(0,n.jsx)(j,{editor:e9,allowBubbleMenuOverflow:"chat"!==ed}),er&&(0,n.jsx)(tI,{}),(void 0===el||el)&&(0,n.jsx)(void 0===F?e3:F,tQ({isSubmitting:eK,isUploading:e7,openFilePicker:tc,editor:e9,handleSubmit:tn,editorHasNoContent:function(){return!L&&tt()&&!eY.length},isFocused:eF,isUpdate:L,isLiveStream:void 0!==I&&I,portalTargetId:G},z))]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)):(0,n.jsxs)(n.Fragment,{children:[!tt()&&(0,n.jsx)(i.kg,{editor:e9}),er&&!L&&(0,n.jsx)(tI,{})]}),(0,n.jsx)(d.s,{shouldShowConfirmationModal:eh,toggleConfirmationModal:ev,handleSubmit:tn,chatParticipantsCount:null!=(v=S.chatParticipantsCount)?v:0}),ej&&(0,n.jsx)(f.u,{shouldShowPrivateMessageConfirmationModal:ej,togglePrivateMessageConfirmationModal:ex,handleSubmit:tn,setShouldShowPrivateMessageConfirmationOnSubmit:eS,shouldShowPrivateMessageConfirmationOnSubmit:ew})]})}},703339:function(e,t,r){r.d(t,{O:()=>n});var n=(0,r(920255).Ue)(function(e){return{arePopupsVisible:!1,setPopupsVisible:function(t){return e({arePopupsVisible:t})}}})},169033:function(e,t,r){r.d(t,{$U:()=>o,F_:()=>s,H9:()=>i,Ln:()=>n,Om:()=>a,Z9:()=>l});var n=function(e){return{body:{type:"doc",content:e.bodyContent},inline_attachments:e.inlineAttachments}},o=function(e){return{type:"text",text:e.text}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.content;return{type:"paragraph",content:void 0===t?[]:t}},a=function(e){return{type:"file",attrs:{signed_id:e.file.signed_id}}},l=function(e){return i({content:[o({text:e.text})]})},s=function(e){return{type:"mention",attrs:{sgid:e.sgid}}}},863792:function(e,t,r){r.d(t,{$:()=>i,c:()=>a});var n=function(e){return["image/gif","image/jpeg","image/png"].includes(e)},o=function(e){return["video/mp4","video/mpeg","video/ogg"].includes(e)},i={isImage:n,isVideo:function(e){return e.startsWith("video/")},isNativelySupportedVideo:o,isAudio:function(e){return["audio/mpeg","audio/ogg","audio/mp4","audio/wav","audio/x-wav"].includes(e)},isPDF:function(e){return e.startsWith("application/pdf")}},a=function(e){return n(e)||o(e)}},886663:function(e,t,r){r.d(t,{D:()=>n});var n=function(e,t){var r=t||document;return(e?r.getElementById(e):null)||r.body}},935023:function(e,t,r){r.d(t,{S:()=>l,n:()=>a});var n=r(547550),o=r(904812);function i(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var a=function(e){return Array.from(new DOMParser().parseFromString(e,"text/html").querySelectorAll("[data-sgid]")).map(function(e){return String(e.getAttribute("data-sgid"))})},l=function(e){var t,r=e.sgids,a=e.setLocalSgidToObjectMap;return(t=function(){var e;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,n.UT)(o.av.richTextFields.fetchSgidRecords({params:{sgids:r}}))];case 1:return e=t.sent(),a(function(t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t,e)}),[3,3];case 2:return console.error(t.sent()),[3,3];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function l(e){i(a,n,o,l,s,"next",e)}function s(e){i(a,n,o,l,s,"throw",e)}l(void 0)})})()}},512806:function(e,t,r){r.d(t,{k:()=>n});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top",t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return{duration:[200,150],arrow:!1,placement:e,theme:"text-modifiers",animation:"shift-away-subtle",maxWidth:"none",popperOptions:{strategy:"fixed",modifiers:[{name:"preventOverflow",options:{boundary:t?"clippingParents":"scrollParent",rootBoundary:"viewport",altAxis:!0,altBoundary:!0,tether:!1,padding:8}}]},interactive:!0,interactiveBorder:20,interactiveDebounce:75,trigger:"manual",hideOnClick:!1,delay:[100,0]}}},476728:function(e,t,r){r.d(t,{u:()=>c});var n=r(683551),o=r(100334),i=r(870879),a=r(435534),l=r(263285),s=r(36697);function c(e){var t=e.inputRef,r=e.submitButtonVariant,c=e.children;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.u_.Body,{children:(0,n.jsx)(a.l.Item,{hideDescription:!0,hideBorder:!0,fullWidth:!0,name:"url",label:(0,o.t)("tiptap.extensions.link.link"),children:(0,n.jsx)(s.R,{name:"url",ref:t})})}),(0,n.jsxs)(l.u_.Footer,{className:"px-5 md:px-8",children:[(0,n.jsx)(i.z,{full:!0,type:"submit",variant:void 0===r?"primary":r,children:(0,o.t)("tiptap.extensions.link.save")}),c]})]})}},324228:function(e,t,r){r.d(t,{b:()=>a});var n=r(683551),o=r(100334),i=r(263285);function a(e){var t=e.isEditable,r=e.onClose;return(0,n.jsxs)(i.u_.Header,{children:[(0,n.jsx)(i.u_.Title,{className:"text-center",size:"md",children:t?(0,o.t)("tiptap.extensions.link.edit"):(0,o.t)("tiptap.extensions.link.add")}),(0,n.jsx)(i.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(i.u_.CloseButton,{onClick:r})})]})}},988817:function(e,t,r){r.d(t,{R:()=>a});var n=r(683551),o=r(100334),i=r(870879);function a(e){var t=e.isEditable,r=e.onClick;return void 0!==t&&t?(0,n.jsx)("div",{className:"mt-4 flex justify-end",children:(0,n.jsx)(i.z,{full:!0,variant:"secondary",type:"button",onClick:r,children:(0,o.t)("tiptap.extensions.link.remove")})}):null}},798158:function(e,t,r){r.d(t,{K:()=>b});var n=r(683551),o=r(314121),i=r(757977),a=r(435534),l=r(263285),s=r(476728),c=r(324228),u=r(988817),d=r(183005);function f(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var p=function(e){var t,r=e.editor,p=e.isAdminUsageContext,m=e.isEmailEditor,b=void 0!==m&&m,y=(0,i.dd)(),h=r.isActive("link"),v=(0,o.useRef)(null),g=null==(t=r.getAttributes("link"))?void 0:t.href;return(0,n.jsxs)(l.u_,{isOpen:y.visible,onClose:y.hide,initialFocus:v,children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(c.b,{isEditable:h,onClose:function(){y.hide()}}),(0,n.jsx)(a.l,{onSubmit:function(e,t){var n,o=e.url,i=t.setError;return(n=function(){var e,t,n,a,l,s,c;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,d.T.validate({url:o})];case 1:return u.sent(),e=r.isActive("link"),l=(n=(t=r.state.selection).from)!==(a=t.to),s=r.state.doc.textBetween(n,a),c=l&&""===s.trim(),e||l&&!c||!b?r.chain().focus().extendMarkRange("link").setLink({href:o}).run():r.chain().focus().insertContent([{type:"text",text:o,marks:[{type:"link",attrs:{href:o,target:"_blank"}}]}]).run(),y.hide(),[3,3];case 2:return i("url",{type:"manual",message:u.sent().message||"Invalid URL"}),[3,3];case 3:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){f(i,r,o,a,l,"next",e)}function l(e){f(i,r,o,a,l,"throw",e)}a(void 0)})})()},defaultValues:{url:g},autoComplete:"off",children:(0,n.jsx)(s.u,{inputRef:v,submitButtonVariant:void 0!==p&&p?"circle":"primary",children:(0,n.jsx)(u.R,{isEditable:h,onClick:function(){r.chain().focus().extendMarkRange("link").unsetLink().run(),y.hide()}})})})]})]})},m=i.gk.create(function(e){var t=e.editor,r=e.isAdminUsageContext,o=e.isEmailEditor;return(0,n.jsx)(p,{editor:t,isAdminUsageContext:r,isEmailEditor:o})}),b=function(){return(0,i.dd)(m)}},183005:function(e,t,r){r.d(t,{T:()=>i});var n=r(194400),o=r(100334),i=n.Ry().shape({url:n.Vo(function(e){return e.startsWith("mailto:")?n.Z_().trim().matches(/([mailto:\w.\-pL]+@\w+.[\w.\-pL]+)/,(0,o.t)("link_url_invalid")).required((0,o.t)("link_url_required")):n.Z_().url((0,o.t)("link_url_invalid")).required((0,o.t)("link_url_required"))})})},257009:function(e,t,r){r.d(t,{t:()=>a});var n=r(314121),o=r(214813);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=function(e){var t,r=e.optionsCount,a=void 0===r?0:r,l=e.onEnter,s=(t=(0,n.useState)(0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],u=s[1];return(0,n.useEffect)(function(){var e=function(e){if(["ArrowDown","ArrowUp","Enter"].includes(e.key)&&("Enter"!==e.key||!e.shiftKey))switch(e.preventDefault(),e.key){case"ArrowDown":u((c+1)%a);break;case"ArrowUp":u((c-1+a)%a);break;case"Enter":(0,o.isFunction)(l)&&l(c)}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[c,l,a]),{activeIndex:c,setActiveIndex:u}}},155921:function(e,t,r){r.d(t,{k:()=>o,p:()=>i});var n=r(314121),o=(0,n.createContext)(null);o.displayName="BlockEditorContext";var i=function(){return(0,n.useContext)(o)}},360174:function(e,t,r){r.d(t,{Y:()=>w});var n=r(683551),o=r(314121),i=r(100334),a=r(757977),l=r(241394),s=r(189713),c=r(263285),u=r(214813),d=r(194400),f=r(870879),p=r(435534),m=r(552156),b=r(299937),y=r(324129),h=r(36697),v=r(98167),g="settings.emails.builder";function j(e){var t=e.inputRef,r=e.editor,o=e.range,a=e.onClose,l=e.defaultValues,s=e.isWithinEmailEditor,c=!!l.label;return(0,n.jsxs)(p.l,{defaultValues:l,onSubmit:function(e){r.chain().focus().insertContentAt(o,[{type:"cta",attrs:s?e:(0,u.omit)(e,"text_color")},!c&&{type:"hardBreak"}].filter(Boolean)).run(),a()},validationSchema:d.Ry().shape(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:d.Z_().required((0,i.t)([g,"errors.label_is_required"])),url:d.Z_().transform(function(e,t){return(0,v.t)(t,{allowMailTo:!s})}).test("is-url-or-mailto",(0,i.t)([g,"errors.url_is_invalid"]),function(e){return!e||(!s&&e.toLowerCase().startsWith("mailto:")?d.Z_().email().isValidSync(e.replace(/^mailto:/i,"")):d.Z_().url().isValidSync(e))}).required((0,i.t)([g,"errors.url_is_required"])),color:d.Z_().matches(/^#[0-9A-Fa-f]{6}$/,(0,i.t)([g,"errors.color_is_required"])).required((0,i.t)([g,"errors.color_is_required"]))},s&&{text_color:d.Z_().matches(/^#[0-9A-Fa-f]{6}$/,(0,i.t)([g,"errors.color_is_required"])).required((0,i.t)([g,"errors.color_is_required"]))})),shouldStopPropagation:!0,noValidate:!0,children:[(0,n.jsxs)("div",{className:"flex flex-col pb-4",children:[(0,n.jsx)(y.c,{name:"label",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,i.t)("email_editor.cta.label"),required:!0,children:(0,n.jsx)(b.y,{ref:t,name:"label",label:(0,i.t)("email_editor.cta.label"),placeholder:(0,i.t)("email_editor.cta.label"),autocomplete:"off"})}),(0,n.jsx)(y.c,{name:"url",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,i.t)("email_editor.cta.url"),required:!0,children:(0,n.jsx)(h.R,{allowMailTo:!s,label:(0,i.t)("email_editor.cta.url"),name:"url",autocomplete:"off"})}),(0,n.jsx)(y.c,{name:"color",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,i.t)("email_editor.cta.color"),required:!0,children:(0,n.jsx)(m.s,{name:"color"})}),s&&(0,n.jsx)(y.c,{name:"text_color",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,i.t)("email_editor.cta.text_color"),required:!0,children:(0,n.jsx)(m.s,{name:"text_color"})})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-x-3 pb-5 pt-2.5",children:[(0,n.jsx)(f.z,{type:"button",onClick:a,variant:"secondary-light",children:(0,i.t)("cancel")}),(0,n.jsx)(f.z,{type:"submit",variant:"circle",children:(0,i.t)("email_editor.cta.save")})]})]})}var x=function(e){var t,r,u,d,f,p,m,b=e.editor,y=e.range,h=e.isWithinEmailEditor,v=(0,a.dd)(),g=(0,l.TC)(),x=(0,o.useRef)(null);if(!b)return null;var O=null!=(p=g.brandColor.light)?p:"#000000",w=null!=(m=g.brandTextColor.light)?m:"#FFFFFF",S=(r=(t=b.isActive("cta")?b.getAttributes("cta"):{}).label,u=t.url,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:void 0===r?"":r,url:void 0===u?"":u,color:void 0===(d=t.color)?O:d,text_color:void 0===(f=t.text_color)?w:f},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,["label","url","color","text_color"]))),P=!!S.label;return(0,n.jsxs)(c.u_,{isOpen:v.visible,onClose:v.remove,initialFocus:x,children:[(0,n.jsx)(c.u_.Overlay,{}),(0,n.jsxs)(c.u_.Content,{children:[(0,n.jsxs)(c.u_.Header,{children:[(0,n.jsx)(c.u_.Title,{size:"sm",children:(0,n.jsx)(s.Z.LabelLg,{weight:"semibold",children:P?(0,i.t)("email_editor.cta.edit_title"):(0,i.t)("email_editor.cta.title")})}),(0,n.jsx)(c.u_.HeaderActions,{children:(0,n.jsx)(c.u_.CloseButton,{onClick:v.remove})})]}),(0,n.jsx)(c.u_.Body,{children:(0,n.jsx)(j,{inputRef:x,range:y,editor:b,onClose:v.remove,defaultValues:S,isWithinEmailEditor:void 0!==h&&h})})]})]})},O=a.gk.create(function(e){var t=e.editor,r=e.range,o=e.isWithinEmailEditor;return(0,n.jsx)(x,{editor:t,range:r,isWithinEmailEditor:o})}),w=function(){return(0,a.dd)(O)}},567386:function(e,t,r){r.d(t,{E:()=>d});var n=r(266009),o=r(548934),i=r(542038),a=function(){return function(e){var t=e.tr,r=e.state,n=e.dispatch;try{var o=(0,i.GJ)(r.doc,r.selection.$from.pos,-1);if(null==o)return!1;return t.join(o,2),n&&n(t),!0}catch(e){return!1}}},l=function(e,t){for(var r=t.selection.$from,o=(0,n.jo)(e,t.schema),i=null,a=r.depth,l=r.pos,s=null;a>0&&null===s;)r.node(a).type===o?s=a:(a-=1,l-=1);return null===s?null:{$pos:t.doc.resolve(l),depth:s}},s=function(e,t){var r,n=t.selection.$anchor,o=t.doc.resolve(n.pos-2);return 0!==o.index()&&(null==(r=o.nodeBefore)?void 0:r.type.name)===e},c=function(e){var t=e.selection,r=t.$from,n=t.$to;return!(r.parentOffset>0||r.pos!==n.pos)},u=function(e,t,r){if(!r)return!1;var o=(0,n.jo)(e,t.schema),i=!1;return r.descendants(function(e){e.type===o&&(i=!0)}),i},d=o.Z.extend({addCommands:function(){return{joinListItemBackward:a}},addKeyboardShortcuts:function(){var e,t,r,o,i=this,a=null==(o=this.parent)?void 0:o.call(this);return(e=this.options)&&"string"==typeof e.type&&"chat"===this.options.type&&(null==a||delete a.Enter),t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={Backspace:function(){if(i.editor.commands.undoInputRule())return!0;var e,t=i.editor.state.selection.$from.node(),r=(null==t||null==(e=t.content)?void 0:e.size)===0;if((0,n.Ig)(i.editor.state,i.name)&&r)return i.editor.commands.lift(i.name),!0;if(!c(i.editor.state))return!1;var o=l(i.name,i.editor.state);if(!o){var a=i.editor.state.doc.resolve(i.editor.state.selection.$from.pos-2).nodeBefore;if((null==a?void 0:a.type.name)!==i.name||!r)return!1;throw Error("ListItem error (intentional)")}var d=i.editor.state.doc.resolve(o.$pos.pos-2).node(o.depth),f=u(i.name,i.editor.state,d);return!s(i.name,i.editor.state)||f||r?i.editor.chain().liftListItem(i.name).run():i.editor.commands.joinListItemBackward(i.name)}},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}})},476634:function(e,t,r){r.d(t,{E:()=>b});var n=r(683551),o=r(100334),i=r(870879),a=r(435534),l=r(122232),s=r(714844),c=r(757977),u=r(547550),d=r(904812),f=r(169530),p=function(e){var t=e.editor,r=e.range,n=e.addToLocalSgidToObjectMap,i=(0,f.pm)(),a=(0,c.dd)();return(0,s.useMutation)(function(e){return(0,u.Cu)(d.av.richTextFields.createOembed({params:{url:e}}))},{onSuccess:function(e){if(!(null==e?void 0:e.oembed))return i.error((0,o.t)("courses.edit.lesson.embed_failed"));t.chain().focus().insertContentAt(r,{type:"embed",attrs:{sgid:e.sgid}}).run(),n({sgid:e.sgid,object:e.oembed}),a.remove()},onError:function(e,n){"string"==typeof n&&(t.chain().focus().insertContentAt(r,{type:"paragraph",content:[{type:"text",text:n,marks:[{type:"link",attrs:{href:n,target:"_blank"}}]}]}).run(),a.remove())}})},m=r(189713),b=function(e){var t=e.addToLocalSgidToObjectMap,r=e.editor,s=e.range,c=e.inputRef,u=e.provider,d=p({addToLocalSgidToObjectMap:t,editor:r,range:s});return(0,n.jsx)(a.l,{onSubmit:function(e){var t=e.url;return d.mutate(t)},defaultValues:{url:""},validationSchema:(0,l.o)(),autoComplete:"off",children:(0,n.jsxs)("div",{className:"mb-6 flex h-full flex-col items-center rounded-md",role:"tabpanel",children:[(0,n.jsx)(a.l.Item,{name:"url",fullWidth:!0,hideBorder:!0,hideLabel:!0,hideDescription:!0,className:"!pt-0",placeholder:(0,o.t)("courses.edit.lesson.embed_placeholder"),children:(0,n.jsx)(a.l.Input,{ref:c})}),(0,n.jsxs)("div",{className:"mt-4 text-center",children:[(0,n.jsx)(i.z,{disabled:d.isLoading,type:"submit",variant:"circle",children:d.isLoading?(0,o.t)("courses.edit.lesson.embedding"):(0,o.t)("courses.edit.lesson.embed_media")}),(0,n.jsx)("div",{className:"mt-2",children:u?(0,n.jsxs)(m.Z.LabelSm,{weight:"semibold",children:[(0,o.t)("tiptap.extensions.embed.provider_description.works_with",{provider:u}),(0,n.jsx)("a",{href:"https://iframely.com/domains",target:"_blank",rel:"noreferrer",children:(0,o.t)("tiptap.extensions.embed.provider_description.providers")})]}):(0,n.jsxs)(m.Z.LabelSm,{weight:"semibold",children:[(0,o.t)("tiptap.extensions.embed.description.start"),(0,n.jsx)("a",{href:"https://iframely.com/domains",target:"_blank",rel:"noreferrer",children:(0,o.t)("tiptap.extensions.embed.description.providers")}),(0,o.t)("tiptap.extensions.embed.description.end")]})})]})]})})}},320765:function(e,t,r){r.d(t,{d:()=>d});var n=r(683551),o=r(314121),i=r(100334),a=r(757977),l=r(476634),s=r(263285),c=function(e){var t=e.editor,r=e.range,c=e.addToLocalSgidToObjectMap,u=e.provider,d=(0,a.dd)(),f=(0,o.useRef)(null);return(0,n.jsxs)(s.u_,{isOpen:d.visible,onClose:d.remove,initialFocus:f,children:[(0,n.jsx)(s.u_.Overlay,{}),(0,n.jsxs)(s.u_.Content,{size:"lg",shouldCloseOnOutsideClick:!0,children:[(0,n.jsxs)(s.u_.Header,{children:[(0,n.jsx)(s.u_.Title,{size:"sm",children:u?(0,i.t)("tiptap.extensions.embed.add_provider",{provider:u}):(0,i.t)("tiptap.extensions.embed.add")}),(0,n.jsx)(s.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(s.u_.CloseButton,{onClick:d.remove})})]}),(0,n.jsx)(s.u_.Body,{children:(0,n.jsx)(l.E,{inputRef:f,addToLocalSgidToObjectMap:c,editor:t,range:r,provider:u})})]})]})},u=a.gk.create(function(e){var t=e.editor,r=e.range,o=e.addToLocalSgidToObjectMap,i=e.provider;return(0,n.jsx)(c,{editor:t,range:r,provider:i,addToLocalSgidToObjectMap:o})}),d=function(){return(0,a.dd)(u)}},122232:function(e,t,r){r.d(t,{o:()=>i});var n=r(194400),o=r(100334),i=function(){var e=(0,o.t)("courses.edit.lesson.embed_invalid_url");return n.Ry().shape({url:n.Z_().required(e).url(e)})}},327205:function(e,t,r){r.d(t,{z:()=>T});var n=r(683551),o=r(314121),i=r(379600),a=r.n(i),l=r(614659),s=r.n(l),c=r(722024),u=r(276011),d=r(682240),f=r.n(d),p=r(568880),m=r(800357),b=r(615556),y=r(100334),h=r(189713),v=r(583972),g=r(961207),j=r(660720),x=r(190498),O=r(633043),w=r(634390),S=r(266546),P=r(710909),_=r(249745),k=function(e){var t,r=e.toggleFullscreen,o=e.togglePopup,i=e.onSeek,a=e.mediaTranscriptId,l=e.currentTime,s=e.onFullscreenSeek,c=e.renderFullscreenPlayer,u=e.isFullscreen,d="function"==typeof c,f=(0,P.g)(),p=f.containerRef,m=f.shouldAutoScroll,b=(0,_.q)(a).parsedWebvtt,k=null!=(t=null==b?void 0:b.cues)?t:[],D=!!(null==k?void 0:k.length);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"bg-primary ml-2 flex h-72 w-96 flex-col rounded-md p-4 shadow-sm",children:[(0,n.jsxs)("div",{className:"mb-2 flex shrink-0 items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(v.JO,{type:"16-star-ai",viewBox:"0 0 20 16",className:"mr-1"}),(0,n.jsx)(h.Z.LabelMd,{as:"div",color:"text-dark",weight:"bold",children:(0,y.t)("media_player.transcript")})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[d&&(0,n.jsx)(O.d,{onClick:r}),(0,n.jsx)(j.P,{onClick:o})]})]}),(0,n.jsxs)("div",{className:"grow overflow-auto",ref:p,children:[!D&&(0,n.jsx)(g.b,{}),D&&k.map(function(e){return(0,n.jsx)(x.N,{cue:e,isCurrentCue:(0,S.O4)(e,l),shouldScroll:m,onSeek:i},"transcript-".concat(a,"-").concat(e.startTime))})]})]}),d&&D&&(0,n.jsx)(w.n,{isOpen:u,onClose:r,cues:k,onSeek:null!=s?s:function(){},currentTime:l,children:null==c?void 0:c()})]})};function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=function(e){var t=e.mediaTranscriptId,r=e.onSeek,i=e.onFullscreenSeek,a=e.onFullscreenToggle,l=e.renderFullscreenPlayer,s=e.currentTime,c=e.transcriptPreview,u=E((0,o.useState)(!1),2),d=u[0],f=u[1],v=function(){null==a||a(),f(!d)},g=(0,o.useRef)(null),j=E((0,o.useState)(null),2),x=j[0],O=j[1],w=E((0,o.useState)(null),2),S=w[0],P=w[1],_=(0,b.D)(x,S,{placement:"auto-end",modifiers:[{name:"offset",options:{offset:[0,5]}}]}),D=_.styles,A=_.attributes,C=function(){var e;return null==(e=g.current)?void 0:e.click()};return(0,n.jsx)(p.J,{className:"relative",children:function(e){var o,a,u=e.open;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("blockquote",{children:[(0,n.jsx)("div",{className:"text-left",children:(0,n.jsx)(h.Z.BodyXs,{as:"div",children:c})}),(0,n.jsx)(p.J.Button,{as:"div",className:"flex",ref:O,children:(0,n.jsx)("button",{type:"button",className:"text-link text-xs hover:underline",ref:g,children:u?(0,y.t)("media_player.hide_transcript"):(0,y.t)("media_player.show_transcript")})})]}),(0,m.createPortal)((0,n.jsx)(p.J.Panel,(o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({as:"div",className:"z-[10000]",ref:P,style:D.popper},A.popper),a=a={children:(0,n.jsx)(k,{toggleFullscreen:v,togglePopup:C,onSeek:r,mediaTranscriptId:t,currentTime:s,onFullscreenSeek:i,renderFullscreenPlayer:l,isFullscreen:d})},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))}),o)),document.getElementById("headless-ui-popover-root")||document.body)]})}})},C=function(e){var t=e.transcriptionId,r=e.transcriptionPreview,o=e.audioPlayer;return(0,n.jsxs)("div",{className:"mt-2 flex",children:[(0,n.jsx)("div",{className:"mr-2 h-auto w-1 rounded-sm bg-gray-300"}),(0,n.jsx)(A,{mediaTranscriptId:t,onSeek:function(e){o.currentTime=e,o.play()},transcriptPreview:r})]})};function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}C.propTypes={transcriptionId:f().number.isRequired,transcriptionPreview:f().string.isRequired,audioPlayer:f().instanceOf(HTMLAudioElement).isRequired};var T=function(e){var t=e.src,r=e.downloadUrl,i=e.controls,l=void 0===i?["play","progress","current-time","mute","volume","settings"]:i,d=e.isVoiceMessage,f=void 0!==d&&d,p=e.transcriptionId,m=e.transcriptionPreview,b=(0,c.wh)().currentCommunityMember,y=(0,u.vb)(b),h=(0,o.useRef)(null),v=y&&!f?((function(e){if(Array.isArray(e))return N(e)})(l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return N(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}}(l)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat(["download"]):l;return(0,o.useEffect)(function(){if(h.current){var e=new(s())(h.current,{controls:v,invertTime:!1,speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2]},storage:{enabled:!1},urls:{download:null!=r?r:t}});return function(){return e.destroy()}}},[]),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:a()("post-audio-player",{"default mt-2":!f,"voice-message":f}),children:(0,n.jsx)("audio",{ref:h,preload:"metadata",controls:!0,children:(0,n.jsx)("source",{src:t})})}),p&&m&&(null==h?void 0:h.current)&&(0,n.jsx)(C,{transcriptionId:p,transcriptionPreview:m,audioPlayer:h.current})]})}},703247:function(e,t,r){r.d(t,{Z:()=>g});var n=r(683551),o=r(314121),i=r(214813),a=r(682604),l=r(100334),s=r(757977),c=r(583972),u=r(870879),d=r(169530),f=r(189713),p=r(476634),m=r(263285),b=r(270571);function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var h=function(e){var t,r,h=e.editor,v=e.range,g=void 0===v?{from:0,to:0}:v,j=e.addToLocalSgidToObjectMap,x=void 0===j?i.noop:j,O=e.type,w=void 0===O?"file":O,S=e.maxFileUploadSize,P=void 0===S?0x100000000:S,_=(0,s.dd)(),k=(0,d.pm)(),D=(0,o.useCallback)(function(e){var t=e[0];"too-many-files"===t.errors[0].code&&k.error((0,l.t)("tiptap.one_file_limit")),"file-too-large"===t.errors[0].code&&k.error((0,l.t)("tiptap.file_too_large",{size:(0,l.ZJ)(P)}))},[k]),E=(0,a.uI)({onDropAccepted:function(e){h.chain().focus().deleteRange(g).run(),e.forEach(function(e){h.chain().focus().insertContent({type:"file-loader",attrs:{file:e}}).run()}),_.remove()},onDropRejected:D,noClick:!0,multiple:!0,maxSize:P}),A=E.getRootProps,C=E.getInputProps,N=E.open,T="video"===w?(0,l.t)("tiptap.drag_and_drop_any_video"):(0,l.t)("tiptap.drag_and_drop_".concat(w));return(0,n.jsxs)(m.u_,{isOpen:_.visible,onClose:_.remove,children:[(0,n.jsx)(m.u_.Overlay,{}),(0,n.jsxs)(m.u_.Content,{size:"lg",children:[(0,n.jsxs)(m.u_.Header,{children:[(0,n.jsx)(m.u_.Title,{size:"sm",children:(0,l.t)("tiptap.attach_".concat(w))}),(0,n.jsx)(m.u_.HeaderActions,{children:(0,n.jsx)(m.u_.CloseButton,{onClick:_.remove})})]}),(0,n.jsx)(m.u_.Body,{className:"!px-5 md:!px-8",children:(0,n.jsxs)(b.O.Group,{className:"overflow-hidden",children:["video"==w&&(0,n.jsxs)(b.O.List,{className:"border-primary border-b",children:[(0,n.jsx)(b.O,{children:(0,l.t)("tiptap.upload")}),(0,n.jsx)(b.O,{children:(0,l.t)("tiptap.embed_link")})]}),(0,n.jsxs)(b.O.Panels,{children:[(0,n.jsx)(b.O.Panel,{children:(0,n.jsxs)("div",(t=y({className:"border-primary mb-6 mt-2 flex min-h-[220px] flex-col items-center justify-center rounded-md border border-dotted"},A()),r=r={children:[(0,n.jsx)("input",y({},C())),(0,n.jsx)(c.JO,{size:42,className:"h-[42px] !w-[42px]",type:"new-file-plus"}),(0,n.jsx)("div",{className:"text-dark my-4",children:(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:T})}),(0,n.jsx)(u.z,{type:"button",onClick:N,variant:"circle",children:(0,l.t)("tiptap.choose_".concat(w))})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}),(0,n.jsx)(b.O.Panel,{className:"px-px py-5",children:(0,n.jsx)(p.E,{addToLocalSgidToObjectMap:x,editor:h,range:g,provider:(0,l.t)("tiptap.extensions.embed.provider_description.top_video_providers")})})]})]})})]})]})},v=s.gk.create(function(e){var t=e.editor,r=e.range,o=e.addToLocalInlineAttachments,i=e.addToLocalSgidToObjectMap,a=e.type,l=e.maxSize;return(0,n.jsx)(h,{editor:t,range:r,type:a,addToLocalInlineAttachments:o,addToLocalSgidToObjectMap:i,maxSize:l})}),g=function(){return(0,s.dd)(v)}},301788:function(e,t,r){r.d(t,{v:()=>m});var n=r(683551),o=r(314121),i=r(757977),a=r(435534),l=r(263285),s=r(476728),c=r(324228),u=r(988817),d=r(183005),f=function(e){var t=e.editor,r=(0,i.dd)(),f=(0,o.useRef)(null),p=t.getAttributes("image").href,m=!!p,b=r.hide;return(0,n.jsxs)(l.u_,{isOpen:r.visible,onClose:b,initialFocus:f,children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(c.b,{isEditable:m,onClose:b}),(0,n.jsx)(a.l,{onSubmit:function(e){var r=e.url;t.chain().updateAttributes("image",{href:r}).run(),b()},defaultValues:{url:p},validationSchema:d.T,autoComplete:"off",children:(0,n.jsx)(s.u,{inputRef:f,submitButtonVariant:"circle",children:(0,n.jsx)(u.R,{isEditable:m,onClick:function(){t.chain().updateAttributes("image",{href:null}).run(),b()}})})})]})]})},p=i.gk.create(function(e){var t=e.editor;return(0,n.jsx)(f,{editor:t})}),m=function(){return(0,i.dd)(p)}},154625:function(e,t,r){r.d(t,{d:()=>D});var n=r(683551),o=r(757977),i=r(314121),a=r(379600),l=r.n(a),s=r(214813),c=r(100334),u=r(263285),d=r(624071),f=r(583972),p=r(636386),m=r(75939),b=r(929824),y=r(449315),h=r(240275),v=r(701382),g=r(189713);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function x(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function O(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){x(i,n,o,a,l,"next",e)}function l(e){x(i,n,o,a,l,"throw",e)}a(void 0)})}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var P=function(e){var t=e.isOpen,r=e.onClose,o=e.onComplete,a=w((0,i.useState)([]),2),j=a[0],x=a[1],P=w((0,i.useState)(0),2),_=P[0],k=P[1],D=w((0,i.useState)(""),2),E=D[0],A=D[1],C=w((0,i.useState)(!1),2),N=C[0],T=C[1],I=w((0,i.useState)(""),2),M=I[0],L=I[1],R=function(e,t,r){T(!1),k(0),o({url:e,signed_id:t,content_type:r})},F=function(e){new v.Q(e,R,"","",k).start()},U=function(e){return["image/gif","image/jpeg","image/png"].includes(e)},z=function(e){var t=e.url,r=e.id,n=void 0===r?(0,s.uniqueId)():r;return O(function(){var e,r,o;return S(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),T(!0),[4,fetch(t)];case 1:return[4,(e=i.sent()).blob()];case 2:return r=i.sent(),U(null!=(o=e.headers.get("content-type"))?o:"")?F(new File([r],n,{type:"image/jpeg"})):(A(c.ZP.t("image_upload.invalid_file_type_error")),T(!1)),[3,4];case 3:return i.sent(),A(c.ZP.t("image_upload.embed_network_error")),T(!1),[3,4];case 4:return[2]}})})()},$=function(e){return O(function(){var t,r,n;return S(this,function(o){switch(o.label){case 0:if(!e.trim().length)return[2];return[4,h.q.search.getPhotos({query:e.trim(),page:1,perPage:30,orientation:"landscape"})];case 1:return(n=(null==(r=o.sent())||null==(t=r.response)?void 0:t.results)||[]).length>=1&&x(n),[2]}})})()};return(0,i.useEffect)(function(){$("wallpapers")},[]),(0,n.jsxs)(u.u_,{isOpen:t,onClose:r,className:"editor-modal trix-modal__upload",children:[(0,n.jsx)(u.u_.Overlay,{}),(0,n.jsxs)(u.u_.Content,{className:"relative transition-all duration-200",size:N?"sm":"lg",children:[!N&&(0,n.jsx)("div",{className:"absolute right-4 top-4",children:(0,n.jsx)(u.u_.CloseButton,{onClick:r})}),(0,n.jsx)(u.u_.Body,{children:N?(0,n.jsxs)("div",{className:l()("bg-primary pointer-events-none flex w-full flex-col items-center justify-center py-6"),children:[(0,n.jsx)(f.JO,{type:"loader"}),(0,n.jsx)("div",{className:"mt-2 flex flex-col items-center",children:_?(0,n.jsx)(g.Z.LabelSm,{weight:"medium",children:c.ZP.t("image_upload.progress",{progress:_})}):(0,n.jsx)(g.Z.LabelSm,{weight:"medium",children:c.ZP.t("image_upload.preparing")})})]}):(0,n.jsxs)(d.m,{defaultValue:c.ZP.t("upload"),controlled:!1,children:[(0,n.jsx)("div",{label:c.ZP.t("upload"),children:(0,n.jsx)("div",{className:"pb-4",children:(0,n.jsx)(m.p,{imageError:E,insertFiles:function(e){var t=null==e?void 0:e[0];t&&U(t.type)?(T(!0),A(""),F(t)):A(c.ZP.t("image_upload.invalid_file_type_error"))}})})}),(0,n.jsx)("div",{label:(0,n.jsx)(b.$,{}),className:"unsplash-tab",children:(0,n.jsx)(y.A,{unsplashResults:j,searchUnsplash:$,addUnsplash:function(e){return z({url:e.urls.regular,id:e.id})}})}),(0,n.jsx)("div",{label:c.ZP.t("image_upload.embed"),children:(0,n.jsx)(p.u,{imageError:E,embedUrl:M,onChangeEmbedUrl:function(e){return L(e.target.value)},addEmbed:function(){return z({url:M})}})})]})})]})]})},_=function(e){var t=e.editor,r=e.range,i=e.addToLocalInlineAttachments,a=e.isWithinEmailEditor,l=(0,o.dd)();return(0,n.jsx)(P,{onComplete:function(e){var n=e.url,o=e.signed_id,s=e.content_type;i({url:n,signed_id:o,content_type:s});var c={url:n,signed_id:o,content_type:s,width_ratio:1,alignment:"center",use_intrinsic_size:!1};a&&(c={url:n,signed_id:o,content_type:s,width_ratio:0,alignment:"left",use_intrinsic_size:!0}),t.chain().focus().insertContentAt(r,[{type:"image",attrs:c},{type:"hardBreak"}]).run(),l.remove()},isOpen:l.visible,onClose:l.remove})},k=o.gk.create(function(e){var t=e.editor,r=e.range,o=e.addToLocalInlineAttachments,i=e.isWithinEmailEditor;return(0,n.jsx)(_,{editor:t,range:r,addToLocalInlineAttachments:o,isWithinEmailEditor:i})}),D=function(){return(0,o.dd)(k)}},255503:function(e,t,r){r.d(t,{h:()=>j,k:()=>g});var n=r(683551),o=r(314121),i=r(214813),a=r(628866),l=r(703339),s=r(435105),c=r(333037);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var f=function(e){var t,r=(t=(0,o.useState)([]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],i=r[1];return(0,o.useEffect)(function(){var t;(t=function(){var t;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return t=e,(")"===e||"("===e)&&(t=":".concat(e)),[4,(0,c.S)()];case 1:return[4,r.sent().SearchIndex.search(t||"face")];case 2:return i(r.sent().filter(function(e){var t,r;return null==e||null==(r=e.skins)||null==(t=r[0])?void 0:t.native})),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){d(i,n,o,a,l,"next",e)}function l(e){d(i,n,o,a,l,"throw",e)}a(void 0)})})()},[e]),{emojis:n}},p=r(379600),m=r.n(p),b=r(189713),y=function(e){var t=e.emoji,r=e.index,o=e.isSelected,a=e.setSelectedIndex,s=e.insertEmoji,c=(0,l.O)().setPopupsVisible,u=function(){a(r)};return(0,n.jsxs)("button",{type:"button",tabIndex:0,id:"emoji-".concat(t.id),onClick:function(){s(t),(0,i.defer)(function(){return c(!1)})},onMouseOver:u,onFocus:u,className:m()("text-light flex w-full cursor-pointer items-center space-x-2 px-5 py-2 first:pt-2",{"bg-tertiary":o}),children:[(0,n.jsx)("span",{className:"text-md",children:t.skins[0].native}),(0,n.jsx)("div",{className:"truncate",children:(0,n.jsxs)(b.Z.LabelSm,{children:[":",t.id,":"]})})]},t.id)};function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var g="emojiList",j=(0,o.forwardRef)(function(e,t){var r,u=e.editor,d=e.range,p=e.query,m=(r=(0,o.useState)(0),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(r,2)||function(e,t){if(e){if("string"==typeof e)return h(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],j=m[1],x=(0,l.O)().setPopupsVisible;(0,a.M)({options:{onSuccess:function(e){var t;return(t=function(){return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,(0,c.S)()];case 1:return(0,t.sent().init)({data:e}),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){v(i,n,o,a,l,"next",e)}function l(e){v(i,n,o,a,l,"throw",e)}a(void 0)})})()}}});var O=f(p).emojis;(0,o.useEffect)(function(){x(!0)},[x]);var w=function(e){u.chain().focus().deleteRange(d).insertContent(e.skins[0].native).insertContent(" ").run()};return((0,o.useEffect)(function(){var e,t;null==(e=document.getElementById("emoji-".concat(null==(t=O[b])?void 0:t.id)))||e.scrollIntoView({behavior:"smooth",block:"nearest"})},[b,O]),(0,s.h)({selectedIndex:b,setSelectedIndex:j,ref:t,items:O,selectItem:function(e){w(O[e])}}),(0,i.isEmpty)(O))?(0,n.jsx)("div",{className:"h-[50vh] min-w-[250px] max-w-[300px] bg-transparent"}):(0,n.jsx)("div",{ref:t,className:"border-primary bg-primary relative max-h-[50vh] min-w-[250px] max-w-[300px] overflow-auto rounded-sm border py-1.5 text-sm shadow-md",id:g,children:O.map(function(e,t){var r=t===b;return(0,n.jsx)(y,{emoji:e,index:t,setSelectedIndex:j,isSelected:r,insertEmoji:w},e.id)})})});j.displayName="EmojiPicker"},333037:function(e,t,r){r.d(t,{S:()=>n});var n=function(){return r.e("1097").then(r.bind(r,884172))}},926041:function(e,t,r){r.d(t,{r:()=>u});var n=r(266009),o=r(543418),i=r(882513),a=r(181159),l=r(424676),s=r(886663),c=r(255503),u=n.hj.create({addOptions:function(){return{portalTargetId:null,frameDocument:null}},addProseMirrorPlugins:function(){var e=(0,s.D)(this.options.portalTargetId,this.options.frameDocument),t=this.options.frameDocument||document;return[(0,i.ZP)({editor:this.editor,char:":",pluginKey:new a.H$("emoji"),render:function(){var r,n;return{onStart:function(i){r=new o.M_(c.h,{props:i,editor:i.editor}),n=(0,l.ZP)(e,{getReferenceClientRect:function(){var e;return(null==(e=i.clientRect)?void 0:e.call(i))||new DOMRect(0,0,0,0)},content:r.element,appendTo:function(){return e||t.body},showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border"})},onUpdate:function(e){var t;r.updateProps(e),null==(t=n[0])||t.setProps({getReferenceClientRect:e.clientRect})},onKeyDown:function(e){var t;return"Escape"===e.event.key?(n[0].hide(),!0):null==(t=r.ref)?void 0:t.onKeyDown(e)},onExit:function(){var e;null==(e=n[0])||e.destroy(),null==r||r.destroy()}}}})]}})},329055:function(e,t,r){r.d(t,{W:()=>o,v:()=>i});var n=function(e){var t;return(null==e||null==(t=e.$cursor)?void 0:t.pos)!==null},o=function(e){var t=e.editor;if(n(t.state.selection)){var r,o,i,a=null==(i=t.state)||null==(o=i.selection)||null==(r=o.$cursor)?void 0:r.pos;if(a>0){var l=Math.max(0,a-1),s=a&&t.state.doc.nodeAt(l);s&&(null==s?void 0:s.isText)&&(s.textBetween(l,a," ").endsWith(" ")||t.chain().focus().insertContent(" ").run())}}return t.chain().focus().insertContent("/").run()},i=function(e){var t=e.editor.state.selection;return{from:t.from,to:t.to}}},48721:function(e,t,r){r.d(t,{o:()=>f});var n=r(683551),o=r(214813),i=r(363228),a=r(100334),l=r(793245),s=r(527804),c=r(74288),u=r(844527),d=r(329055),f=function(e){var t=e.editor,r=e.portalId,f=e.showImagePickerModal,p=e.showFileUploadModal,m=e.showGiphyPickerModal,b=e.showPollModal,y=e.disabledExtensions,h=e.showVoiceMessageModal,v=(0,l.L)();return t&&r?(0,n.jsx)(i.h,{selectorQuery:"#".concat(r),children:(0,n.jsxs)("ul",{className:"flex list-none items-center gap-1.5",children:[(0,n.jsx)("li",{children:(0,n.jsx)(s.T,{placement:"top",interactive:!1,content:(0,a.t)("tiptap.open_slash_commands_menu"),dataTestId:"open_slash_commands_menu",children:(0,n.jsx)(u.h,{iconSize:20,iconClassName:"!text-dark",name:"20-add-circle",ariaLabel:(0,a.t)("tiptap.open_slash_commands_menu"),onClick:function(){(0,d.W)({editor:t})}})})}),(0,n.jsx)("li",{children:!y.entities&&(0,n.jsx)(s.T,{placement:"top",interactive:!1,content:(0,a.t)("tiptap.add_entity"),dataTestId:"add_entity_list",children:(0,n.jsx)(u.h,{iconSize:20,iconClassName:"!text-dark",ariaLabel:(0,a.t)("tiptap.add_entity"),name:"20-tiptap-entity",onClick:function(){t.chain().focus().insertContent(" #").run()}})})}),!y.file_loader&&(0,n.jsx)("li",{className:"hidden md:flex",children:(0,n.jsx)(s.T,{placement:"top",interactive:!1,content:(0,a.t)("tiptap.attach_file"),dataTestId:"attach_file",children:(0,n.jsx)(u.h,{iconSize:20,iconClassName:"!text-dark",ariaLabel:(0,a.t)("tiptap.attach_file"),name:"20-attach",onClick:function(){return p({editor:t,range:(0,d.v)({editor:t})})}})})}),!y.file_loader&&(0,n.jsx)("li",{children:(0,n.jsx)(s.T,{placement:"top",interactive:!1,content:(0,a.t)("tiptap.attach_video"),dataTestId:"attach_video",children:(0,n.jsx)(u.h,{iconSize:20,iconClassName:"!text-dark",name:"20-video",ariaLabel:(0,a.t)("tiptap.attach_video"),onClick:function(){return p({editor:t,range:(0,d.v)({editor:t}),type:"video"})}})})}),!y.file_loader&&(0,n.jsx)("li",{className:"hidden md:flex",children:(0,n.jsx)(s.T,{placement:"top",interactive:!1,content:(0,a.t)("tiptap.add_gif"),dataTestId:"add_gif",children:(0,n.jsx)(u.h,{iconSize:20,iconClassName:"!text-dark",name:"20-gif",ariaLabel:(0,a.t)("tiptap.add_gif"),onClick:function(){return m({editor:t,range:(0,d.v)({editor:t})})}})})}),!y.image&&(0,n.jsx)("li",{children:(0,n.jsx)(s.T,{placement:"top",interactive:!1,content:(0,a.t)("tiptap.add_image"),dataTestId:"add_image",children:(0,n.jsx)(u.h,{iconSize:20,iconClassName:"!text-dark",ariaLabel:(0,a.t)("tiptap.add_image"),onClick:function(){return f({editor:t,range:(0,d.v)({editor:t})})},name:"20-file-image"})})}),!y.emojipicker&&(0,n.jsx)(s.T,{placement:"top",interactive:!1,content:(0,a.t)("tiptap.add_emoji"),dataTestId:"add_emoji",children:(0,n.jsx)(c.c,{placement:"top-start",onEmojiSelect:function(e){return t.chain().focus().insertContent(e.emoji).run()},as:"li",shouldEmojiPickerRenderAsPortal:!0,targetWrapperClassName:"!flex",target:(0,n.jsx)(u.h,{iconSize:20,ariaLabel:(0,a.t)("tiptap.add_emoji"),iconClassName:"!text-dark",name:"20-emoji"})})}),!y.poll&&(0,n.jsx)("li",{children:(0,n.jsx)(s.T,{placement:"top",interactive:!1,content:(0,a.t)("tiptap.add_poll"),dataTestId:"add_poll",children:(0,n.jsx)(u.h,{iconSize:20,iconClassName:"!text-dark",name:"20-editor-poll",ariaLabel:(0,a.t)("tiptap.add_poll"),onClick:function(){return b({editor:t,range:(0,d.v)({editor:t})})}})})}),!y.voice_message&&(0,n.jsx)("li",{children:(0,n.jsx)(s.T,{placement:"top",interactive:!1,content:(0,a.t)("tiptap.record_voice_message"),dataTestId:"record_voice_message",children:(0,n.jsx)(u.h,{iconSize:20,iconClassName:"!text-dark",name:"20-microphone",ariaLabel:(0,a.t)("tiptap.record_voice_message"),onClick:function(){return h({editor:t,range:(0,d.v)({editor:t})})}})})}),v&&!y.file_loader&&(0,n.jsx)("li",{children:(0,n.jsx)(s.T,{placement:"top",interactive:!1,content:(0,a.t)("tiptap.record_video_clip"),dataTestId:"record_video_clip_toolbar",children:(0,n.jsx)(u.h,{iconSize:20,iconClassName:"!text-dark",name:"20-camera",ariaLabel:(0,a.t)("tiptap.record_video_clip"),onClick:o.noop})})})]})}):null}},455155:function(e,t,r){r.d(t,{$:()=>n,M:()=>o});var n={LEFT:"left",CENTER:"center",RIGHT:"right"},o=["paragraph","heading","listItem","blockquote"]},799746:function(e,t,r){r.d(t,{R:()=>ny});var n=r(683551),o=r(314121),i=r(941771),a=r(653769),l=r(898941),s=r(183794),c=r(464388),u=r(939999),d=r(555346),f=r(612746),p=r(544519),m=r(728747),b=r(411102),y=r(219483),h=r(748280),v=r(79887),g=r(791192),j=r(994587),x=r(489761),O=r(578686),w=r(495913),S=r(240954),P=r(908250),_=r(457914),k=r(864671),D=r(959744),E=r(749546),A=r(543418),C=r(214813),N=r(650034),T=r(146224),I=r(85416),M=r(623951),L=r(935023),R=r(266009),F=r(714844),U=r(100334),z=r(583972),$=r(225947),B=r(155921),Z=r(757977),H=r(376316),q=r(263285),V=function(e){var t=e.file,r=(0,Z.dd)();return"application/pdf"!==t.content_type?null:(0,n.jsx)(q.u_,{isOpen:r.visible,onClose:r.remove,children:(0,n.jsx)(q.u_.Overlay,{children:(0,n.jsxs)(q.u_.Content,{size:"full",children:[(0,n.jsxs)(q.u_.Header,{children:[(0,n.jsx)(q.u_.Title,{size:"sm",children:t.filename}),(0,n.jsxs)(q.u_.HeaderActions,{children:[(0,n.jsx)("a",{href:t.url,download:!0,className:"text-dark hover:text-darkest focus:text-dark flex items-center justify-center",children:(0,n.jsx)(z.JO,{type:"16-download",size:16})}),(0,n.jsx)(q.u_.CloseButton,{onClick:r.remove})]})]}),(0,n.jsx)(q.u_.Body,{children:(0,n.jsx)(H.X,{className:"size-full",src:t.url})})]})})})},W=Z.gk.create(function(e){var t=e.file;return(0,n.jsx)(V,{file:t})}),J=r(189713),G=r(832818),K=r(645391),Q=r(904812),X=r(863792),Y=r(327205),ee=r(666648),et=function(e){var t,r=e.attachment,o=e.isTranscodingEnabled;return(0,n.jsx)(A.T5,{as:"div",id:"file-wrapper",children:(0,n.jsx)(ee.TranscriptsPlayer,{src:r.url,type:r.content_type,mediaTranscoding:r.media_transcoding,mediaTranscriptId:r.media_transcript_id,isDownloadable:r.is_downloadable,isTranscodingEnabled:void 0!==o&&o,poster:null==(t=r.image_variants)?void 0:t.thumbnail,downloadUrl:r.url,chaptersUrl:r.chapters_url,previewThumbnailsUrl:r.preview_thumbnails_url,variants:r.video_variants,signedId:r.signed_id})})},er=function(e){var t=e.onClick;return(0,n.jsx)("button",{type:"button",className:"bg-secondary border-primary text-dark absolute -right-2.5 -top-2.5 flex scale-50 cursor-pointer items-center justify-center rounded-full border opacity-0 transition-all duration-200 group-hover:scale-100 group-hover:opacity-100",onClick:t,"aria-label":(0,U.t)("close"),children:(0,n.jsx)(z.JO,{type:"close"})})};function en(e){var t=e.attachment,r=e.isEditable,o=e.onDelete;return(0,n.jsx)(A.T5,{as:"div",id:"file-wrapper",children:(0,n.jsxs)("div",{className:"group relative inline-block pe-4",children:[(0,n.jsx)("a",{href:t.url,download:!0,target:"_blank",rel:"noreferrer",children:t.filename}),r&&(0,n.jsx)("button",{type:"button",className:"bg-secondary border-primary text-dark absolute right-0 top-0 flex -translate-y-1/2 translate-x-1/2 scale-50 cursor-pointer items-center justify-center rounded-full border opacity-0 transition-all duration-200 group-hover:scale-100 group-hover:opacity-100",onClick:o,"aria-label":(0,U.t)("delete"),children:(0,n.jsx)(z.JO,{type:"close"})})]})})}var eo=function(e){var t,r,o=e.attachment,i=e.isEditable,a=e.onDelete;return(0,n.jsxs)(A.T5,{id:"file-wrapper",as:"div",className:"group relative max-w-[500px]",children:[i&&(0,n.jsx)(er,{onClick:a}),(0,n.jsx)(Y.z,{src:o.url,controls:["play","progress","current-time"],isVoiceMessage:!0,transcriptionId:null==(t=o.metadata)?void 0:t.transcript_id,transcriptionPreview:null==(r=o.metadata)?void 0:r.transcript_preview})]})},ei=function(e){var t,r,o,i,a,l,s,c,u=e.node,d=e.editor,f=e.deleteNode,p=d.isEditable,m=(0,Z.dd)(W),b=null!=(c=(0,B.p)())?c:{},y=b.localInlineAttachments,h=b.inlineAttachments,v=b.addToLocalInlineAttachments,g=b.shouldPreviewFilesAsLinks,j=null==(o=u.attrs)?void 0:o.signed_id,x=(null==y?void 0:y.find(function(e){return e.signed_id===j}))||(null==h?void 0:h.find(function(e){return e.signed_id===j})),O=(0,F.useQuery)({queryKey:[Q.av.richTextFields.fetchAttachment({signedId:j})],enabled:!x&&p,retry:!1,retryOnMount:!1,onSuccess:v}).isLoading,w=function(e){f(),e.preventDefault(),e.stopPropagation()};if(O)return(0,n.jsx)(A.T5,{as:"div",className:"my-4",children:(0,n.jsx)(z.JO,{type:"loader",size:16})});if(!x)return(0,n.jsxs)(A.T5,{as:"div",className:"bg-tertiary group flex items-start gap-2 rounded-md p-4",children:[p&&(0,n.jsx)(er,{onClick:w}),(0,n.jsx)(z.JO,{type:"16-trash-bin-2",size:20}),(0,n.jsx)(J.Z.BodySm,{as:"span",children:(0,U.t)("tiptap.file_not_found")})]});if(g)return(0,n.jsx)(en,{attachment:x,isEditable:p,onDelete:w});var S=X.$.isNativelySupportedVideo(x.content_type),P=X.$.isVideo(x.content_type)&&!!x.media_transcoding,_=S||P,k=X.$.isAudio(x.content_type),D=X.$.isPDF(x.content_type),E=!_&&!k&&!D,N=!!(null==(i=x.metadata)?void 0:i.voice_message),T=k?{}:{href:x.url,download:!0};return _?(0,n.jsx)(et,{attachment:x,isTranscodingEnabled:P}):N?(0,n.jsx)(eo,{attachment:x,isEditable:p,onDelete:w}):(0,n.jsxs)(A.T5,{as:"div",id:"file-wrapper",className:(0,K.A)("bg-secondary hover:bg-tertiary border-primary group relative w-full flex-col rounded-sm border px-3 py-2",{"max-w-[350px]":E,"max-w-[500px]":k||D}),children:[p&&(0,n.jsx)(er,{onClick:w}),(0,n.jsxs)("a",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},T),r=r={className:"inline-flex items-center space-x-3 truncate",children:[(0,n.jsx)($.V,{content_type:x.content_type}),(0,n.jsxs)("div",{className:"flex flex-col truncate",children:[(0,n.jsx)(J.Z.LabelSm,{weight:"semibold",children:(0,C.truncate)(x.filename,{length:35})}),(0,n.jsx)(J.Z.LabelXs,{weight:"regular",children:(0,G.s)(x.byte_size)})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),D&&(0,n.jsxs)("div",{className:"relative mt-2 flex max-h-[500px] items-center justify-center overflow-hidden",children:[(0,n.jsx)("button",{type:"button",onClick:function(){m.show({file:x})},className:"absolute left-0 top-0 size-full cursor-zoom-in","aria-label":(0,U.t)("view_attachment")}),(null==(a=x.image_variants)?void 0:a.thumbnail)&&(0,n.jsx)("img",{loading:"lazy",className:"h-48 w-full object-cover object-top",src:x.image_variants.thumbnail,alt:(0,U.t)("tiptap.pdf_preview")})]}),k&&(0,n.jsx)(Y.z,{src:(null==(s=x.audio_variants)||null==(l=s.optimized)?void 0:l.url)||x.url,downloadUrl:x.url})]})},ea=R.NB.create({name:"file",group:"block",atom:!0,addAttributes:function(){return{signed_id:{default:null}}},parseHTML:function(){return[{tag:"file-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["file-react",(0,R.P1)(t)]},addNodeView:function(){return function(e){var t,r,n,o=(0,A.fW)(ei)(e),i=!1,a=null==(t=o.stopEvent)?void 0:t.bind(o),l=null==(r=o.selectNode)?void 0:r.bind(o),s=null==(n=o.deselectNode)?void 0:n.bind(o);return o.selectNode=function(){i=!0,null==l||l()},o.deselectNode=function(){i=!1,null==s||s()},o.stopEvent=function(e){return!!i&&"mousedown"===e.type||a(e)},o}}}),el=r(703247),es=r(926041),ec=r(878936),eu=r(209048),ed=r(995822),ef=r(805855),ep=r(443949),em=r(722024),eb=function(e){var t=e.onClose,r=e.recordingId,n=e.setServerError,o=e.addToLocalInlineAttachments,i=e.editor,a=e.range,l=((0,em.wh)().currentCommunityMember||{}).id;(0,ef.I)(void 0===l?0:l,function(e){(e.event===ep.K2||e.event===ep.x4)&&e.json_message.recording_id===r&&(e.event===ep.K2?(o({url:e.json_message.url,signed_id:e.json_message.signed_id,content_type:e.json_message.content_type,metadata:{voice_message:!0}}),i.chain().focus().deleteRange(a).insertContent({type:"file",attrs:{signed_id:e.json_message.signed_id}}).run(),t()):e.event===ep.x4&&n())})},ey=function(e){var t=e.onClose,r=e.addToLocalInlineAttachments,i=e.editor,a=e.range,l=(0,o.useMemo)(function(){return(0,eu.zs)()},[]),s=(0,ed.Y)({recordingId:l}),c=s.isRecording,u=s.status,d=s.isBusy,f=s.isError,p=s.onSubmit;eb({onClose:t,recordingId:l,setServerError:s.setServerError,addToLocalInlineAttachments:r,editor:i,range:a});var m=(0,U.t)("tiptap.voice_message.".concat(u));return(0,n.jsx)("div",{className:"bg-primary shadow-voice-message absolute left-0 top-0 z-10 flex size-full items-center justify-center rounded-md",children:(0,n.jsxs)("div",{className:(0,K.A)("flex items-center rounded-full bg-gray-100 p-1 text-gray-700 dark:bg-gray-900 dark:text-gray-300",{"text-red-600 dark:text-red-600":c}),children:[(0,n.jsx)("button",{type:"button",onClick:t,className:"bg-primary flex items-center justify-center rounded-full p-2",children:(0,n.jsx)(z.JO,{type:"20-close",viewBox:"0 0 20 20",className:"text-icon dark:text-white"})}),(0,n.jsxs)("div",{className:"ml-4 mr-2 flex",children:[(0,n.jsx)("div",{className:"min-w-[160px]",children:m}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"mr-2 min-w-[45px]",children:(0,n.jsx)(ec.B7,{isRecording:c})}),(0,n.jsx)(z.JO,{type:"20-microphone",className:(0,K.A)("mt-[2px] text-gray-700 dark:text-gray-300",{"text-red-600 dark:text-red-600":c})})]})]}),(0,n.jsx)("button",{type:"submit",className:"bg-brand flex items-center justify-center rounded-full p-2",onClick:p,disabled:d,children:d?(0,n.jsx)(ec.$j,{}):(0,n.jsx)(z.JO,{type:f?"20-retry":"20-checkmark",viewBox:"0 0 20 20",className:"text-white"})})]})})},eh=function(e){var t=e.editor,r=e.range,o=e.addToLocalInlineAttachments,i=void 0===o?C.noop:o,a=(0,Z.dd)();return(0,n.jsxs)(q.u_,{isOpen:a.visible,onClose:a.remove,children:[(0,n.jsx)(q.u_.Overlay,{}),(0,n.jsxs)(q.u_.Content,{size:"md",children:[(0,n.jsx)(q.u_.Header,{children:(0,n.jsx)(q.u_.Title,{size:"sm",children:(0,U.t)("tiptap.voice_message.action")})}),(0,n.jsx)(q.u_.Body,{children:(0,n.jsx)(ey,{onClose:a.remove,addToLocalInlineAttachments:i,editor:t,range:r})})]})]})},ev=Z.gk.create(function(e){var t=e.editor,r=e.range,o=e.addToLocalInlineAttachments;return(0,n.jsx)(eh,{editor:t,range:r,addToLocalInlineAttachments:o})}),eg=r(879686),ej=r(405665),ex=r(884352),eO=r(329055),ew=r(379600),eS=r.n(ew),eP=r(250822),e_=r(454383),ek=function(e){var t=e.isActive,r=e.onClick,o=e.iconType;return(0,n.jsx)("button",{type:"button",onClick:r,className:eS()("text-feature-dark bg-text-editor-modifier hover:bg-text-editor-modifier-hover rounded-sm p-1",{"bg-text-editor-modifier-active":void 0!==t&&t}),children:(0,n.jsx)(e_.l,{type:o,iconSize:16})})},eD=r(360174),eE=function(e){var t=e.editor,r=e.node,o=e.updateAttributes,i=e.deleteNode,a=(0,eD.Y)(),l=(0,eP.ef)(),s=((0,B.p)()||{}).isWithinEmailEditor;return(0,n.jsx)("div",{className:eS()("absolute right-0 top-0 flex w-full -translate-y-full items-center justify-end pb-1 group-hover:visible",{invisible:!l}),children:(0,n.jsxs)("div",{className:"bg-text-editor-modifier flex overflow-hidden rounded-md p-1 text-sm",children:[(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(ek,{onClick:function(){o({alignment:"left",full_width:!1})},isActive:"left"==r.attrs.alignment,iconType:"16-image-left"}),(0,n.jsx)(ek,{onClick:function(){o({alignment:"center",full_width:!1})},isActive:"center"==r.attrs.alignment&&!r.attrs.full_width,iconType:"16-image-centre"}),(0,n.jsx)(ek,{onClick:function(){o({alignment:"center",full_width:!0})},isActive:"center"==r.attrs.alignment&&r.attrs.full_width,iconType:"16-image-full-width"}),(0,n.jsx)(ek,{onClick:function(){o({alignment:"right",full_width:!1})},isActive:"right"==r.attrs.alignment,iconType:"16-image-right"})]}),(0,n.jsx)("span",{className:"m-1 inline-block w-px self-stretch bg-gray-500","aria-hidden":!0}),(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(ek,{iconType:"16-edit",onClick:function(){return a.show({editor:t,range:(0,eO.v)({editor:t}),isWithinEmailEditor:s})}}),(0,n.jsx)(ek,{onClick:i,iconType:"16-trash"})]})]})})},eA=function(e){var t=e.editor,r=e.node,o=e.updateAttributes,i=e.deleteNode,a=e.selected,l=t.isEditable,s=(0,eD.Y)(),c=((0,B.p)()||{}).isWithinEmailEditor;return(0,n.jsxs)(A.T5,{as:"div",className:(0,K.A)("group relative my-2 flex items-center rounded-md border py-4",{"justify-center":"center"===r.attrs.alignment,"justify-start":"left"===r.attrs.alignment,"justify-end":"right"===r.attrs.alignment},{"border-transparent":!l,"hover:border-dark border-transparent":l&&!a,"border-circle":l&&a}),children:[(0,n.jsx)("a",{style:{backgroundColor:r.attrs.color,color:r.attrs.text_color},className:(0,K.A)("tiptap-cta focus-visible:!outline-secondary group relative block rounded-full px-6 py-2.5 font-bold transition-opacity hover:opacity-90 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",r.attrs.full_width?"w-[350px] text-center":"w-auto",!r.attrs.text_color&&"!text-white"),target:"_blank",href:r.attrs.url,rel:"noreferrer",onClick:function(e){l&&(e.preventDefault(),s.show({editor:t,range:(0,eO.v)({editor:t}),isWithinEmailEditor:c}).catch(console.error))},children:r.attrs.label}),l&&(0,n.jsx)(eE,{editor:t,node:r,updateAttributes:o,deleteNode:i})]})},eC=R.NB.create({name:"cta",group:"block",atom:!0,addAttributes:function(){return{url:{default:null},label:{default:null},color:{default:null},text_color:{default:"#FFFFFF"},full_width:{default:!1},alignment:{default:"center"}}},parseHTML:function(){return[{tag:"cta-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["cta-react",(0,R.P1)(t)]},addNodeView:function(){return(0,A.fW)(eA)}}),eN=R.hj.create({name:"disableModEnter",addKeyboardShortcuts:function(){return{"Mod-Enter":function(){return!0}}}}),eT=r(547550);function eI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eM=(0,r(920255).Ue)(function(e){return{failedLinkEmbeds:[],addFailedLinkEmbed:function(t){e(function(e){var r;return{failedLinkEmbeds:((function(e){if(Array.isArray(e))return eI(e)})(r=e.failedLinkEmbeds)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return eI(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eI(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t])}})}}}),eL=R.NB.create({name:"embed-loader",group:"inline",inline:!0,atom:!0,addAttributes:function(){return{href:{default:null},text:{default:null}}},parseHTML:function(){return[{tag:"embed-loader"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["embed-loader",(0,R.P1)(t)]},addNodeView:function(){return(0,A.fW)(eR)},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){var t=eM.getState().failedLinkEmbeds,r=e.editor.state;if(r.selection.$from.pos>0){var n=r.doc.resolve(r.selection.$from.pos-1).marks(),o=r.doc.resolve(r.selection.$from.pos).marks();if(n.some(function(e){return"link"===e.type.name})&&!o.some(function(e){return"link"===e.type.name})){var i=n.find(function(e){return"link"===e.type.name}),a=i.attrs,l=r.doc.nodeAt(r.selection.$from.pos-1),s=a.href===l.text;return!t.includes(a.href)&&!!l&&!!i&&!!s&&(e.editor.chain().focus().setTextSelection(r.selection.$from.pos-1).extendMarkRange("link").deleteSelection().run(),e.editor.view.dispatch(e.editor.view.state.tr.insert(e.editor.view.state.selection.anchor,e.editor.schema.nodes["embed-loader"].create({href:a.href,text:l.text})).setMeta("addToHistory",!1)),!0)}return!1}}}}}),eR=function(e){var t=e.node,r=e.editor,i=e.HTMLAttributes,a=e.getPos,l=(0,B.p)().addToLocalSgidToObjectMap,s=eM().addFailedLinkEmbed,c=function(){var e=r.state,n=r.view.dispatch,o=a();o&&n(e.tr.delete(o,o+t.nodeSize).setMeta("addToHistory",!1))},u=(0,F.useMutation)(function(e){return(0,eT.Cu)(Q.av.richTextFields.createOembed({params:{url:e}}))},{onSuccess:function(e){c(),r.chain().focus().insertContent({type:"embed",attrs:{sgid:e.sgid}}).run(),l({sgid:e.sgid,object:e.oembed})},onError:function(){s(t.attrs.href),c(),r.chain().focus().insertContent({type:"text",text:t.attrs.text,marks:[{type:"link",attrs:{href:t.attrs.href}}]}).run()}}),d=r.isEditable;return(0,o.useEffect)(function(){if(d){var e=t.attrs.href;return u.mutate(e),function(){u.reset()}}},[]),(0,n.jsxs)(A.T5,{as:"span",HTMLAttributes:i,children:[(0,n.jsx)("a",{href:t.attrs.href,className:eS()({"pointer-events-none mr-px animate-pulse":d}),target:"_blank",rel:"noopener noreferrer",children:t.attrs.text}),d&&(0,n.jsx)(z.JO,{type:"loader",className:"mb-[3px]",size:14})]})},eF=r(506666),eU=r(290428),ez=r(946602),e$=r(217725);function eB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function eH(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eB(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eV=function(e){var t=e.onComplete,r=eq((0,o.useState)("idle"),2),n=r[0],i=r[1],a=eq((0,o.useState)(null),2),l=a[0],s=a[1],c=eq((0,o.useState)(null),2),u=c[0],d=c[1],f=(0,F.useMutation)(function(e){return eU.O.create({blobSignedId:e.signed_id})},{onError:function(){s("processing_failed"),i("failed")}}).mutate,p=(0,ez.S)({onUploadStarted:function(){return i("uploading")},onUploadComplete:function(e){if(d(e),X.$.isVideo(e.content_type))i("processing"),f(e);else{var r=e.signed_id,n=e.filename,o=(0,Q.Gd)({signed_id:r,filename:n});t(eH(eZ({},e),{url:o})),i("succeeded")}},onUploadFailed:function(){s("upload_failed"),i("failed")}}),m=p.uppy,b=p.progress;return(0,e$.k)({enabled:"processing"===n&&!!(null==u?void 0:u.signed_id),signedId:null==u?void 0:u.signed_id,onSuccess:function(e){var r=e.hlsUrl,n=e.previewThumbnailsUrl;if(u){var o=u.signed_id,a=u.filename,l=(0,Q.Gd)({signed_id:o,filename:a});t(eH(eZ({},u),{url:l,media_transcoding:{status:"succeeded"},video_variants:{original:l,hls:r},preview_thumbnails_url:n})),i("succeeded")}},onError:function(){s("processing_failed"),i("failed")}}),{status:n,progress:b,error:l,addFile:(0,o.useCallback)(function(e){i("preparing"),s(null),d(null),m.addFile(e)},[m]),cancelUpload:(0,o.useCallback)(function(){i("idle"),s(null),d(null),m.cancelAll()},[m])}},eW="tiptap.file_upload",eJ=R.NB.create({name:"file-loader",group:"inline",inline:!0,atom:!0,addAttributes:function(){return{file:{default:null}}},parseHTML:function(){return[{tag:"file-loader"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["file-loader",(0,R.P1)(t)]},addNodeView:function(){return(0,A.fW)(eG)}}),eG=function(e){var t,r=e.node,i=e.editor,a=e.HTMLAttributes,l=e.getPos,s=i.isEditable,c=r.attrs.file,u=(0,B.p)()||{},d=u.addToLocalInlineAttachments,f=u.isWithinEmailEditor,p=function(e){e&&i.view.dispatch(i.state.tr.delete(e,e+r.nodeSize).setMeta("addToHistory",!1))},m=eV({onComplete:function(e){var t=e.signed_id,r=e.content_type,n=X.$.isImage(r),o=l();null==d||d(e),p(o),i.view.dispatch((0,eF.SJ)(i.state.tr.insert(o,i.schema.nodes[n?"image":"file"].create({signed_id:t,alignment:f?"left":"center",use_intrinsic_size:f}))))}}),b=m.status,y=m.progress,h=m.error,v=m.addFile,g=m.cancelUpload,j=null!=(t=File)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](c):c instanceof t;return((0,o.useEffect)(function(){if(s)return j?(v(c),function(){return g()}):void p(l())},[]),s&&j)?(0,n.jsx)(A.T5,{as:"div",HTMLAttributes:a,children:(0,n.jsxs)("div",{className:"bg-secondary border-primary relative my-2 inline-flex w-full space-x-3 rounded-sm border px-3 py-2 md:w-[75%] lg:w-[50%]",children:["failed"===b?(0,n.jsx)(z.JO,{type:"20-alert",className:"!h-5 !w-5",size:20}):(0,n.jsx)(z.JO,{type:"loader",className:"animate-spin",size:24}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(J.Z.LabelSm,{color:"text-dark",weight:"semibold",children:(0,C.truncate)(c.name,{length:15})}),(0,n.jsx)(J.Z.LabelSm,{children:function(){switch(b){case"preparing":return(0,U.t)([eW,"preparing"]);case"uploading":return(0,U.t)([eW,"uploading"],{progress:y.toFixed(0)});case"processing":return(0,U.t)([eW,"processing"]);case"failed":return(0,U.t)([eW,"errors",h||""]);default:return""}}()})]})]})}):null},eK=r(438667),eQ=r(328213),eX=r(654423),eY=r(598734),e0=r(181514),e1=r(357382),e2=(0,o.forwardRef)(function(e,t){var r=e.query,o=e.setQuery;return(0,n.jsx)("div",{className:"py-2",children:(0,n.jsx)("input",{ref:t,type:"text",placeholder:U.ZP.t("tiptap.search_giphy"),onChange:function(e){return o(e.target.value)},value:r,className:"bg-secondary placeholder:text-light w-full rounded-sm border-none text-sm placeholder:opacity-100 focus:border-none focus:shadow-none focus:ring-0"})})});function e3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e5(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function e8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e3(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e2.displayName="SearchBox";var e6=function(e){var t=e.editor,r=e.range,i=void 0===r?{from:0,to:0}:r,a=e.addToLocalInlineAttachments,l=void 0===a?C.noop:a,s=(0,Z.dd)(),c=e8((0,o.useState)(""),2),u=c[0],d=c[1],f=e8((0,o.useState)(!1),2),p=f[0],m=f[1],b=(0,o.useRef)(null),y=(0,F.useInfiniteQuery)(["chat-members-search",u],function(e){var t=e.pageParam,r=void 0===t?1:t;return u?eX.y(u,{offset:r,limit:10}):eX.q({offset:r,limit:10})},{getNextPageParam:function(e){return e.pagination.offset+e.pagination.count<e.pagination.total_count?e.pagination.offset+10:null}}),h=y.data,v=y.fetchNextPage,g=y.hasNextPage,j=y.isLoading,x=(0,o.useMemo)(function(){var e;return(0,C.uniqBy)((0,C.flatten)(null==h||null==(e=h.pages)?void 0:e.map(function(e){return e.data})),"id")},[h]),O=(0,eY.A)(),w=O.uploadFile,S=O.status,P=O.isError,_=O.response,k=O.progress,D=!P&&"uploading"===S,E=function(){if(_.signed_id&&_.filename&&_.content_type){var e=_.signed_id,r=_.filename,n=_.content_type,o=(0,Q.Gd)({signed_id:e,filename:r});l({url:o,signed_id:e,content_type:n}),(0,C.defer)(function(){t.chain().focus().insertContentAt(i,[{type:"image",attrs:{url:o,signed_id:e,content_type:n,width_ratio:1}},{type:"hardBreak"}]).run(),s.remove()})}},A=function(e){var t;return(t=function(){var t,r,n;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(o){switch(o.label){case 0:return m(!0),[4,fetch(e.images.original.url)];case 1:return t=o.sent(),r="video"==e.type?"video/mp4":"image/gif",n=File.bind,[4,t.blob()];case 2:return w(new(n.apply(File,[void 0,[o.sent()],"".concat(e.id,".").concat(r.split("/")[1]),{type:r}]))),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){e5(i,n,o,a,l,"next",e)}function l(e){e5(i,n,o,a,l,"throw",e)}a(void 0)})})()};return(0,o.useEffect)(function(){"uploading"===S&&m(!1),"completed"===S&&_&&E()},[S,_]),(0,n.jsxs)(q.u_,{isOpen:s.visible,onClose:s.remove,initialFocus:b,children:[(0,n.jsx)(q.u_.Overlay,{}),(0,n.jsxs)(q.u_.Content,{size:"lg",children:[(0,n.jsxs)(q.u_.Header,{children:[(0,n.jsx)(q.u_.Title,{size:"sm",children:(0,U.t)("tiptap.add_gif")}),(0,n.jsx)(q.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(q.u_.CloseButton,{onClick:s.remove})})]}),(0,n.jsx)(q.u_.Body,{children:D||p?(0,n.jsx)("div",{className:"bg-primary pointer-events-none flex min-h-[240px] w-full flex-col items-center justify-center py-6",children:(0,n.jsxs)("div",{className:"mb-4 flex flex-col items-center",children:[(0,n.jsx)(e1.a,{center:!0}),k?(0,n.jsx)(J.Z.LabelSm,{weight:"medium",children:(0,U.t)("tiptap.progress",{progress:k.toFixed(0)})}):(0,n.jsx)(J.Z.LabelSm,{weight:"medium",children:(0,U.t)("tiptap.preparing")})]})}):(0,n.jsxs)("div",{className:"bg-primary border-primary flex w-full flex-col space-y-1",children:[(0,n.jsx)(e2,{ref:b,query:u,setQuery:d}),j&&(0,n.jsx)(e0.m,{}),!!x.length&&(0,n.jsx)(eK.Z,{dataLength:x.length,next:v,hasMore:!!g,scrollThreshold:.6,height:360,loader:(0,n.jsx)("div",{className:"col-span-3 flex justify-center py-3",children:(0,n.jsx)(e0.m,{})}),className:"mb-2 py-2",children:(0,n.jsx)(eQ.Z,{columnsCount:3,gutter:"8",children:x.map(function(e){return(0,n.jsx)("button",{type:"submit",onClick:function(){return A(e)},"aria-label":e.title,children:(0,n.jsx)("img",{loading:"lazy",alt:"",className:"rounded-sm",width:180,src:e.images.preview_gif.url})},e.id)})})})]})})]})]})},e4=Z.gk.create(function(e){var t=e.editor,r=e.range,o=e.addToLocalInlineAttachments;return(0,n.jsx)(e6,{editor:t,range:r,addToLocalInlineAttachments:o})}),e9=r(212749),e7=r(795980),te=r(102965),tt=r(844527),tr=r(916945),tn=r(435534),to=r(68493),ti=r(169530),ta=function(e){var t=e.sgid,r=e.options;return(0,F.useQuery)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({queryKey:["poll",t],queryFn:function(){if(!t)throw Error("sgid is required");return(0,eT.UT)(Q.av.polls.showBySgid(t))},enabled:!!t},void 0===r?{}:r))},tl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options;return(0,F.useMutation)(function(e){return(0,eT.pC)(Q.av.polls.undo(e))},void 0===t?{}:t)},ts=function(){var e=(0,ti.pm)(),t=(0,F.useMutation)({mutationFn:function(e){return(0,eT.Cu)(Q.av.polls.exportCsv(e))},onSuccess:function(t){e.success((0,U.t)("export_member_csv.message",{email:t.email}))},onError:function(t){e.error(t.message)}});return{handleExportPollResponses:t.mutate,isExporting:t.isLoading}},tc=r(244289),tu=r(750287),td=r(115338),tf=r(853485),tp=r(867566),tm=r(194400),tb=function(e){return new Set(e.map(function(e){return e.value.trim()})).size===e.length},ty={value:""},th=function(e){var t,r,o,i,a,l=e.index,s=e.insert,c=e.fields,u=e.remove,d=e.disabled,f=(0,tu.dI)().listeners,p=(0,tr.y1)("enter",function(e){e.preventDefault(),s(l+1,ty)},{enabled:c.length<5,enableOnFormTags:["INPUT"]}),m=(0,tc.cl)({name:"options"}).errors,b=null==m||null==(a=m.options)||null==(i=a[l])||null==(o=i.value)?void 0:o.message;return(0,n.jsxs)("div",{className:eS()("group flex items-center justify-between md:pl-2",{"form-group--has-error":b}),children:[(0,n.jsx)(tp.h,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:"16-drag-handle",className:"invisible mr-1 hidden cursor-move group-hover:visible md:block"},f),r=r={children:(0,n.jsx)(z.JO,{type:"16-drag-handle",size:16})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),(0,n.jsx)(tn.l.Input,{ref:p,id:"poll_options-".concat(l),name:"poll_options.".concat(l,".value"),placeholder:(0,U.t)("tiptap.extensions.poll.option_placeholder",{number:l+1}),disabled:d}),!d&&(0,n.jsx)(tt.h,{className:eS()("border-primary invisible ml-2 rounded-full border",{"group-hover:visible":c.length>1}),name:"20-close",onClick:function(){c.length>1&&u(l)},iconSize:20,buttonSize:32,ariaLabel:(0,U.t)("close")})]})},tv=function(){var e=(0,tu.dI)().item;return(0,n.jsx)("div",{className:"h-auto w-full pl-8 pr-10",children:(0,n.jsx)("input",{disabled:!0,className:"border-primary bg-tertiary z-50 w-full rounded-md border-2 border-dashed px-4 py-[11px] leading-[1.25]",value:null==e?void 0:e.value})})},tg=function(e){var t,r=e.disabled,o=(0,tc.Dq)({name:"poll_options"}),i=o.insert,a=o.fields,l=o.remove,s=o.replace,c=(0,(0,tc.Gc)().watch)("poll_options"),u=a.map(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e,c[t])}),d=(0,tc.cl)({name:"poll_options"}).errors;return(0,n.jsxs)("div",{className:"md:pr-8",children:[(0,n.jsx)(tu.cm,{shouldUseKeyboardSensor:!1,items:u,onSort:s,lockedVerticalAxis:!0,distance:10,useDragHandle:!0,children:(0,n.jsxs)(tf.a,{gap:2,className:eS()({"mb-2":u.length>=5}),children:[u.map(function(e,t){return(0,n.jsx)(td.c,{tabIndex:-1,item:e,disabled:1===u.length||r,placeholder:tv,dataTestId:"poll-option-item",children:(0,n.jsx)(th,{index:t,insert:i,fields:u,remove:l,disabled:r},e.id)},e.id)}),!r&&u.length<5&&(0,n.jsxs)("button",{type:"button",tabIndex:0,className:"hover:bg-tertiary inline-flex w-fit cursor-pointer items-center space-x-1 rounded-md p-1 pr-1.5 md:ml-8",onClick:function(){return i(u.length,ty)},children:[(0,n.jsx)(z.JO,{type:"20-plus-v2",size:20}),(0,n.jsx)("div",{children:(0,n.jsx)(J.Z.LabelSm,{weight:"medium",children:(0,U.t)("tiptap.extensions.poll.add_option")})})]})]})}),d.poll_options&&(0,n.jsx)("p",{className:"form-group__error pl-5 md:pl-8",children:null==(t=d.poll_options.message)?void 0:t.toString()})]})},tj=r(40297),tx=function(){return(0,(0,tc.Gc)().watch)("enable_poll_duration")?(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(tj.x,{datePlaceholder:(0,U.t)("tiptap.extensions.poll.settings.cutoff_date_placeholder"),timePlaceholder:(0,U.t)("tiptap.extensions.poll.settings.cutoff_time_placeholder"),name:"closes_at",minDate:new Date})}):null},tO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,F.useMutation)(function(e){return(0,eT.Cu)(Q.av.polls.create(),e)},e)},tw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,F.useMutation)(function(e){return(0,eT.aU)(Q.av.polls.update(e.id),e)},e)},tS=r(870879),tP=function(e){var t=e.isEdit,r=e.isLoading,o=(0,Z.dd)();return(0,n.jsxs)("footer",{className:"border-primary flex justify-end gap-x-4 border-t px-5 py-4","data-testid":"poll-modal-footer",children:[(0,n.jsx)(tS.z,{onClick:o.remove,variant:"secondary",type:"button",children:(0,U.t)("tiptap.extensions.poll.cancel")}),(0,n.jsx)(tS.z,{variant:"circle",type:"submit",disabled:r,children:t?(0,U.t)("tiptap.extensions.poll.save"):(0,U.t)("tiptap.extensions.poll.insert")})]})},t_=function(e){var t,r=e.initialFocusRef,o=e.onComplete,i=e.isEdit,a=e.pollSgid,l=e.closeModal,s=(0,Z.dd)(),c=(0,ti.pm)().success,u=ta({sgid:a,options:{enabled:!!a&&i}}),d=u.data,f=u.isLoading,p=(0,F.useQueryClient)(),m=tO({onSuccess:function(e){o(e),s.remove()}}),b=m.mutate,y=m.isLoading,h=tw({onSuccess:function(e){c((0,U.t)("tiptap.extensions.poll.edit_success")),p.setQueryData(["poll",e.sgid],e),o(e),s.remove()}}),v=h.mutate,g=h.isLoading;if((0,tr.y1)("mod+enter",function(e){e.preventDefault(),e.stopPropagation()}),f)return(0,n.jsx)(e0.m,{});var j=!i||!(null==d||null==(t=d.results)?void 0:t.total_responses),x=i?{title:null==d?void 0:d.title,poll_options:null==d?void 0:d.poll_options,allow_members_to_view_results:null==d?void 0:d.allow_members_to_view_results,enable_poll_duration:!!(null==d?void 0:d.closes_at),closes_at:null==d?void 0:d.closes_at}:{title:"",poll_options:[ty],allow_members_to_view_results:!0,enable_poll_duration:!1,closes_at:null};return(0,n.jsxs)(tn.l,{onSubmit:function(e){if(e.enable_poll_duration||(e.closes_at=null),i&&d){var t,r;v((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={id:d.id},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}else b(e)},defaultValues:x,validationSchema:tm.Ry().shape({title:tm.Z_().required((0,U.t)("tiptap.extensions.poll.validation_errors.title_required")),poll_options:tm.IX().of(tm.Ry().shape({value:tm.Z_().required((0,U.t)("tiptap.extensions.poll.validation_errors.option_value_required"))})).min(2,(0,U.t)("tiptap.extensions.poll.validation_errors.options_minimum")).max(5,(0,U.t)("tiptap.extensions.poll.validation_errors.options_maximum",{maximum:5})).test("unique-option-values",(0,U.t)("tiptap.extensions.poll.validation_errors.options_unique"),tb).required((0,U.t)("tiptap.extensions.poll.validation_errors.options_minimum"))}),className:"h-full",formClassName:"h-full flex flex-col mb-0",children:[(0,n.jsxs)(q.u_.Header,{children:[(0,n.jsx)(q.u_.Title,{size:"sm",children:(0,U.t)(i?"tiptap.extensions.poll.edit":"tiptap.extensions.poll.title")}),(0,n.jsx)(q.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-4",children:(0,n.jsx)(q.u_.CloseButton,{onClick:l})})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-auto px-5 py-4 md:px-0",children:[(0,n.jsx)("div",{className:"md:px-8",children:(0,n.jsx)(tn.l.Item,{name:"title",label:(0,U.t)("tiptap.extensions.poll.ask_a_question"),placeholder:(0,U.t)("tiptap.extensions.poll.question_placeholder"),hideDescription:!0,hideBorder:!0,isFirstChild:!0,children:(0,n.jsx)(tn.l.Input,{ref:r})})}),(0,n.jsx)(tn.l.Item,{label:(0,U.t)("tiptap.extensions.poll.options"),hideBorder:!0,hideDescription:!0,tooltipText:j?"":(0,U.t)("tiptap.extensions.poll.cannot_edit_options"),labelWrapperClassName:"md:px-8",children:(0,n.jsx)(tg,{disabled:!j})}),(0,n.jsxs)("div",{className:"md:px-8",children:[(0,n.jsx)("div",{className:"border-primary mt-2 border-b"}),(0,n.jsx)(to.l,{fieldId:"",hideBorder:!0,label:(0,U.t)("tiptap.extensions.poll.settings.title")}),(0,n.jsx)(tn.l.Checkbox,{id:"allow_members_to_view_results",name:"allow_members_to_view_results",label:(0,U.t)("tiptap.extensions.poll.settings.allow_members_to_view_results"),description:"",className:"!mt-0"}),(0,n.jsx)(tn.l.Checkbox,{id:"enable_poll_duration",name:"enable_poll_duration",label:(0,U.t)("tiptap.extensions.poll.settings.poll_duration"),rules:{},description:"",className:"!mt-2"}),(0,n.jsx)(tx,{})]})]}),(0,n.jsx)(tP,{isEdit:!0,isLoading:g||y})]})},tk=function(e){var t=e.pollSgid,r=(0,Z.dd)(),i=(0,o.useRef)(null),a=(0,F.useQueryClient)();return(0,n.jsxs)(q.u_,{isOpen:r.visible,onClose:r.remove,initialFocus:i,children:[(0,n.jsx)(q.u_.Overlay,{}),(0,n.jsx)(q.u_.Content,{size:"lg",shouldCloseOnOutsideClick:!0,children:(0,n.jsx)(t_,{isEdit:!0,pollSgid:t,closeModal:r.remove,onComplete:function(){return a.removeQueries(["poll",t])},initialFocusRef:i})})]})},tD=r(99929),tE=r(325508),tA=r(789928),tC=r(555424),tN=r(788431),tT=r(527804);function tI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tM=function(e){var t,r,i=e.poll,a=e.canUndo,l=e.undo,s=i.results&&"total_responses"in i.results,c=(t=(0,o.useState)(),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tI(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tI(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1],f=function(){if(i.closes_at){var e=new Date(i.closes_at),t=new Date,r=(0,tD.j)(e,t),n=(0,tE.A)(e,t)%24,o=(0,tA.X)(e,t)%60,a=(0,tC.c)(e,t)%60;return r>0?(0,U.t)("tiptap.extensions.poll.remaining_days",{count:r}):n>0?(0,U.t)("tiptap.extensions.poll.remaining_hours",{count:n}):o>0?(0,U.t)("tiptap.extensions.poll.remaining_minutes",{count:o}):a>0?(0,U.t)("tiptap.extensions.poll.remaining_seconds",{count:a}):(0,U.t)("tiptap.extensions.poll.closed")}};return(0,o.useEffect)(function(){if(i.closes_at&&(d(f()),10>(0,tA.X)(new Date(i.closes_at),new Date))){var e=setInterval(function(){return d(f())},1e3);return function(){return clearInterval(e)}}},[]),(0,n.jsxs)("div",{className:"flex items-center space-x-1","data-testid":"poll-footer",children:[s&&(0,n.jsx)(J.Z.LabelSm,{weight:"regular","data-testid":"poll-total-votes",children:(0,U.t)("tiptap.extensions.poll.votes",{count:(null==(r=i.results)?void 0:r.total_responses)||0})}),s&&i.closes_at&&(0,n.jsx)("span",{className:"mx-px",children:(0,U.t)("separator_dot")}),i.closes_at&&(0,n.jsx)(tT.T,{className:"flex items-center",content:(0,U.t)("tiptap.extensions.poll.closes_at",{date:(0,tN.WU)(new Date(i.closes_at),"MMMM do, yyyy, h:mm a")}),dataTestId:"poll-closes-at",children:(0,n.jsx)(J.Z.LabelSm,{weight:"regular",children:u})}),a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"mx-px",children:(0,U.t)("separator_dot")}),(0,n.jsx)("button",{type:"button",className:"focus:bg-secondary hover:bg-secondary flex items-center rounded-sm px-0.5",onClick:l,children:(0,n.jsx)(J.Z.LabelSm,{weight:"medium",color:"text-link",children:(0,U.t)("tiptap.extensions.poll.undo")})})]})]})},tL=function(e){return e.checked?(0,n.jsx)("div",{className:"border-secondary bg-dark-primary-button my-0.5 flex size-5 items-center justify-center rounded-full",children:(0,n.jsx)("div",{className:"bg-primary size-2 rounded-full"})}):(0,n.jsx)("div",{className:"border-primary bg-primary my-0.5 size-5 rounded-full border"})},tR=r(895642),tF=r(895041),tU=function(e){var t,r=e.pollOptionId,i=e.pollId,a=e.pollValue,l=e.percentage,s=(0,Z.dd)(),c=(0,tF.m)(Q.av.polls.voteList({pollId:i,pollOptionId:r,params:{per_page:15}}),{enabled:!!i&&!!r},["poll-vote-list",i,r]),u=c.data,d=c.isLoading,f=c.fetchNextPage,p=c.hasNextPage,m=c.mapPages,b=(0,o.useMemo)(function(){return(0,C.flatten)(m(function(e){return e.records}))},[m]),y=null==u||null==(t=u.pages[0])?void 0:t.count;return(0,n.jsxs)(q.u_,{isOpen:s.visible,onClose:s.remove,children:[(0,n.jsx)(q.u_.Overlay,{}),(0,n.jsxs)(q.u_.Content,{shouldCloseOnOutsideClick:!0,children:[(0,n.jsxs)(q.u_.Header,{children:[(0,n.jsx)(q.u_.Title,{size:"sm",children:a}),(0,n.jsx)(q.u_.HeaderActions,{children:(0,n.jsx)(q.u_.CloseButton,{onClick:s.hide})})]}),!d&&(0,n.jsx)(J.Z.LabelSm,{weight:"regular",children:(0,n.jsxs)("div",{className:"space-x-1 px-5 pb-4 md:px-8",children:[(0,n.jsxs)("span",{children:[l,"%"]}),(0,n.jsx)("span",{children:(0,U.t)("separator_dot")}),(0,n.jsx)("span",{children:(0,U.t)("tiptap.extensions.poll.votes",{count:y})})]})}),(0,n.jsx)(q.u_.Body,{id:"post-likes-modal-".concat(i,"-").concat(r),className:"overflow-auto pb-4 pt-0 sm:max-h-80",children:d?(0,n.jsx)(e0.m,{}):(0,n.jsx)(eK.Z,{scrollThreshold:.75,next:f,hasMore:p||!1,loader:(0,n.jsx)(e0.m,{}),scrollableTarget:"post-likes-modal-".concat(i,"-").concat(r),dataLength:b.length,className:"flex flex-col space-y-4",children:b.map(function(e){return(0,n.jsx)(tR.N,{member:e.community_member,hideModal:s.hide},e.id)})})})]})]})},tz=function(e){var t,r,o,i,a=e.option,l=e.selectedOptionId,s=e.setSelectedOptionId,c=e.canRespond,u=e.poll,d=e.shouldShowResults,f=(0,F.useQueryClient)(),p=(0,Z.dd)(Z.gk.create(function(e){return(0,n.jsx)(tU,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})).show,m=(0,F.useMutation)(function(e){return(0,eT.Cu)(Q.av.polls.respond(u.id),{poll_option_id:e})},{onSuccess:function(e){(0,C.isEmpty)(e)||f.setQueryData(["poll",u.sgid],function(t){if(t){var r,n;return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t),n=n={community_member_response_option_id:a.id,results:e},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r}})}}),b=null!=(i=null==(o=u.results)||null==(r=o.detailed_results)||null==(t=r.find(function(e){return e.poll_option_id===a.id}))?void 0:t.percentage)?i:0,y=l===a.id,h="closed"===u.status,v=!c||h||!!l;return(0,n.jsxs)("div",{className:eS()("relative flex w-full items-start overflow-hidden rounded-md border p-3.5",{"hover:border-dark hover:bg-secondary focus:border-dark group":!v,"border-darkest":y,"border-primary":!y}),"data-testid":"poll-option",children:[(0,n.jsxs)("button",{type:"button",disabled:v,onClick:function(){c&&s(a.id),m.mutate(a.id)},className:"flex w-full items-start","data-testid":"select-poll-option",children:[d&&(0,n.jsx)("div",{className:"bg-tertiary absolute inset-y-0 left-0 -z-10 size-full",style:{width:"".concat(b,"%")}}),!h&&(0,n.jsx)(tL,{checked:y}),(0,n.jsx)("div",{className:"ml-3 mr-4 flex-1 text-left",children:(0,n.jsx)(J.Z.LabelMd,{weight:"regular",children:a.value})})]},a.id),d&&(0,n.jsxs)("div",{className:"flex shrink-0 items-center space-x-1","data-testid":"poll-option-info",children:[(0,n.jsxs)(J.Z.LabelSm,{weight:"regular",children:[b,"%"]}),(0,n.jsx)(tt.h,{ariaLabel:"",name:"16-chevron-right",iconSize:16,onClick:function(){p({pollId:u.id,pollOptionId:a.id,pollValue:a.value,percentage:b})},dataTestId:"open-poll-option-info"})]})]})};function t$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||tH(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tZ(e){return function(e){if(Array.isArray(e))return t$(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tH(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tH(e,t){if(e){if("string"==typeof e)return t$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t$(e,t)}}var tq=function(e){var t=e.poll,r=e.isEditable,i=e.deleteNode,a=(0,em.wh)().currentCommunityMember,l=(0,em.L2)().data,s=(0,e9.Y_)(l),c=ts(),u=c.handleExportPollResponses,d=c.isExporting,f=(0,Z.dd)(Z.gk.create(function(e){return(0,n.jsx)(tk,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})),p=tB((0,o.useState)(!t.community_member_response_option_id&&!!a),2),m=p[0],b=p[1],y=tB((0,o.useState)(t.community_member_response_option_id),2),h=y[0],v=y[1],g=tB((0,o.useState)(0),2),j=g[0],x=g[1],O=!!(t.results&&"detailed_results"in t.results),w=tl();(0,o.useEffect)(function(){h&&(0,C.delay)(function(){b(!1)},15e3)},[h]);var S=!!(h&&m&&j<1);return(0,n.jsx)(e7.T,{children:(0,n.jsxs)("div",{className:"border-primary space-y-4 rounded-md border px-6 py-5","data-testid":"poll-wrapper",children:[(0,n.jsxs)("div",{className:"text-darkest flex items-start justify-between","data-testid":"poll-header",children:[(0,n.jsx)(J.Z.TitleSm,{weight:"semibold",children:t.title}),(r||s)&&(0,n.jsx)(te.Lt,{direction:"bottom-end",linkType:"button",button:(0,n.jsx)("div",{children:(0,n.jsx)(te.Lt.MenuButton,{children:(0,n.jsx)(tt.h,{ariaLabel:(0,U.t)("options_dropdown"),name:"16-menu-dots-horizontal"})})}),options:tZ(r?[{label:(0,U.t)("tiptap.extensions.poll.edit"),onClick:function(){return f.show({pollSgid:t.sgid})},value:"edit"},{label:(0,U.t)("tiptap.extensions.poll.remove"),value:"remove",onClick:function(){return i()}}]:[]).concat(tZ(s?[{label:(0,U.t)("tiptap.extensions.poll.export_responses_csv"),value:"export_csv",onClick:function(){return u(t.id)},isDisabled:d}]:[])),dataTestId:"poll-".concat(t.id,"-").concat(r?"edit":"view","-actions")})]}),(0,n.jsx)("div",{className:"space-y-3","data-testid":"poll-options",children:t.poll_options.map(function(e){return(0,n.jsx)(tz,{poll:t,option:e,canRespond:m,selectedOptionId:h,setSelectedOptionId:v,shouldShowResults:O},e.id)})}),(0,n.jsx)(tM,{poll:t,canUndo:S,undo:function(){v(void 0),b(!0),x(j+1),w.mutate(t.id)}})]})})},tV=function(e){var t,r,o=e.node,i=e.editor,a=e.deleteNode,l=ta({sgid:null==(t=o.attrs)?void 0:t.sgid,options:{enabled:!!(null==(r=o.attrs)?void 0:r.sgid)}}),s=l.data,c=l.isLoading;return(0,n.jsx)(A.T5,{as:"div",children:c||!s?(0,n.jsx)("div",{className:"my-4",children:(0,n.jsx)(e0.m,{})}):(0,n.jsx)(tq,{deleteNode:a,isEditable:i.isEditable,poll:s})})},tW=R.NB.create({name:"poll",group:"block",atom:!0,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("sgid")},renderHTML:function(e){return e.sgid?{sgid:e.sgid}:{}}}}},parseHTML:function(){return[{tag:"polls-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["polls-react",(0,R.P1)(t)]},addNodeView:function(){return(0,A.fW)(tV)}}),tJ=function(e){var t=e.editor,r=e.range,i=e.addToLocalSgidToObjectMap,a=(0,Z.dd)(),l=(0,o.useRef)(null);return(0,n.jsxs)(q.u_,{isOpen:a.visible,onClose:a.remove,initialFocus:l,className:"h-full max-h-full overflow-visible",children:[(0,n.jsx)(q.u_.Overlay,{}),(0,n.jsx)(q.u_.Content,{size:"lg",shouldCloseOnOutsideClick:!0,children:(0,n.jsx)(t_,{closeModal:a.remove,onComplete:function(e){t.chain().focus().insertContentAt(r,[{type:"poll",attrs:{sgid:e.sgid}},{type:"hardBreak"}]).run(),i({sgid:e.sgid,object:e})},initialFocusRef:l})})]})},tG=r(181159);function tK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tQ=function(e){var t=e.types,r=e.node;return r&&(Array.isArray(t)&&t.includes(r.type)||r.type===t)},tX=R.hj.create({name:"trailingNode",addOptions:function(){return{node:"paragraph",notAfter:["paragraph"]}},addProseMirrorPlugins:function(){var e=this,t=new tG.H$(this.name),r=Object.entries(this.editor.schema.nodes).map(function(e){return(function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return tK(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tK(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1]}).filter(function(t){return e.options.notAfter.includes(t.name)});return[new tG.Sy({key:t,appendTransaction:function(r,n,o){var i=o.doc,a=o.tr,l=o.schema,s=t.getState(o),c=i.content.size,u=l.nodes[e.options.node];if(s)return a.insert(c,u.create())},state:{init:function(e,t){var n=t.tr.doc.lastChild;return n&&!tQ({node:n,types:r})},apply:function(e,t){return e.docChanged?!tQ({node:e.doc.lastChild,types:r}):t}}})]}}),tY=r(682240),t0=r.n(tY),t1=r(241394),t2=r(98299),t3=r(160373),t5=r(512806),t8=r(798158),t6=r(455155),t4=r(720495),t9=r(429538),t7=r(19693),re=r(227291);function rt(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var rr=function(){var e=(0,t7.b)(),t=function(){var e;return(e=function(){return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,Promise.all(Object.keys(r).map(function(e){return t9.ZP.hide(e)}))];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){rt(i,n,o,a,l,"next",e)}function l(e){rt(i,n,o,a,l,"throw",e)}a(void 0)})})()},r=(0,o.useContext)(t9.ZP.NiceModalContext);return{openUpgradeModal:function(){e.show({feature:re.Kj,onSuccess:t}).catch(function(e){console.error("Error showing Community AI Modal:",e)})}}},rn=function(){var e,t=(0,em.wh)(),r=t.currentCommunityMember,n=t.currentCommunity,o=t.isLoading;return{shouldShowCopilot:!o&&!!(null==r||null==(e=r.policies)?void 0:e.can_use_copilot),shouldShowPlanUpgradeModal:!o&&!(null==n?void 0:n.community_ai_feature_flag_enabled)&&!(null==n?void 0:n.content_copilot_ui_enabled)&&(null==r?void 0:r.is_admin)}},ro=function(e){var t=e.editor,r=rr().openUpgradeModal,o=rn().shouldShowPlanUpgradeModal,i=function(){var e=t.state,r=e.selection.$to.after(),n=e.selection.$from.pos,o=e.selection.$to.pos;t.chain().focus().setHighlight({color:"#B3D8FF"}).run(),t.commands.insertContentAt(r,{type:"aicopilot",attrs:{placeholder:(0,U.t)("tiptap.extensions.ai_copilot.input.edit_placeholder"),range:{from:n,to:o}}})};return(0,n.jsx)("button",{type:"button",onClick:function(){o?r():i()},className:"text-dark hover:bg-secondary rounded-md p-1.5 pr-2 transition-colors",children:(0,n.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(z.JO,{type:"16-ask-ai-gradient",size:16}),(0,n.jsx)(J.Z.LabelSm,{weight:"medium",color:"from-ai-start to-ai-end bg-gradient-to-r bg-clip-text text-transparent",children:(0,U.t)("tiptap.bubble_menu.ai_copilot")})]})})},ri=function(e,t){return(0,n.jsx)(n.Fragment,{children:t.map(function(t){return(0,n.jsx)(t2.p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({isActive:(0,C.isFunction)(t.isActiveFn)?t.isActiveFn():e.isActive(t.name)},t),t.name)})})},ra=function(e){var t=e.editor,r=e.shouldShowCopilot,o=e.showListsInTextModifierMenu,i=void 0!==o&&o,a=e.placement,l=e.headingLevels,s=e.allowBubbleMenuOverflow,c=(0,t8.K)(),u=(0,t1.ww)().isAdminUsageContext,d=(0,B.p)(),f=(null==d?void 0:d.isWithinEmailEditor)||!1,p=(0,t5.k)(void 0===a?"top":a,void 0===s||s),m=[{name:"bold",iconType:"20-character-bold",label:(0,U.t)("tiptap.bubble_menu.bold"),onClick:function(){return t.chain().focus().toggleBold().run()}},{name:"italic",iconType:"20-character-italic",label:(0,U.t)("tiptap.bubble_menu.italic"),onClick:function(){return t.chain().focus().toggleItalic().run()}},{name:"h1",iconType:"16-heading1",label:(0,U.t)("tiptap.bubble_menu.h1"),onClick:function(){return t.chain().focus().toggleHeading({level:1}).run()},isActiveFn:function(){return t.isActive("heading",{level:1})}},{name:"h2",iconType:"20-character-h2",label:(0,U.t)("tiptap.bubble_menu.h2"),onClick:function(){return t.chain().focus().toggleHeading({level:2}).run()},isActiveFn:function(){return t.isActive("heading",{level:2})}},{name:"h3",iconType:"20-character-h3",label:(0,U.t)("tiptap.bubble_menu.h3"),onClick:function(){return t.chain().focus().toggleHeading({level:3}).run()},isActiveFn:function(){return t.isActive("heading",{level:3})}},{name:"strike",iconType:"20-character-strike",label:(0,U.t)("tiptap.bubble_menu.strike"),onClick:function(){return t.chain().focus().toggleStrike().run()}},{name:"underline",iconType:"20-character-underline",label:(0,U.t)("tiptap.bubble_menu.underline"),onClick:function(){return t.chain().focus().toggleUnderline().run()}},{name:"link",iconType:"20-character-link",label:(0,U.t)("tiptap.bubble_menu.link"),onClick:function(){return c.show({editor:t,isAdminUsageContext:u,isEmailEditor:f})}},{name:"bullet_list",iconType:"16-editor-ul",label:(0,U.t)("tiptap.bubble_menu.bullet_list"),onClick:function(){return t.chain().focus().toggleBulletList().run()}},{name:"ordered_list",iconType:"16-editor-ol",label:(0,U.t)("tiptap.bubble_menu.ordered_list"),onClick:function(){return t.chain().focus().toggleOrderedList().run()}}].filter(function(e){return("h1"!==e.name||!!l.includes(1))&&("h2"!==e.name||!!l.includes(2))&&("h3"!==e.name||!!l.includes(3))&&("bullet_list"!==e.name||!!i)&&!("ordered_list"===e.name&&!i)}),b=[{name:"align-left",iconType:"20-alignment-left",label:(0,U.t)("settings.emails.builder.align_left"),onClick:function(){return t.chain().focus().setTextAlign(t6.$.LEFT).run()},isActiveFn:function(){return(0,t4.K)(t,t6.$.LEFT)}},{name:"align-center",iconType:"20-alignment-center",label:(0,U.t)("settings.emails.builder.align_center"),onClick:function(){return t.chain().focus().setTextAlign(t6.$.CENTER).run()},isActiveFn:function(){return(0,t4.K)(t,t6.$.CENTER)}},{name:"align-right",iconType:"20-alignment-right",label:(0,U.t)("settings.emails.builder.align_right"),onClick:function(){return t.chain().focus().setTextAlign(t6.$.RIGHT).run()},isActiveFn:function(){return(0,t4.K)(t,t6.$.RIGHT)}}];return(0,n.jsx)(A.NM,{editor:t,tippyOptions:p,shouldShow:t3.E,children:(0,n.jsxs)("div",{className:"bg-primary border-primary divide-primary flex gap-1 divide-x rounded-md border p-1 shadow-sm",children:[void 0!==r&&r&&(0,n.jsx)(ro,{editor:t}),(0,n.jsx)("div",{children:ri(t,m)}),f&&(0,n.jsx)("div",{className:"flex items-center justify-center pl-2",children:ri(t,b)})]})})};function rl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}ra.propTypes={editor:t0().object.isRequired,shouldShowCopilot:t0().bool,showListsInTextModifierMenu:t0().bool,placement:t0().oneOf(["top","bottom"]),headingLevels:t0().arrayOf(t0().number),allowBubbleMenuOverflow:t0().bool};var rs=(0,o.createContext)({});rs.displayName="AiBlockContext";var rc=function(){return(0,o.useContext)(rs)},ru=function(e){var t,r=e.children,i=e.editor,a=e.node,l=e.getPos,s=e.deleteNode,c=a.attrs.range,u=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rl(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rl(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1];return(0,n.jsx)(rs.Provider,{value:{editor:i,node:a,getPos:l,deleteNode:s,isLoadingResponse:d,setIsLoadingResponse:f,cleanupNode:function(){c&&(i.commands.setTextSelection({from:0,to:i.state.doc.content.size}),i.chain().focus().unsetHighlight().run()),i.commands.setTextSelection(l()+1),s()}},children:r})};ru.propTypes={children:t0().element.isRequired};var rd=function(e){var t=e.children,r=(0,o.useRef)(null),i=rc(),a=i.isLoadingResponse,l=i.cleanupNode;return(0,tr.y1)("esc",l,{enableOnFormTags:["INPUT"],enableOnContentEditable:!0,enabled:!a}),(0,o.useEffect)(function(){var e=function(e){if(a){e.preventDefault(),e.stopPropagation();return}r.current&&!r.current.contains(e.target)&&l()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[a,l]),(0,n.jsx)("div",{ref:r,children:t})},rf=r(308540),rp=(0,o.forwardRef)(function(e,t){var r=e.className,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["className"]);return(0,n.jsx)(rf.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:t,autoComplete:"off",minRows:1,maxRows:3,type:"text",className:eS()("text-dark placeholder:text-default w-full resize-none border-0 bg-transparent p-0 leading-5 outline-none focus:ring-0",r)},o))});rp.displayName="Input";var rm=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:eS()("bg-primary flex items-start gap-3 rounded-md px-4 py-2.5 shadow-md",r),children:t})};rm.AiIcon=function(){return(0,n.jsx)("span",{className:"flex items-start",children:(0,n.jsx)(z.JO,{type:"20-ask-ai-gradient",size:20,className:"size-5"})})},rm.Input=rp,rm.LoadingIcon=function(){return(0,n.jsx)("span",{className:"flex animate-spin items-center overflow-hidden",children:(0,n.jsx)(z.JO,{type:"20-stardust-gradient",size:20,useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0})})},rm.Text=function(e){var t,r,o=e.hasGradient,i=e.children;return(0,n.jsx)(J.Z.LabelMd,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({weight:"medium"},o&&{color:"text-transparent bg-clip-text bg-gradient-to-r from-ai-start to-ai-end"}),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},rm.EditOptions=function(e){var t=e.options,r=e.onClick,i=e.activeIndex,a=e.setActiveIndex,l=e.shouldShowEnterIcon,s=(0,o.useRef)(null);return(0,o.useEffect)(function(){s.current&&s.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[i]),(0,n.jsxs)("div",{className:"bg-primary text-dark border-primary absolute top-full mt-1 max-h-80 w-80 overflow-auto rounded-md border p-2 shadow-xl",children:[(0,n.jsx)("div",{className:"px-4 py-0.5",children:(0,n.jsx)(J.Z.LabelXxs,{color:"text-light",weight:"semibold",children:(0,U.t)("tiptap.extensions.ai_copilot.prompt_options.title")})}),t.map(function(e,t){var o=function(){return a(t)};return(0,n.jsxs)("button",{ref:t===i?s:null,type:"button",onMouseOver:o,onFocus:o,className:eS()("text-default hover:text-dark flex w-full items-center gap-2 rounded-md px-4 py-2 text-left text-sm font-normal transition-colors",{"bg-secondary":t===i}),onClick:function(){return r({item:e,index:t})},children:[(0,n.jsx)("span",{className:"flex items-center",children:(0,n.jsx)(z.JO,{type:"16-thunder",className:"!h-4 !w-4",size:16})}),(0,n.jsx)("span",{className:"text-dark",children:e.label}),t===i&&l&&(0,n.jsx)("span",{className:"ml-auto flex items-center",children:(0,n.jsx)(z.JO,{type:"16-arrow-enter",className:"!h-4 !w-4",size:16})})]},e.label)})]})};var rb=function(){return(0,n.jsxs)(rm,{children:[(0,n.jsx)(rm.LoadingIcon,{}),(0,n.jsx)(rm.Text,{hasGradient:!0,children:(0,U.t)("tiptap.extensions.ai_copilot.input.generating")})]})},ry="help_write",rh=r(151390);function rv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rg(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var rj=function(){var e,t=(e=(0,I.k)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return rv(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rv(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1];return{createCompletion:function(e){var t,r=e.type,o=e.previous_text,i=void 0===o?"":o,a=e.user_prompt,l=e.title,s=e.onOpen,c=e.onMessage,u=e.onClose;return(t=function(){return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return n(!0),[4,(0,rh.L)("/internal_api/copilot/completions",{method:"POST",body:JSON.stringify({context:{title:l,previous_text:i,type:r,user_prompt:a}}),headers:{Accept:"text/event-stream","Content-Type":"application/json"},onopen:function(e){e.ok&&200===e.status?s():e.status>=400&&e.status<500&&429!==e.status&&n(!1)},onmessage:function(e){c(JSON.parse(e.data).content)},onclose:function(){n(!1),u()},onerror:function(e){throw n(!1),e}})];case 1:return e.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){rg(i,n,o,a,l,"next",e)}function l(e){rg(i,n,o,a,l,"throw",e)}a(void 0)})})()},isLoading:r}},rx=r(426371),rO=r.n(rx),rw=r(786639),rS=function(e){var t=e.isLoading,r=(0,em.Zh)().setIsSubmitEnabled,n=void 0===r?rO():r,i=(0,rw.D)().setIsSubmitEnabled,a=void 0===i?rO():i;(0,o.useEffect)(function(){n(!t),a(!t)},[t,n,a])},rP=r(257009),r_=[{label:(0,U.t)("tiptap.extensions.ai_copilot.prompt_options.completions.suggest_ideas.label"),value:"suggest_ideas"},{label:(0,U.t)("tiptap.extensions.ai_copilot.prompt_options.completions.outline.label"),value:"outline"},{label:(0,U.t)("tiptap.extensions.ai_copilot.prompt_options.completions.paragraph.label"),value:"paragraph"},{label:(0,U.t)("tiptap.extensions.ai_copilot.prompt_options.completions.conclusion.label"),value:"conclusion"}],rk=function(e){var t=e.onClick,r=(0,rP.t)({optionsCount:r_.length,onEnter:function(e){t(r_[e].value,(0,U.t)("tiptap.extensions.ai_copilot.prompt_options.completions.".concat(r_[e].value,".prompt_prefix")))}}),o=r.activeIndex,i=r.setActiveIndex;return(0,n.jsx)(rm.EditOptions,{activeIndex:o,setActiveIndex:i,onClick:function(e){var r=e.item;return t(r.value,r.label)},options:r_,shouldShowEnterIcon:!0})};function rD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rD(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rA=function(){var e,t,r=rE((0,o.useState)(""),2),i=r[0],a=r[1],l=rE((0,o.useState)(!1),2),s=l[0],c=l[1],u=(0,o.useRef)(null),d=rj(),f=d.createCompletion,p=d.isLoading,m=(0,B.p)().aiCopilotTitle,b=rc(),y=b.editor,h=b.node,v=b.getPos,g=b.setIsLoadingResponse,j=rE((0,o.useState)(ry),2),x=j[0],O=j[1];rS({isLoading:p}),(0,o.useEffect)(function(){var e;null==(e=u.current)||e.focus()},[]),(0,o.useEffect)(function(){g(p)},[p,g]);var w=function(e){e.stopPropagation(),e.preventDefault(),i&&!s&&(c(!0),f({type:x,title:m,user_prompt:i,previous_text:y.state.doc.textBetween(0,v(),"\n",". "),onMessage:P,onOpen:_,onClose:S}))},S=function(){var e;O(ry),a(""),c(!1),null==(e=u.current)||e.focus()},P=function(e){y.commands.insertContent(e),k()},_=function(){y.commands.insertContentAt(v(),"\n"),a("")},k=function(){document.querySelectorAll(["[data-ai-scrollable]"]).forEach(function(e){e.scrollTop=e.scrollTop+24})};return p?(0,n.jsx)(rb,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("form",{onSubmit:w,children:(0,n.jsxs)(rm,{children:[(0,n.jsx)(rm.AiIcon,{}),(0,n.jsx)(rm.Input,{ref:u,id:"input-".concat(null==(e=h.attrs)?void 0:e.id),placeholder:null==(t=h.attrs)?void 0:t.placeholder,onChange:function(e){return a(e.target.value)},value:i,onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),w(e))}})]})}),!i&&(0,n.jsx)(rk,{onClick:function(e,t){O(e),a(t),u.current.focus()}})]})},rC=r(62263);function rN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rT(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var rI=function(){var e,t=(e=(0,I.k)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return rN(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rN(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1];return{createEdition:function(e){var t,r=e.type,o=e.selected_text,i=void 0===o?"":o,a=e.user_prompt,l=e.onOpen,s=e.onMessage,c=e.onClose;return(t=function(){return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return n(!0),[4,(0,rh.L)("/internal_api/copilot/editions",{method:"POST",body:JSON.stringify({context:{selected_text:i,type:r,user_prompt:a}}),headers:{Accept:"text/event-stream","Content-Type":"application/json"},onopen:function(e){e.ok&&200===e.status?l():e.status>=400&&e.status<500&&429!==e.status&&n(!1)},onmessage:function(e){s(JSON.parse(e.data).content)},onclose:function(){n(!1),c()},onerror:function(){n(!1)}})];case 1:return e.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){rT(i,n,o,a,l,"next",e)}function l(e){rT(i,n,o,a,l,"throw",e)}a(void 0)})})()},isLoading:r}},rM=function(e){var t=e.onClick,r="tiptap.extensions.ai_copilot.prompt_options.editions",o=[{label:(0,U.t)("".concat(r,".improve_writing")),value:"improve_writing"},{label:(0,U.t)("".concat(r,".fix_text")),value:"fix_text"},{label:(0,U.t)("".concat(r,".make_shorter")),value:"make_shorter"},{label:(0,U.t)("".concat(r,".make_longer")),value:"make_longer"},{label:(0,U.t)("".concat(r,".simplify_language")),value:"simplify_language"},{label:(0,U.t)("".concat(r,".summarize")),value:"summarize"},{label:(0,U.t)("".concat(r,".explain")),value:"explain"},{label:(0,U.t)("".concat(r,".translate_spanish")),value:"translate"},{label:(0,U.t)("".concat(r,".translate_french")),value:"translate"},{label:(0,U.t)("".concat(r,".translate_dutch")),value:"translate"},{label:(0,U.t)("".concat(r,".translate_italian")),value:"translate"},{label:(0,U.t)("".concat(r,".translate_portuguese")),value:"translate"},{label:(0,U.t)("".concat(r,".translate_english")),value:"translate"}],i=(0,rP.t)({optionsCount:o.length,onEnter:function(e){t(o[e].value,o[e].label)}}),a=i.activeIndex,l=i.setActiveIndex;return(0,n.jsx)(rm.EditOptions,{activeIndex:a,setActiveIndex:l,onClick:function(e){var r=e.item;return t(r.value,r.label)},options:o,shouldShowEnterIcon:!0})},rL=function(e){var t=e.promptResponse,r=rc(),o=r.node,i=r.editor,a=r.cleanupNode,l=o.attrs.range,s=i.state.selection.$to.after(),c=[{label:(0,U.t)("tiptap.replace_selection"),value:"replace",onClick:function(){i.commands.setTextSelection(l),i.commands.insertContentAt(l,t),a()}},{label:(0,U.t)("tiptap.insert_bellow"),value:"insert_below",onClick:function(){i.commands.insertContentAt(s,t),a()}}],u=function(e){(0,C.isFunction)(c[e].onClick)&&c[e].onClick()},d=(0,rP.t)({optionsCount:c.length,onEnter:function(e){u(e)}}),f=d.activeIndex,p=d.setActiveIndex;return(0,n.jsx)(rm.EditOptions,{activeIndex:f,setActiveIndex:p,onClick:function(e){return u(e.index)},options:c,shouldShowEnterIcon:!0})};function rR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rR(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rU=function(){var e,t,r=(0,o.useRef)(null),i=rF((0,o.useState)(""),2),a=i[0],l=i[1],s=rF((0,o.useState)(!1),2),c=s[0],u=s[1],d=rI(),f=d.createEdition,p=d.isLoading,m=rF((0,o.useState)(""),2),b=m[0],y=m[1],h=rF((0,o.useState)(""),2),v=h[0],g=h[1],j=rc(),x=j.node,O=j.editor,w=x.attrs.range,S=O.state.doc.textBetween(w.from,w.to,"\n",". "),P=rF((0,o.useState)(!1),2),_=P[0],k=P[1];rS({isLoading:p}),(0,o.useEffect)(function(){!p&&b&&k(!0)},[p,b]),(0,o.useEffect)(function(){var e;null==(e=r.current)||e.focus()},[]),(0,o.useEffect)(function(){a&&A()},[v]);var D=function(e){y(function(t){return t+e})},E=function(){l(""),g(""),u(!1),(0,C.defer)(function(){var e;null==(e=r.current)||e.focus()})},A=function(){a&&!c&&(y(""),u(!0),f({type:v||"improve_writing",user_prompt:a,selected_text:S,onMessage:D,onOpen:function(){l("")},onClose:E}))},N=function(e){e.stopPropagation(),e.preventDefault(),A()};return(0,n.jsxs)("div",{className:"bg-primary rounded-md",children:[b&&(0,n.jsx)("div",{className:"select-none p-4",children:(0,n.jsx)(rC.w,{content:b})}),p?(0,n.jsx)(rb,{}):(0,n.jsx)("form",{onSubmit:N,children:(0,n.jsxs)(rm,{children:[(0,n.jsx)(rm.AiIcon,{}),(0,n.jsx)(rm.Input,{ref:r,id:"input-".concat(null==(e=x.attrs)?void 0:e.id),placeholder:null==(t=x.attrs)?void 0:t.placeholder,onChange:function(e){return l(e.target.value)},value:a,onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N(e))}})]})}),!a&&!b&&(0,n.jsx)(rM,{onClick:function(e,t){l(t),g(e)}}),_&&!a&&(0,n.jsx)(rL,{promptResponse:b})]})},rz=function(e){var t=e.editor,r=e.node,o=e.getPos,i=e.deleteNode,a=r.attrs.range;return rn().shouldShowCopilot?(0,n.jsx)(ru,{editor:t,node:r,getPos:o,deleteNode:i,children:(0,n.jsx)(A.T5,{children:(0,n.jsx)(rd,{children:(0,n.jsx)("div",{className:"mx-auto my-4 flex items-center justify-center",children:(0,n.jsx)("div",{className:"from-ai-start to-ai-end relative z-10 w-full rounded-md bg-gradient-to-r p-0.5 shadow-xl",children:a?(0,n.jsx)(rU,{}):(0,n.jsx)(rA,{})})})})})}):null},r$=R.NB.create({name:"aicopilot",group:"block",selectable:!1,atom:!0,renderHTML:function(e){return["aicopilot",e.HTMLAttributes,0]},addAttributes:function(){return{placeholder:{default:null},id:{default:(0,C.random)()},range:{default:null},type:{default:"completion"}}},parseHTML:function(){return[{tag:"aicopilot"}]},addNodeView:function(){return(0,A.fW)(rz)},addCommands:function(){return{addAiCopilotNode:function(){return function(e){return e.commands.insertContent({type:"aicopilot",attrs:{placeholder:(0,U.t)("tiptap.extensions.ai_copilot.input.placeholder")}})}}}}}),rB=r(567386),rZ=r(974617),rH=function(e){var t,r=e.node,o=e.editor.isEditable,i=(0,B.p)()||{},a=i.sgidToObjectMap,l=i.localSgidToObjectMap,s=i.addToLocalSgidToObjectMap,c=null==r||null==(t=r.attrs)?void 0:t.sgid,u=a[c]||l[c];return(0,F.useQuery)({queryKey:[Q.av.richTextFields.fetchOembed({sgid:c})],enabled:!u&&o,retry:!1,retryOnMount:!1,onSuccess:function(e){null==s||s({sgid:c,object:e})}}).isLoading?(0,n.jsx)(A.T5,{as:"div",children:(0,n.jsx)(z.JO,{type:"loader",size:16})}):u?!u.html&&u.url?(0,n.jsx)(A.T5,{as:"div",children:(0,n.jsxs)("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"bg-secondary hover:bg-tertiary border-primary group relative inline-flex max-w-full items-center justify-between space-x-4 break-all rounded-sm border px-3 py-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsx)(J.Z.LabelSm,{weight:"semibold",children:(0,C.truncate)(u.title,{length:100})})}),u.description&&(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(J.Z.LabelSm,{children:(0,C.truncate)(u.description,{length:100})})}),(0,n.jsx)("div",{children:(0,n.jsx)(J.Z.LabelSm,{color:"text-light",children:(0,C.truncate)(u.url,{length:100})})})]}),u.thumbnail_url&&(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)("img",{loading:"lazy",src:u.thumbnail_url,alt:u.title,className:"size-16 rounded-sm object-contain"})})]})}):(0,n.jsx)(A.T5,{as:"div",children:(0,n.jsx)(rZ.Z,{className:"overflow-auto",html:u.html})}):null},rq=R.NB.create({name:"embed",group:"block",atom:!0,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("sgid")},renderHTML:function(e){return e.sgid?{sgid:e.sgid}:{}}}}},parseHTML:function(){return[{tag:"embed-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["embed-react",(0,R.P1)(t)]},addNodeView:function(){return(0,A.fW)(rH)}}),rV=r(320765),rW=r(867550),rJ=function(e){var t=e.isActive,r=e.onClick,o=e.iconType;return(0,n.jsx)("button",{type:"button",onClick:r,className:eS()("text-feature-dark bg-text-editor-modifier hover:bg-text-editor-modifier-hover rounded-sm p-1",{"bg-text-editor-modifier-active":t}),children:(0,n.jsx)(e_.l,{type:o,iconSize:16})})},rG=r(301788),rK=function(e){var t=e.editor,r=e.node,o=e.updateAttributes,i=e.deleteNode,a=r.attrs,l=a.use_intrinsic_size&&"left"===a.alignment,s="right"===a.alignment,c=1===a.width_ratio,u=a.use_intrinsic_size&&"center"===a.alignment,d=(0,rG.v)();return(0,n.jsx)("div",{className:(0,K.A)("invisible absolute left-0 top-0 inline-flex w-full -translate-y-full items-center pb-1 hover:visible group-hover:visible group-active:visible",{"justify-start":l,"justify-center":u,"justify-end":s||c},{"justify-end":!l&&!s&&!c&&!u}),children:(0,n.jsxs)("div",{className:"bg-text-editor-modifier flex rounded-md p-1 text-sm",children:[(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(rJ,{onClick:function(){o({alignment:"left",width_ratio:0,use_intrinsic_size:!0})},isActive:l,iconType:"16-image-left"}),(0,n.jsx)(rJ,{onClick:function(){o({alignment:"center",width_ratio:0,use_intrinsic_size:!0})},isActive:u,iconType:"16-image-centre"}),(0,n.jsx)(rJ,{onClick:function(){o({alignment:null,width_ratio:1,use_intrinsic_size:!0})},isActive:c,iconType:"16-image-full-width"}),(0,n.jsx)(rJ,{onClick:function(){o({alignment:"right",width_ratio:0,use_intrinsic_size:!0})},isActive:s,iconType:"16-image-right"})]}),(0,n.jsx)("span",{className:"text-default m-1 inline-block w-px self-stretch bg-current","aria-hidden":!0}),(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(rJ,{onClick:function(){return d.show({editor:t})},isActive:!!a.href,iconType:"16-interface-link"}),(0,n.jsx)(rJ,{onClick:i,isActive:!1,iconType:"16-trash"})]})]})})};function rQ(e){var t=e.href,r=e.isEditable,o=e.children;return!t||void 0!==r&&r?(0,n.jsx)(n.Fragment,{children:o}):(0,n.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:o})}var rX=function(e){var t=e.attachmentMeta,r=e.node,o=e.editor,i=e.updateAttributes,a=e.deleteNode,l=r.attrs,s=l.alignment,c=l.width_ratio,u=l.href,d=1===c,f=o.isEditable;return(0,n.jsx)(A.T5,{as:"div",children:(0,n.jsx)("div",{className:"group relative",children:(0,n.jsx)("div",{className:(0,K.A)("flex",{"justify-center":"center"===s,"justify-start":"left"===s,"justify-end":"right"===s}),children:(0,n.jsxs)("div",{className:(0,K.A)("relative inline-block",{grow:d}),children:[(0,n.jsx)(rQ,{href:u,isEditable:f,children:(0,n.jsx)("img",{loading:"lazy",alt:"",className:(0,K.A)("max-w-full",{"w-full":d}),src:t.url})}),f&&(0,n.jsx)(rK,{editor:o,node:r,deleteNode:a,updateAttributes:i})]})})})})},rY=r(422118),r0=function(e){var t=e.node,r=e.updateAttributes;return(0,n.jsx)("div",{className:"invisible absolute right-0 top-0 flex w-full -translate-y-full items-center justify-end pb-1 group-hover:visible",children:(0,n.jsxs)("div",{className:"bg-text-editor-modifier space-x-1 overflow-hidden rounded-md p-1 text-sm",children:[(0,n.jsx)(rJ,{onClick:function(){r({alignment:"left",width_ratio:.5})},isActive:"left"==t.attrs.alignment,iconType:"16-image-left"}),(0,n.jsx)(rJ,{onClick:function(){r({alignment:"center",width_ratio:1})},isActive:"center"==t.attrs.alignment,iconType:"16-image-centre"})]})})},r1=function(e){var t,r,o,i=e.node,a=e.editor,l=e.attachmentMeta,s=e.onClickOpenAttachmentGallery,c=e.updateAttributes,u=e.deleteNode,d=(null!=(o=(0,B.p)())?o:{}).isWithinEmailEditor,f=a.isEditable,p=(0,X.c)(l.content_type),m=f&&!d,b=f&&d,y=1;i.attrs.width_ratio?y=i.attrs.width_ratio:i.attrs.width&&(y="100%"===i.attrs.width?1:.5);var h="".concat(100*y,"%"),v=null==l||null==(t=l.metadata)?void 0:t.width,g=null==l||null==(r=l.metadata)?void 0:r.height,j=v&&g?"".concat(v," / ").concat(g):void 0;return(0,n.jsxs)("div",{style:{width:h},className:(0,K.A)("group relative",{"mx-auto":"center"===i.attrs.alignment}),children:[(0,n.jsx)("button",{type:"button",className:"w-full",onClick:s,"aria-label":(0,U.t)("tiptap.extensions.image_preview.view_attachment"),disabled:!f&&!p,children:(0,n.jsx)(rY.Q,{alt:"",src:l.url,className:(0,K.A)("w-full",{"cursor-zoom-in":!f&&p}),srcVariants:null==l?void 0:l.image_variants,aspectRatio:j})}),m&&(0,n.jsx)(r0,{node:i,updateAttributes:c}),b&&(0,n.jsx)(rK,{editor:a,node:i,updateAttributes:c,deleteNode:u})]})},r2=function(e){var t,r,o=e.editor,i=e.node,a=e.updateAttributes,l=e.deleteNode,s=(0,rW.T)().show,c=o.isEditable,u=null!=(r=(0,B.p)())?r:{},d=u.localInlineAttachments,f=u.inlineAttachments,p=u.addToLocalInlineAttachments,m=u.isWithinEmailEditor,b=null==(t=i.attrs)?void 0:t.signed_id,y=(null==d?void 0:d.find(function(e){return e.signed_id===b}))||(null==f?void 0:f.find(function(e){return e.signed_id===b})),h=null==f?void 0:f.filter(function(e){return(0,X.c)(e.content_type)});return(0,F.useQuery)({queryKey:[Q.av.richTextFields.fetchAttachment({signedId:b})],enabled:!y&&c,retry:!1,retryOnMount:!1,onSuccess:p}).isLoading?(0,n.jsx)(A.T5,{as:"div",className:"my-4",children:(0,n.jsx)(z.JO,{type:"loader",size:16})}):y?m&&(i.attrs.use_intrinsic_size||i.attrs.href)?(0,n.jsx)(A.T5,{as:"div",children:(0,n.jsx)(rX,{node:i,editor:o,attachmentMeta:y,updateAttributes:a,deleteNode:l})}):(0,n.jsx)(A.T5,{as:"div",children:(0,n.jsx)(r1,{node:i,editor:o,attachmentMeta:y,onClickOpenAttachmentGallery:function(){c||s({attachments:h,startIndex:null==h?void 0:h.findIndex(function(e){return e.signed_id==y.signed_id})})},updateAttributes:a,deleteNode:l})}):(0,n.jsxs)(A.T5,{as:"div",className:"bg-tertiary group flex items-start gap-2 rounded-md p-4",children:[c&&(0,n.jsx)(er,{onClick:l}),(0,n.jsx)(z.JO,{type:"16-trash-bin-2",size:20}),(0,n.jsx)(J.Z.BodySm,{as:"span",children:(0,U.t)("tiptap.file_not_found")})]})},r3=R.NB.create({name:"image",group:"block",atom:!0,addAttributes:function(){return{url:{default:null},signed_id:{default:null},content_type:{default:null},width:{},width_ratio:{},alignment:{default:"center"},use_intrinsic_size:{default:!1},href:{default:null}}},parseHTML:function(){return[{tag:"img-resizable"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["img-resizable",(0,R.P1)(t)]},addNodeView:function(){return(0,A.fW)(r2)}}),r5=r(154625),r8=r(882513),r6=r(424676),r4=function(e){var t,r=e.activeMenuIndex,i=e.setActiveMenuIndex,a=e.flattenedCommands,l=e.item,s=e.editor,c=e.range,u=(null==(t=a[r])?void 0:t.name)===l.name,d=(0,o.useRef)();(0,o.useEffect)(function(){u&&d.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[u]);var f=function(){i(a.findIndex(function(e){return e.name===l.name}))};return(0,n.jsxs)("button",{type:"button",ref:d,onClick:function(){document.exitPointerLock&&document.exitPointerLock(),l.command({editor:s,range:c})},onMouseOver:f,onFocus:f,className:eS()("text-dark flex items-center space-x-2 px-5 py-2 first:pt-2",{"bg-tertiary":u}),children:[(0,n.jsx)(z.JO,{type:l.icon,size:16}),(0,n.jsx)("div",{children:(0,n.jsx)(J.Z.LabelSm,{children:l.title})})]},l.name)},r9=function(e){var t=e.editor,r=e.range,n=e.activeMenuIndex,i=e.setActiveMenuIndex,a=e.items,l=e.ref,s=function(){n<a.length-1?i(n+1):i(0)},c=function(){n>0?i(n-1):i(a.length-1)},u=function(){var e;return null==(e=a[n])?void 0:e.command({editor:t,range:r})};(0,o.useImperativeHandle)(l,function(){return{onKeyDown:function(e){var t=e.event;if(["ArrowDown","ArrowUp","Enter"].includes(t.key)){switch(t.preventDefault(),t.stopPropagation(),document.body.requestPointerLock&&document.body.requestPointerLock(),t.key){case"ArrowDown":s();break;case"ArrowUp":c();break;case"Enter":u(),document.exitPointerLock&&document.exitPointerLock()}return!0}return!1}}})};function r7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ne=(0,o.forwardRef)(function(e,t){var r,i=e.items,a=e.editor,l=e.range,s=(r=(0,o.useState)(0),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(r,2)||function(e,t){if(e){if("string"==typeof e)return r7(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r7(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],u=s[1],d=i.flatMap(function(e){return e.commands});return(r9({ref:t,editor:a,range:l,items:d,activeMenuIndex:c,setActiveMenuIndex:u}),(0,o.useEffect)(function(){if(document.exitPointerLock){var e=function(){document.exitPointerLock()};return document.addEventListener("mousemove",e),function(){document.removeEventListener("mousemove",e)}}},[]),i.length)?(0,n.jsx)("div",{className:"bg-primary border-primary relative max-h-[50vh] min-w-[250px] max-w-[320px] overflow-auto rounded-sm border py-2 text-sm shadow-md","data-testid":"slash-commands-list",children:(0,n.jsx)("div",{className:"flex flex-col",children:i.map(function(e){return e.commands.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex items-center space-x-2 px-5 py-2 uppercase first:pt-2",children:(0,n.jsx)(J.Z.LabelXxs,{color:"text-light",children:e.name})},e.name),e.commands.map(function(e){return(0,n.jsx)(r4,{activeMenuIndex:c,setActiveMenuIndex:u,flattenedCommands:d,item:e,editor:a,range:l},e.name)})]}):null})})}):null});ne.displayName="CommandsList";var nt=[{name:"youtube",title:(0,U.t)("tiptap.slash_commands.youtube")},{name:"wistia",title:(0,U.t)("tiptap.slash_commands.wistia")},{name:"vimeo",title:(0,U.t)("tiptap.slash_commands.vimeo")},{name:"loom",title:(0,U.t)("tiptap.slash_commands.loom")},{name:"soundcloud",title:(0,U.t)("tiptap.slash_commands.soundcloud")},{name:"spotify",title:(0,U.t)("tiptap.slash_commands.spotify")},{name:"simplecast",title:(0,U.t)("tiptap.slash_commands.simplecast")},{name:"instagram",title:(0,U.t)("tiptap.slash_commands.instagram")},{name:"facebook",title:(0,U.t)("tiptap.slash_commands.facebook")},{name:"twitter",title:(0,U.t)("tiptap.slash_commands.twitter")},{name:"typeform",title:(0,U.t)("tiptap.slash_commands.typeform")},{name:"airtable",title:(0,U.t)("tiptap.slash_commands.airtable")},{name:"github",title:(0,U.t)("tiptap.slash_commands.github")},{name:"google-maps",title:(0,U.t)("tiptap.slash_commands.google_maps")},{name:"codepen",title:(0,U.t)("tiptap.slash_commands.codepen")}];function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nn=function(e){var t=e.showEmbedModal,r=e.showImagePickerModal,n=e.showFileUploadModal,o=e.showGiphyPickerModal,i=e.showPollModal,a=e.showCTASettingsModal,l=e.showVoiceMessageModal,s=e.openUpgradeModal,c=e.shouldShowPlanUpgradeModal,u=nt.map(function(e){var r=e.name,n=e.title;return{name:r,title:n,icon:"16-editor-".concat(r),command:function(e){return t({editor:e.editor,range:e.range,provider:n})}}}),d=[{name:"ai_copilot",title:(0,U.t)("tiptap.slash_commands.co_pilot"),icon:"20-community-ai",command:function(e){var t=e.editor,r=e.range;c?s():t.chain().focus().deleteRange(r).addAiCopilotNode().run()}},{name:"paragraph",title:(0,U.t)("tiptap.slash_commands.paragraph"),icon:"16-editor-paragraph",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("paragraph").run()}},{name:"h1",title:(0,U.t)("tiptap.slash_commands.heading_1"),icon:"16-heading1",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("heading",{level:1}).run()}},{name:"h2",title:(0,U.t)("tiptap.slash_commands.heading_2"),icon:"16-editor-h2",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("heading",{level:2}).run()}},{name:"h3",title:(0,U.t)("tiptap.slash_commands.heading_3"),icon:"16-editor-h3",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("heading",{level:3}).run()}},{name:"ordered_list",title:(0,U.t)("tiptap.slash_commands.number_list"),icon:"16-editor-ol",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleOrderedList().run()}},{name:"bullet_list",title:(0,U.t)("tiptap.slash_commands.bullet_list"),icon:"16-editor-ul",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleBulletList().run()}},{name:"block-quote",title:(0,U.t)("tiptap.slash_commands.blockquote"),icon:"16-editor-quote",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleBlockquote().run()}},{name:"divider",title:(0,U.t)("tiptap.slash_commands.divider"),icon:"16-editor-divider",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setHorizontalRule().run()}},{name:"code",title:(0,U.t)("tiptap.slash_commands.code"),icon:"16-editor-code",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleCodeBlock().run()}},{name:"emoji",title:(0,U.t)("tiptap.slash_commands.emoji"),icon:"16-editor-emoji",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).insertContent(":").run()}},{name:"mention",title:(0,U.t)("tiptap.slash_commands.mention"),icon:"16-editor-mention",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).insertContent("@").run()}},{name:"cta",title:(0,U.t)("tiptap.slash_commands.cta"),icon:"16-link",command:a}],f=[{name:"poll",title:(0,U.t)("tiptap.slash_commands.poll"),icon:"16-editor-poll",command:i},{name:"image",title:(0,U.t)("tiptap.slash_commands.image"),icon:"16-editor-image",command:r},{name:"file",title:(0,U.t)("tiptap.slash_commands.file"),icon:"16-editor-file",command:n},{name:"audio",title:(0,U.t)("tiptap.slash_commands.audio"),icon:"16-editor-audio",command:function(e){return n({editor:e.editor,range:e.range,type:"audio"})}},{name:"voice_message",title:(0,U.t)("tiptap.slash_commands.voice_message"),icon:"16-microphone",command:l},{name:"video",title:(0,U.t)("tiptap.slash_commands.video"),icon:"16-editor-video",command:function(e){return n({editor:e.editor,range:e.range,type:"video"})}},{name:"pdf",title:(0,U.t)("tiptap.slash_commands.pdf"),icon:"16-editor-pdf",command:function(e){return n({editor:e.editor,range:e.range,type:"pdf"})}},{name:"giphy",title:(0,U.t)("tiptap.slash_commands.giphy"),icon:"16-editor-giphy",command:o}],p=[{name:"embed",title:(0,U.t)("tiptap.slash_commands.embed"),icon:"16-editor-embed",command:t}].concat(function(e){if(Array.isArray(e))return nr(e)}(u)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(u)||function(e,t){if(e){if("string"==typeof e)return nr(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nr(e,t)}}(u)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return[{name:(0,U.t)("tiptap.slash_commands.basic"),commands:d},{name:(0,U.t)("tiptap.slash_commands.upload"),commands:f},{name:(0,U.t)("tiptap.slash_commands.embed"),commands:p}]};function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ni(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function na(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var nl={ai_copilot:["ai_copilot"],mention:["mention"],poll:["poll"],cta:["cta"]};let ns=function(e){var t=e.showEmbedModal,r=e.showImagePickerModal,n=e.showFileUploadModal,o=e.showGiphyPickerModal,i=e.showPollModal,a=e.showCTASettingsModal,l=e.showVoiceMessageModal,s=e.disabledExtensions,c=e.disabledSlashMenuCategories,u=e.disabledSlashMenuCommands,d=e.shouldShowPlanUpgradeModal,f=e.openUpgradeModal,p=e.headingLevels;Object.entries(nl).forEach(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return no(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return no(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0],n=t[1];s[r]&&n.forEach(function(e){u[e]=!0})});var m=function(e,t){if("Basic"===t.name){var r=t.commands.filter(function(e){return p.includes(1)?p.includes(2)?!!p.includes(3)||"h3"!==e.name:"h2"!==e.name:"h1"!==e.name});if(r.length>0)return e.push(na(ni({},t),{commands:r})),e}return e.push(t),e};return R.hj.create({addOptions:function(){return{suggestion:{char:"/",pluginKey:new tG.H$("slash-commands"),items:function(e){var s=e.query;return Object.values(nn({showEmbedModal:t,showImagePickerModal:r,showFileUploadModal:n,showGiphyPickerModal:o,showPollModal:i,showCTASettingsModal:a,showVoiceMessageModal:l,shouldShowPlanUpgradeModal:d,openUpgradeModal:f})).map(function(e){return na(ni({},e),{commands:e.commands.filter(function(e){return!u[e.name]&&e.title.toLowerCase().includes(s.toLowerCase())})})}).filter(function(e){return!c[e.name]&&!(0,C.isEmpty)(e.commands)}).reduce(m,[])},render:function(){var e,t;return{onStart:function(r){e=new A.M_(ne,{props:r,editor:r.editor}),t=(0,r6.ZP)("body",{getReferenceClientRect:r.clientRect,appendTo:function(){return r.editor.options.element},content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border",zIndex:999,onHidden:function(){e.destroy()}})},onUpdate:function(r){e.updateProps(r),r.items.length<1?(t[0].hide(),e&&e.destroy()):(t[0].show(),t[0].setProps({getReferenceClientRect:r.clientRect}))},onKeyDown:function(r){var n;return"Escape"===r.event.key?(t[0].hide(),r.event.preventDefault(),r.event.stopPropagation(),!0):null==(n=e.ref)?void 0:n.onKeyDown(r)},onExit:function(){t&&t[0].destroy(),e&&e.destroy()}}}}}},addProseMirrorPlugins:function(){return[(0,r8.ZP)(ni({editor:this.editor},this.options.suggestion))]}})};function nc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){nu(e,t,r[t])})}return e}function nf(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function np(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||nm(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nm(e,t){if(e){if("string"==typeof e)return nc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nc(e,t)}}var nb=function(e){return!!e};Promise.all([r.e("2834"),r.e("9525")]).then(r.bind(r,161540)).then(function(e){e.default.highlightAll()}).catch(console.error);var ny=function(e){var t=e.aiCopilotTitle,r=e.allowBubbleMenuOverflow,R=e.className,F=e.disabledExtensions,U=e.disabledSlashMenuCategories,z=e.disabledSlashMenuCommands,$=e.disableMentionClicks,H=e.editorClassName,q=e.editorRef,V=e.inlineAttachments,W=e.isMediaUploadAllowed,J=void 0===W||W,G=e.isVoiceMessageAllowed,Q=void 0!==G&&G,X=e.onChange,Y=e.onFocusChange,ee=e.onLocalAttachmentsChange,et=e.onLocalSgidToObjectMapChange,er=e.openInternalLinksInCurrentTab,en=e.placeholder,eo=e.readOnly,ei=void 0!==eo&&eo,ec=e.sgidToObjectMap,eu=e.shouldPreviewFilesAsLinks,ed=e.shouldShowTextModifiersMenu,ef=e.spaceId,ep=e.textModifierPlacement,em=e.showListsInTextModifierMenu,eb=e.shouldSupportTables,ey=void 0!==eb&&eb,eh=e.maxFileUploadSize,eO=e.toolbars,ew=e.value,eS=e.shouldRefetch,eP=void 0!==eS&&eS,e_=e.headingLevels,ek=void 0===e_?[2,3]:e_,eE=e.isWithinEmailEditor,eA=void 0!==eE&&eE,eT=(0,rV.d)(),eI=(0,r5.d)(),eM=(0,el.Z)(),eR=(0,eD.Y)(),eF=(0,Z.dd)(e4),eU=(0,Z.dd)(Z.gk.create(function(e){return(0,n.jsx)(tJ,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})),ez=(0,Z.dd)(ev),e$=np((0,o.useState)({}),2),eB=e$[0],eZ=e$[1],eH=np((0,o.useState)([]),2),eq=eH[0],eV=eH[1],eW=np((0,I.k)(!1),3),eG=eW[0],eK=eW[2],eQ=rn(),eX=eQ.shouldShowCopilot,eY=eQ.shouldShowPlanUpgradeModal,e0=rr().openUpgradeModal,e1=(0,T.X)(),e2=np([void 0===F?[]:F,void 0===U?[]:U,void 0===z?[]:z].map(function(e){return Object.fromEntries(e.map(function(e){return[e,!0]}))}),3),e3=e2[0],e5=e2[1],e8=e2[2];e3.ai_copilot=e3.ai_copilot||!(eX||eY)||ei,e3.voice_message=e3.voice_message||!Q||!e1,e8.voice_message=e8.voice_message||!Q||!e1,J||(e3.file=!0,e3.image=!0,e3.file_loader=!0,e8.file=!0,e8.image=!0,e8.video=!0,e8.audio=!0,e8.pdf=!0,e8.giphy=!0);var e6=function(e){var t=e.sgid,r=e.object;eZ(function(e){return nf(nd({},e),nu({},t,r))}),(0,C.isFunction)(et)&&et(nf(nd({},eB),nu({},t,r)))},e9=function(e){eV(function(t){var r=((function(e){if(Array.isArray(e))return nc(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||nm(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]);return(0,C.isFunction)(ee)&&ee(r),r})},e7=function(e){return eI.show(nf(nd({},e),{addToLocalInlineAttachments:e9,isWithinEmailEditor:eA}))},te=function(e){return eF.show(nf(nd({},e),{addToLocalInlineAttachments:e9}))},tt=function(e){return eM.show(nf(nd({},e),{maxFileUploadSize:eh,addToLocalInlineAttachments:e9,addToLocalSgidToObjectMap:e6}))},tr=function(e){return eU.show(nf(nd({},e),{addToLocalSgidToObjectMap:e6}))},tn=function(e){return ez.show(nf(nd({},e),{addToLocalInlineAttachments:e9}))},to=[!e3.blockquote&&i.ZP,a.ZP,v.ZP,O.ZP,ex.a,c.Z,d.Z,f.Z,p.Z,ey&&w.ZP.configure({resizable:!1}),ey&&S.Z,ey&&P.Z,ey&&_.Z,!e3.code_block&&s.Z.configure({lowlight:N.$,HTMLAttributes:{spellCheck:"false"}}),!e3.headings&&m.Z.configure({levels:ek}),y.Z,l.ZP,rB.E,g.ZP,j.Z,k.Z,eA&&D.Z.configure({types:Array.from(t6.M),alignments:[t6.$.LEFT,t6.$.RIGHT,t6.$.CENTER]}),E.ZP,b.ZP.configure({multicolor:!0}),eg.P.configure({openInternalLinksInCurrentTab:void 0===er||er,openOnClick:!1,autolink:!1}),x.Z.configure({placeholder:en,emptyEditorClass:"is-block-editor-empty text-light",emptyNodeClass:"is-empty",showOnlyWhenEditable:!1,showOnlyCurrent:!1}),!e3.horizontal_rule&&h.Z,!e3.file&&ea,es.r,eL,!e3.file_loader&&eJ,!e3.ai_copilot&&r$,!e3.slash_commands&&ns({showEmbedModal:function(e){return eT.show(nf(nd({},e),{addToLocalSgidToObjectMap:e6}))},showImagePickerModal:e7,showFileUploadModal:tt,showGiphyPickerModal:te,showPollModal:tr,showCTASettingsModal:function(e){return eR.show(nf(nd({},e),{addToLocalSgidToObjectMap:e6,isWithinEmailEditor:eA}))},showVoiceMessageModal:tn,disabledExtensions:e3,disabledSlashMenuCategories:e5,disabledSlashMenuCommands:e8,shouldShowPlanUpgradeModal:eY,openUpgradeModal:e0,headingLevels:ek}),!e3.embeds&&rq,!e3.image&&r3,!e3.mention&&ej.z,!e3.entities&&M.Y,!e3.poll&&tW,!e3.cta&&eC,!ei&&tX,eN,u.Z.configure({width:2})].filter(nb);(0,o.useEffect)(function(){(0,C.isFunction)(Y)&&Y(eG)},[eG,Y]);var ti=(0,C.debounce)(function(e){var t=e.editor.getJSON();X&&X(t)},200),ta=(0,A.jE)({extensions:to,onUpdate:ti,onFocus:function(){eK(!0)},onBlur:function(){eK(!1)},content:ew,editable:!ei,editorProps:{transformPastedHTML:function(e){var t=(0,L.n)(e);return t.length&&(0,L.S)({sgids:t,setLocalSgidToObjectMap:eZ}),e},attributes:{focus:"",class:(0,K.A)("z-0 max-w-none whitespace-pre-wrap bg-transparent border-none ring-0 circle-block-editor text-dark",H),"data-readonly":ei}}});q&&(q.current=ta),(0,o.useEffect)(function(){eP&&ei&&ta&&(0,C.defer)(function(){return ta.commands.setContent(ew)})},[ta,ew,eP,ei]),(0,o.useEffect)(function(){ta&&ei===ta.isEditable&&ta.setEditable(!ei)},[ei,ta]);var tl=function(e){!e3.file&&ta&&ta.chain().focus().insertContent(Array.from(e).map(function(e){return{type:"file-loader",attrs:{file:e}}})).run()};return(0,n.jsxs)(B.k.Provider,{value:{sgidToObjectMap:void 0===ec?{}:ec,inlineAttachments:void 0===V?[]:V,localSgidToObjectMap:eB,addToLocalSgidToObjectMap:e6,localInlineAttachments:eq,addToLocalInlineAttachments:e9,spaceId:ef,aiCopilotTitle:t,shouldPreviewFilesAsLinks:void 0!==eu&&eu,type:"block",disableMentionClicks:void 0!==$&&$,isWithinEmailEditor:eA},children:[ta&&(void 0===ed||ed)&&(0,n.jsx)(ra,{shouldShowCopilot:!e3.ai_copilot,editor:ta,headingLevels:ek,placement:void 0===ep?"top":ep,showListsInTextModifierMenu:void 0!==em&&em,allowBubbleMenuOverflow:void 0===r||r}),eO&&eO.map(function(e){var t=e.portalId,r=e.component;return(0,n.jsx)(r,{editor:ta,isEditorFocused:eG,portalId:t,showImagePickerModal:e7,showFileUploadModal:tt,showGiphyPickerModal:te,showPollModal:tr,showVoiceMessageModal:tn,disabledExtensions:e3},"editor-toolbar-for-".concat(t))}),(0,n.jsx)(A.kg,{onPaste:function(e){var t,r;J&&(null==(r=e.clipboardData)||null==(t=r.files)?void 0:t.length)>0&&tl(e.clipboardData.files)},onDrop:function(e){if(!ta||!J)return null;e.preventDefault();var t={left:e.clientX,top:e.clientY},r=ta.view.posAtCoords(t);if(r)return Array.from(e.dataTransfer.files).forEach(function(e){ta.chain().focus().insertContentAt(r.pos,{type:"file-loader",attrs:{file:e}}).run()})},className:R,editor:ta,"data-testid":"tip-tap-editor-content"})]})}},720495:function(e,t,r){r.d(t,{K:()=>o});var n=r(455155),o=function(e,t){var r=n.M.some(function(r){return e.isActive(r,{textAlign:t})});return t===n.$.LEFT?r||!n.M.some(function(t){return[n.$.CENTER,n.$.RIGHT].some(function(r){return e.isActive(t,{textAlign:r})})}):r}},143816:function(e,t,r){r.d(t,{Z:()=>l});var n=r(683551),o=r(379600),i=r.n(o),a=r(100334),l=function(e){var t=e.field,r=e.value,o=e.disabled,l=e.onChange,s=e.variant,c=void 0===s?"default":s,u=e.className,d=e.labelClassName,f=e.wrapperClassName,p=e.label,m=void 0===p?(0,a.t)("toggle_switch"):p;return(0,n.jsxs)("div",{className:i()("toggle-switch",f,{"toggle-switch--small":"default"===c,"toggle-switch--large":"large"===c}),id:"field-".concat(t),children:[(0,n.jsx)("input",{type:"checkbox",name:t,id:"checkbox-".concat(t),checked:void 0!==r&&r,onChange:l,disabled:void 0!==o&&o,className:i()("peer",u)}),(0,n.jsx)("label",{htmlFor:"checkbox-".concat(t),className:i()("bg-toggle-unchecked before:bg-toggle-circle-unchecked peer-checked:bg-toggle-checked before:peer-checked:bg-toggle-circle-checked relative",d),children:(0,n.jsx)("span",{className:"sr-only",children:m})})]})}},859651:function(e,t,r){r.d(t,{sI:()=>f,Zh:()=>n.Z});var n=r(143816),o=r(683551),i=r(645391),a=r(426371),l=r.n(a),s=r(100334),c=r(583972),u=r(527804),d=r(952105),f=function(e){var t=e.label,r=void 0===t?(0,s.t)("toggle_switch"):t,a=e.field,f=e.value,p=void 0!==f&&f,m=e.onChange,b=void 0===m?l():m,y=e.tooltipText,h=e.className,v=e.labelClassName,g=e.toggleSwitchClassName,j=e.toggleSwitchLabelClassName,x=e.variant,O=void 0===x?"default":x,w=e.disabled,S=void 0!==w&&w;return(0,o.jsxs)("div",{className:(0,i.A)("flex flex-row items-center justify-between",h),children:[y?(0,o.jsxs)("span",{className:"text-default flex items-center",children:[r,(0,o.jsx)(u.T,{content:y,className:"inline-flex",children:(0,o.jsx)(c.JO,{type:"question-mark",className:"ml-2 !w-3"})})]}):(0,o.jsx)("span",{className:(0,i.A)("text-default",v),children:r}),(0,o.jsx)("div",{id:"field-".concat(a),className:"flex items-center",children:"small"===O?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"checkbox",name:a,id:"checkbox-".concat(a),checked:p,onChange:b,disabled:S,className:"peer hidden"}),(0,o.jsxs)("label",{className:(0,i.A)("m-0",{"cursor-not-allowed opacity-10":S}),htmlFor:"checkbox-".concat(a),children:[(0,o.jsx)(d.r,{as:"span",checked:p,onChange:b}),(0,o.jsx)("span",{className:"sr-only",children:r})]})]}):(0,o.jsx)(n.Z,{field:a,value:p,onChange:b,variant:O,disabled:S,wrapperClassName:g,labelClassName:j})})]})}},886674:function(e,t,r){r.d(t,{D:()=>d});var n=r(683551),o=r(314121),i=r(100334),a=r(904812),l=r(117047),s=r(583972),c=r(189713);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r=e.url,d=e.onNewMediaTranscript,f=e.onMediaTranscriptUpdated,p=e.mediaTranscript,m=e.isLoading,b=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=b[0],h=b[1],v=(0,o.useRef)(!1),g=function(){return h(!0)};(0,l.s)({channel:"MediaTranscriptChannel",url:r,onMessageReceive:function(e){var t,r;"newMediaTranscript"===e.event?(g(),null==d||d(null==(t=e.json_message)?void 0:t.id)):"mediaTranscriptUpdated"===e.event&&(v.current||g(),null==f||f(null==(r=e.json_message)?void 0:r.id))}});var j=null==p?void 0:p.supports_ai;return!y||m?null:(0,n.jsxs)("div",{className:"bg-primary absolute left-5 top-5 z-10 flex w-2/3 max-w-sm items-start gap-3 rounded-md p-4 shadow-xl",children:[(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(s.JO,{type:"20-ai"})}),(0,n.jsxs)("div",{className:"flex grow flex-col gap-4",children:[(0,n.jsx)(c.Z.LabelSm,{as:"div",children:(0,i.t)("media_player.transcript_notification_message")}),!j&&(0,n.jsxs)(c.Z.LabelSm,{as:"div",children:[(0,n.jsx)("span",{children:"".concat((0,i.t)("media_player.transcript_notification_upgrade_message")," ")}),(0,n.jsx)("a",{className:"cursor-pointer",href:(0,a.xn)(),target:"_blank",rel:"noreferrer",children:(0,i.t)("media_player.transcript_notification_upgrade_link")})]})]}),(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(s.JO,{type:"20-close",onClick:function(){v.current=!0,h(!1)},className:"cursor-pointer"})})]})}},660720:function(e,t,r){r.d(t,{P:()=>s});var n=r(683551),o=r(100334),i=r(527804),a=r(844527),l=(0,o.t)("close"),s=function(e){var t=e.onClick;return(0,n.jsx)(i.T,{content:l,interactive:!1,children:(0,n.jsx)(a.h,{name:"close",variant:"secondary",onClick:t,ariaLabel:l})})}},190498:function(e,t,r){r.d(t,{N:()=>c});var n=r(683551),o=r(379600),i=r.n(o),a=r(633189),l=r(189713),s=r(266546),c=function(e){var t,r=e.cue,o=e.isCurrentCue,c=void 0!==o&&o,u=e.shouldScroll,d=e.onSeek,f=(0,a.g)(c&&(void 0===u||u));return(0,n.jsxs)("button",{type:"button",className:i()("flex cursor-pointer items-start gap-3 p-1 text-left hover:underline",{"bg-secondary":c}),onClick:function(e){e.stopPropagation(),d(r.startTime)},ref:f,children:[(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(l.Z.BodySm,{as:"div",color:c?"text-dark":"text-light",weight:c?"semibold":"normal",children:(0,s.Ly)(null==(t=r.startTime)?void 0:t.toString())})}),(0,n.jsx)(l.Z.LabelSm,{as:"div",color:"text-dark",weight:c?"semibold":"normal",children:r.text})]})}},633043:function(e,t,r){r.d(t,{d:()=>s});var n=r(683551),o=r(100334),i=r(527804),a=r(844527),l=(0,o.t)("live_streams.room.button_tooltips.fullscreen"),s=function(e){var t=e.onClick;return(0,n.jsx)(i.T,{content:l,interactive:!1,children:(0,n.jsx)(a.h,{name:"fullscreen",variant:"secondary",onClick:t,ariaLabel:l})})}},634390:function(e,t,r){r.d(t,{n:()=>b});var n=r(683551),o=r(314121),i=r(100334),a=r(583972),l=r(318867),s=r(189713),c=r(190498),u=r(214813),d=function(e){var t=e.onChange,r=void 0===t?u.noop:t;return(0,n.jsx)("input",{type:"search",placeholder:(0,i.t)("media_player.search"),className:"shadow-xs placeholder:text-light border-primary w-full rounded-md placeholder:opacity-100",onChange:r})},f=r(266546),p=r(710909);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var b=function(e){var t,r=e.isOpen,u=e.onClose,b=e.cues,y=e.onSeek,h=e.currentTime,v=e.children,g=(t=(0,o.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return m(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),j=g[0],x=g[1],O=(0,p.g)(),w=O.containerRef,S=O.shouldAutoScroll,P=b.filter(function(e){return!j||e.text.toLowerCase().includes(j.toLowerCase())});return(0,n.jsx)(l.x,{shouldCloseOnOutsideClick:!0,shouldShowCloseButton:!0,isOpen:r,contentPortalId:"fullscreen-transcripts-portal",position:"bottom",onClose:u,children:(0,n.jsxs)("div",{className:"flex h-full overflow-hidden",children:[(0,n.jsx)("div",{className:"bg-dark relative flex-1",children:(0,n.jsx)("div",{id:"transcripts-fullscreenmodal-player",className:"flex size-full items-center justify-center",children:v})}),(0,n.jsxs)("div",{className:"border-primary flex w-1/3 max-w-sm shrink-0 flex-col border-l",children:[(0,n.jsxs)("div",{className:"border-primary mb-2 flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[(0,n.jsx)(a.JO,{type:"20-ai",size:20}),(0,n.jsx)(s.Z.LabelLg,{weight:"semibold",children:(0,i.t)("media_player.transcript")})]}),(0,n.jsx)("div",{className:"px-4 py-2",children:(0,n.jsx)(d,{onChange:function(e){return x(e.target.value)}})}),(0,n.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,n.jsx)("div",{className:"h-full overflow-auto p-4",ref:w,children:P.map(function(e){return(0,n.jsx)(c.N,{cue:e,isCurrentCue:(0,f.O4)(e,h),shouldScroll:S,onSeek:y},"transcript-fullscreen-".concat(e.startTime))})})})]})]})})}},266546:function(e,t,r){r.d(t,{Ly:()=>i,O4:()=>a});var n=r(214813),o=function(e){return(0,n.padStart)(e.toString(),2,"0")},i=function(e){var t=Number(e),r=Math.floor(t/3600),n=Math.floor((t-3600*r)/60),i=Math.floor(t-3600*r-60*n);return r?"".concat(o(r),":").concat(o(n),":").concat(o(i)):"".concat(o(n),":").concat(o(i))},a=function(e,t){if(!e)return!1;var r=e.startTime,n=e.endTime;return t>=r&&t<n}},529449:function(e,t,r){r.d(t,{Y:()=>y});var n=r(683551),o=r(314121),i=r(286638),a=r(100334),l=r(189713),s=r(660720),c=r(190498),u=r(633043),d=r(634390),f=r(266546),p=r(710909);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){var t=e.onSeek,r=e.onFullscreenSeek,m=e.onFullscreenToggle,y=e.renderFullscreenPlayer,h=e.cues,v=void 0===h?[]:h,g=e.currentTime,j=(0,o.useRef)(null),x=b((0,o.useState)(!1),2),O=x[0],w=x[1],S=b((0,o.useState)(!1),2),P=S[0],_=S[1],k=function(){return w(!O)};(0,i.Z)(j,function(){return w(!1)});var D=(0,p.g)(),E=D.containerRef,A=D.shouldAutoScroll,C=function(){null==m||m(),w(!1),_(!P)};if(!(null==v?void 0:v.length))return null;var N=v[0]||{text:"",startTime:0};return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("blockquote",{children:[(0,n.jsx)(l.Z.BodyXs,{as:"div",children:N.text}),(0,n.jsx)("div",{children:(0,n.jsxs)("button",{type:"button",className:"text-link relative cursor-pointer text-xs hover:underline",onClick:k,ref:j,children:[O?(0,a.t)("media_player.hide_transcript"):(0,a.t)("media_player.show_transcript"),O&&(0,n.jsxs)("div",{className:"bg-primary border-light absolute bottom-0 left-full z-20 ml-2 flex h-72 w-96 flex-col rounded-md border p-4",children:[(0,n.jsxs)("div",{className:"mb-2 flex shrink-0 items-start justify-between",children:[(0,n.jsx)(l.Z.BodyMd,{as:"div",color:"text-dark",children:(0,a.t)("media_player.transcript")}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(u.d,{onClick:C}),(0,n.jsx)(s.P,{onClick:k})]})]}),(0,n.jsx)("div",{className:"grow overflow-auto",ref:E,children:v.map(function(e){return(0,n.jsx)(c.N,{cue:e,isCurrentCue:(0,f.O4)(e,g),shouldScroll:A,onSeek:t},"transcript-".concat(e.startTime))})})]})]})})]}),(0,n.jsx)(d.n,{isOpen:P,onClose:C,cues:v,onSeek:r,currentTime:g,children:y()})]})}},710909:function(e,t,r){r.d(t,{g:()=>i});var n=r(314121);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var i=function(){var e,t=(0,n.useRef)(null),r=(e=(0,n.useState)(!0),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],a=r[1],l=t.current;return(0,n.useEffect)(function(){var e=function(){return a(!1)};return null==l||l.addEventListener("mousewheel",e),function(){return null==l?void 0:l.removeEventListener("mousewheel",e)}},[l]),{containerRef:t,shouldAutoScroll:i}}},666648:function(e,t,r){r.r(t),r.d(t,{TranscriptsPlayer:()=>ek});var n=r(683551);r(858040);var o=r(591420),i=r(169530),a=r(929775),l=r(447193),s=r(314121),c=r(722024),u=r(276011),d=r(904812),f=r(217725),p=r(578360),m=r(214813),b=r(614659),y=r.n(b),h=r(100334),v=r(645391),g=r(135152),j=function(e){var t=e.id,r=e.contentType,o=e.children,i=e.poster,a=e.preload,l=void 0===a?"none":a,c=e.signedId,u=null==r?void 0:r.match("audio.*"),d=(0,s.useRef)(null);return((0,g.p)(d,c),u)?(0,n.jsx)("audio",{id:t,preload:l,controls:!0,children:o}):(0,n.jsx)("video",{id:t,preload:l,controls:!0,poster:i,"data-poster":i,"data-testid":"media-player",ref:d,children:o})};function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){var t;return null!=(t=HTMLMediaElement)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t},w=function(e){var t,r=e.id,n=e.renderKey,o=e.src,i=e.enabled,a=void 0===i||i,l=e.autoStartLoadEnabled,c=void 0!==l&&l,u=(0,s.useRef)(null),d=(t=(0,s.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return x(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=d[0],m=d[1],b=(0,s.useRef)(!1);return(0,s.useEffect)(function(){if(a&&o&&r){var e=document.getElementById(r);if(O(e))return u.current=new p.ZP({autoStartLoad:c}),u.current.loadSource(o),u.current.attachMedia(e),u.current.once(p.ZP.Events.MANIFEST_PARSED,function(){if(u.current&&!b.current){var e=u.current.levels;m({default:e[e.length-1].height,options:e.map(function(e){return e.height}),forced:!0,onChange:function(t){e.forEach(function(e,r){u.current&&e.height===t&&(u.current.currentLevel=r)})}}),b.current=!0}}),function(){var e;null==(e=u.current)||e.destroy(),u.current=null}}},[n,r,o,a,c]),{quality:f,startLoad:(0,s.useCallback)(function(){var e;return null==(e=u.current)?void 0:e.startLoad()},[])}};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||k(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}var D=(0,s.memo)(function(e){var t=e.captionsUrl,r=e.contentType,o=e.downloadUrl,i=e.isDownloadable,a=void 0!==i&&i,l=e.onTimeUpdate,c=e.onEnded,u=e.playerRef,d=void 0===u?null:u,f=e.poster,b=e.src,g=e.startTime,x=e.preload,O=void 0===x?"none":x,S=e.onProgress,k=e.menuPosition,D=e.signedId,E=P((0,s.useState)((0,m.uniqueId)("plyr-container-")),2),A=E[0],C=E[1],N=(0,s.useRef)((0,m.uniqueId)("plyr-")),T=(0,s.useRef)(null),I=P((0,s.useState)(!1),2),M=I[0],L=I[1],R=p.ZP.isSupported(),F=b.endsWith(".m3u8")&&R,U="none"!==O,z=w({id:N.current,renderKey:A,src:b,enabled:F,autoStartLoadEnabled:U}),$=z.quality,B=z.startLoad,Z=(0,s.useMemo)(function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({controls:["play-large","play","progress","current-time","mute","volume"].concat(_(t?["captions"]:[]),["settings","pip","fullscreen"],_(a?["download"]:[])),urls:{download:o},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2]}},$?{quality:$}:{})},[t,o,$,a]);(0,s.useEffect)(function(){return function(){var e;null==(e=T.current)||e.destroy(),C((0,m.uniqueId)("plyr-container-"))}},[Z]),(0,s.useEffect)(function(){T.current=new(y())("#".concat(N.current),Z),d&&(d.current={plyr:T.current})},[Z,A,d]);var H=function(){T.current&&g&&(T.current.currentTime=g)},q=function(){T.current&&(0,m.isFunction)(c)&&c()},V=(0,m.isFunction)(S)?function(e){S({currentTime:e.detail.plyr.currentTime,duration:e.detail.plyr.duration})}:null;return(0,s.useEffect)(function(){return g&&T.current&&T.current.once("canplay",H),T.current&&(T.current.once("ended",q),V&&T.current.on("timeupdate",V)),function(){var e,t;null==(e=T.current)||e.off("canplay",H),V&&(null==(t=T.current)||t.off("timeupdate",V))}},[T.current]),(0,s.useEffect)(function(){if(g&&T.current)return T.current.once("play",H),function(){var e;return null==(e=T.current)?void 0:e.off("play",H)}},[T.current]),(0,s.useEffect)(function(){if(T.current&&F&&!U)return T.current.once("play",B),function(){var e;return null==(e=T.current)?void 0:e.off("play",B)}},[A,F,U,B]),(0,s.useEffect)(function(){var e,t=function(){T.current&&l&&l(T.current.currentTime)};return l&&(null==(e=T.current)||e.on("timeupdate",t)),function(){if(l){var e;null==(e=T.current)||e.off("timeupdate",t)}}},[l,T.current]),(0,s.useEffect)(function(){if(T.current){var e=function(){return L(!0)},t=function(){return L(!1)};return T.current.on("enterfullscreen",e),T.current.on("exitfullscreen",t),function(){var r,n;null==(r=T.current)||r.off("enterfullscreen",e),null==(n=T.current)||n.off("exitfullscreen",t)}}},[T.current]),(0,s.useEffect)(function(){T.current&&f&&(T.current.poster=f)},[f]),(0,n.jsx)("div",{className:(0,v.A)("plyr-container",{"plyr-container--fullscreen":M,"plyr-container__menu--bottom":"bottom"===(void 0===k?"top":k)}),children:(0,n.jsxs)(j,{id:N.current,contentType:r,poster:f,preload:O,signedId:D,children:[!F&&(0,n.jsx)("source",{src:b,type:r}),t&&(0,n.jsx)("track",{kind:"captions",label:(0,h.t)("default"),src:t,srcLang:"en"})]})},A)});D.displayName="MediaPlayer";var E=r(818329),A=r(870879),C=r(435534),N=function(e){var t=e.mediaSettings,r=e.updateMediaSettings,o=e.isUpdatingMediaSettings,i=e.closePopover,a={make_downloadable:t.make_downloadable,custom_thumbnail:t.custom_thumbnail_signed_id};return(0,n.jsxs)(C.l,{id:"download-settings",onSubmit:function(e){r(e),i()},defaultValues:a,children:[(0,n.jsx)(C.l.Item,{name:"make_downloadable",translationRoot:"media_settings",hideBorder:!0,fullWidth:!0,inline:!0,className:"!p-0",isDisabled:o,children:(0,n.jsx)(C.l.ToggleSwitch,{variant:"small",name:"make_downloadable"})}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(A.z,{type:"submit",variant:"circle",disabled:o,className:"mt-3",children:(0,h.t)("save")})})]})},T=r(244289),I=r(190920),M=r(200417),L=r(719952),R=r(583972),F=r(713719);function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var z=function(e){var t,r=e.name,o=e.errorMessage,a=e.onChange,l=(0,i.pm)().error,c=(t=(0,s.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return U(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1],f=(0,s.useRef)(null);return(0,s.useEffect)(function(){o&&l(o)},[o]),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{className:(0,v.A)("bg-primary flex cursor-pointer rounded-md border border-gray-600 px-2 py-1.5 text-sm",{"justify-center":!u,"hover:bg-selector-active":!u,"border-red-500":o}),children:[!u&&(0,n.jsx)("span",{children:(0,h.t)("media_player.transcript_menu.file_type.user_file")}),u&&(0,n.jsxs)("span",{className:"flex gap-2",children:[(0,n.jsx)(R.JO,{type:"20-attach",size:20,className:"shrink-0"}),(0,n.jsx)("span",{className:"grow",children:(0,m.truncate)(u,{length:17,omission:"..."})}),(0,n.jsx)(R.JO,{type:"16-close",size:16,onClick:function(e){e.preventDefault(),e.stopPropagation(),f.current&&(f.current.value=""),a(""),d(null)},className:"shrink-0"})]}),(0,n.jsx)("input",{type:"file",name:r,onChange:function(e){var t,r=null==(t=e.target.files)?void 0:t[0];if(r){var n=new FileReader;n.onload=function(){a(n.result)},n.readAsDataURL(r),d(r.name)}},className:"hidden",itemType:"text/vtt",accept:".vtt",ref:f})]})})},$=function(e){var t=e.name,r=e.rules,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","rules"]),i=(0,T.Gc)(),a=i.control,l=i.formState.errors,s=(0,m.get)(l,t),c="string"==typeof(null==s?void 0:s.message)?s.message:"";return(0,n.jsx)(T.Qr,{control:a,name:t,rules:r,render:function(e){var r,i,a=e.field.onChange;return(0,n.jsx)(z,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o),i=i={name:t,onChange:a,errorMessage:c},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r))}})},B=function(e){var t=e.onChange,r=e.value,o=e.supportsAi,i=e.aiFileDownloadUrl,a="ai"===r,l=a&&!o&&!i,s=a&&!!i;return(0,n.jsx)(I.E,{value:r,name:"file_type",onChange:t,className:"w-full",children:(0,n.jsxs)("div",{className:(0,v.A)("flex flex-col items-stretch gap-3",{"flex-col-reverse":!o}),children:[(0,n.jsxs)(F.R,{value:"ai",className:"py-4",children:[(0,n.jsx)(I.E.Label,{as:"span",className:"text-darkest block text-sm font-medium",children:(0,h.t)("media_player.transcript_menu.file_type.ai")}),(0,n.jsxs)(I.E.Description,{as:"span",className:"text-default mt-1 flex flex-col justify-center gap-1 text-sm",children:[(0,h.t)("media_player.transcript_menu.file_type.ai_description"),l&&(0,n.jsx)(A.z,{variant:"circle",onClick:function(e){e.preventDefault(),window.open((0,d.xn)(),"_blank")},children:(0,h.t)("media_player.transcript_menu.file_type.upgrade_label")}),s&&(0,n.jsxs)(A.z,{variant:"secondary",onClick:function(e){e.preventDefault(),window.open(i,"_blank")},children:[(0,n.jsx)(R.JO,{type:"16-download",className:"mr-1.5",size:16}),(0,h.t)("media_player.transcript_menu.file_type.download_vtt_label")]})]})]}),(0,n.jsxs)(F.R,{value:"user",className:"py-4",children:[(0,n.jsx)(I.E.Label,{as:"span",className:"text-darkest block text-sm font-medium",children:(0,h.t)("media_player.transcript_menu.file_type.user")}),(0,n.jsxs)(I.E.Description,{as:"div",className:"text-default mt-1 flex flex-col justify-center gap-1 text-sm",children:[(0,h.t)("media_player.transcript_menu.file_type.user_description"),"user"===r&&(0,n.jsx)($,{name:"user_webvtt_file",rules:{validate:function(e){if(!e)return!0;var t,r=(0,L.H)(e),n=new M.WebVTTParser().parse(r);return null==n||null==(t=n.errors)||!t.length||(console.error("Invalid VTT file",null==n?void 0:n.errors),(0,h.t)("media_player.transcript_menu.file_type.user_file_error"))}}})]})]})]})})},Z=function(e){var t=e.name,r=e.rules,o=e.supportsAi,i=e.aiFileDownloadUrl,a=(0,T.Gc)().control;return(0,n.jsx)(T.Qr,{control:a,name:t,rules:r,render:function(e){var t=e.field,r=t.onChange,a=t.value;return(0,n.jsx)(B,{onChange:r,value:a,supportsAi:o,aiFileDownloadUrl:i})}})},H="media_player.transcript_menu",q=function(e){var t=e.isUpdating,r=e.supportsAi,o=e.aiFileDownloadUrl,i=(0,(0,T.Gc)().watch)("enabled"),a=function(e){return"ai"!==e||!!r||(0,h.t)("media_player.transcript_menu.file_type.ai_not_supported_error")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.l.Item,{name:"enabled",translationRoot:H,hideBorder:!0,fullWidth:!0,inline:!0,className:"!p-0",isDisabled:t,children:(0,n.jsx)(C.l.ToggleSwitch,{variant:"small",name:"enabled"})}),i&&(0,n.jsx)(C.l.Item,{name:"selected_file",translationRoot:H,hideBorder:!0,fullWidth:!0,inline:!0,hideLabel:!0,hideDescription:!0,isDisabled:t,rules:{validate:a},className:"flex flex-col",children:(0,n.jsx)(Z,{name:"selected_file",rules:{validate:a},supportsAi:r,aiFileDownloadUrl:o})}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(A.z,{type:"submit",variant:"circle",disabled:t,className:"mt-1",children:(0,h.t)("save")})})]})},V=function(e){var t=e.mediaTranscript,r=e.updateAsync,o=e.isUpdating;if(!t)return null;var i={enabled:!!(null==t?void 0:t.enabled),selected_file:null==t?void 0:t.selected_file};return(0,n.jsx)(C.l,{id:"media-transcript",onSubmit:function(e){null==r||r(e)},defaultValues:i,children:(0,n.jsx)(q,{isUpdating:!!o,supportsAi:!!(null==t?void 0:t.supports_ai),aiFileDownloadUrl:(null==t?void 0:t.is_ai_ready)&&(null==t?void 0:t.webvtt_file_url)||""})})},W=function(e){var t=e.children;return(0,n.jsx)("div",{className:"bg-primary border-light absolute right-0 top-1 w-80 cursor-default rounded-md border p-5",children:t})},J=(0,s.forwardRef)(function(e,t){var r=e.iconType,o=e.onClick;return(0,n.jsx)("button",{ref:t,type:"button",onClick:o,className:"bg-primary text-dark border-light hover:bg-secondary flex size-8 cursor-pointer items-center justify-center rounded-full border",children:(0,n.jsx)(R.JO,{type:r,size:16})})});J.displayName="Button";var G=r(568880),K=r(279113),Q=r(396353),X=r(615556),Y=r(286638);function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function et(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function en(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ei={strategy:"fixed",placement:"bottom-end"},ea={enter:"transition ease-out duration-100",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},el=Object.assign(function(e){var t=e.iconType,r=e.isOpen,o=e.onToggle,i=e.children,a=eo((0,s.useState)(null),2),l=a[0],c=a[1],u=eo((0,s.useState)(null),2),d=u[0],f=u[1],p=(0,s.useRef)(null),m=(0,X.D)(d,l,ei),b=m.styles,y=m.attributes;return(0,Y.Z)(p,function(e){if(et(e.target,Node)){var t;et(e,MouseEvent)&&et(e.target,Node)&&(null==d?void 0:d.contains(e.target))||et(t=e.target,Element)&&null!==t.closest(".modal__box")||o()}}),(0,n.jsxs)(G.J,{as:"div",className:"relative",children:[(0,n.jsx)(J,{iconType:t,onClick:o,ref:f}),(0,n.jsx)(K.u,en(er({},ea),{show:r,children:r&&(0,n.jsx)(Q.h,{as:s.Fragment,children:(0,n.jsx)(G.J.Panel,en(er({ref:c,style:b.popper},y.popper),{className:"z-20",children:(0,n.jsx)("div",{ref:p,children:(0,n.jsx)(W,{children:i})})}))})}))]})},{Body:W,Button:J}),es=r(62263),ec=r(15222),eu=function(e){var t=e.mediaSettings,r=e.updateMediaSettings,o=e.isUpdatingMediaSettings,i=e.closePopover;return(0,n.jsxs)(C.l,{id:"thumbnail-image-settings",onSubmit:function(e){r(e),i()},shouldStopPropagation:!0,defaultValues:{custom_thumbnail:t.custom_thumbnail_signed_id},children:[(0,n.jsx)(C.l.Item,{name:"custom_thumbnail",translationRoot:"media_settings",hideBorder:!0,fullWidth:!0,hideDescription:!0,className:"!p-0",children:(0,n.jsx)(ec.D,{name:"custom_thumbnail",aspectRatio:16/9,hideUnsplash:!0,showAddCoverBtn:!0,changeImageText:(0,h.t)("replace"),title:(0,h.t)("media_settings.thumbnail_title"),customAddCoverBtn:(0,n.jsxs)("div",{className:"bg-primary border-primary text-dark my-2 flex w-full cursor-pointer flex-col items-center justify-center rounded-md border border-dashed px-4 py-5 text-center",children:[(0,n.jsx)("div",{className:"bg-tertiary flex size-8 items-center justify-center rounded-full",children:(0,n.jsx)(R.JO,{type:"plus",viewBox:"0 0 20 20"})}),(0,n.jsx)("span",{className:"mt-0.5 text-xs",children:(0,n.jsx)(es.w,{content:(0,h.t)("media_settings.image_upload_description")})})]})})}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(A.z,{type:"submit",variant:"circle",disabled:o,className:"mt-3",children:(0,h.t)("save")})})]})};function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ef=function(e){var t,r,o=e.mediaTranscript,i=e.canEditTranscript,a=e.updateAsyncTranscript,l=e.isUpdatingTranscript,d=e.signedId,f=e.contentType,p=(0,c.wh)().currentCommunityMember,m=(0,u.vb)(p),b=null==f?void 0:f.match("audio.*"),y=null==(r=window.webview)?void 0:r.isInsideMobileWebview,h=(0,E.E)(d||""),g=h.mediaSettings,j=h.update,x=h.isUpdating,O=(t=(0,s.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ed(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ed(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=O[0],S=O[1],P=function(e){S(w===e?null:e)};return(0,n.jsxs)("div",{className:(0,v.A)("invisible absolute z-10 flex gap-3 group-hover:visible",{"!visible":w,"right-4 top-4":!b,"bottom-12 right-2.5":b}),children:[g&&m&&!y&&(0,n.jsxs)(n.Fragment,{children:[!b&&(0,n.jsx)(el,{isOpen:"thumbnail"===w,onToggle:function(){return P("thumbnail")},iconType:"16-file-image",children:(0,n.jsx)(eu,{mediaSettings:g,updateMediaSettings:j,isUpdatingMediaSettings:x,closePopover:function(){return P("thumbnail")}})}),(0,n.jsx)(el,{isOpen:"download"===w,onToggle:function(){return P("download")},iconType:"16-download",children:(0,n.jsx)(N,{mediaSettings:g,updateMediaSettings:j,isUpdatingMediaSettings:x,closePopover:function(){return P("download")}})})]}),i&&(0,n.jsx)(el,{isOpen:"transcript"===w,onToggle:function(){return P("transcript")},iconType:"16-transcript",children:(0,n.jsx)(V,{mediaTranscript:o,updateAsync:a,isUpdating:l})})]})},ep=r(189713),em="media_player.transcoding",eb=function(e){var t=e.status,r="failed"===t?"failed":"in_progress";return(0,n.jsxs)("div",{className:"absolute left-0 top-0 z-10 size-full",children:[(0,n.jsx)("div",{className:"size-full bg-black opacity-80"}),(0,n.jsx)("div",{className:"absolute left-0 top-0 flex size-full items-center justify-center",children:(0,n.jsxs)("div",{className:"w-10/12 max-w-[360px] text-center",children:[(0,n.jsxs)("div",{className:"space-x-2",children:["failed"===t&&(0,n.jsx)(R.JO,{type:"20-alert",size:20,className:"!h-4 !w-4 !text-white"}),(0,n.jsx)(ep.Z.LabelSm,{color:"text-white",weight:"semibold",children:(0,h.t)([em,r,"title"])})]}),(0,n.jsx)(ep.Z.LabelSm,{color:"text-white",children:(0,h.t)([em,r,"description"])})]})})]})},ey=r(886674),eh=r(529449),ev=r(920255),eg=r(198435);function ej(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ex=(0,ev.Ue)()((0,eg.tJ)(function(e,t){return{blobs:[],saveProgress:function(t,r){e(function(e){var n;return{blobs:[{signedId:t,progress:r}].concat(function(e){if(Array.isArray(e))return ej(e)}(n=e.blobs.filter(function(e){return e.signedId!==t}).slice(0,99))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return ej(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ej(e,t)}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}})},getProgress:function(e){var r,n=t().blobs.find(function(t){return t.signedId===e});return null!=(r=null==n?void 0:n.progress)?r:0},deleteProgress:function(t){e(function(e){return{blobs:e.blobs.filter(function(e){return e.signedId!==t})}})}}},{name:"media-progress",version:1})),eO=r(249745);function ew(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ew(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ew(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eP=(0,s.memo)(function(e){var t,r,o=e.src,i=e.poster,a=e.type,l=e.mediaTranscoding,p=e.mediaTranscriptId,m=e.isDownloadable,b=void 0!==m&&m,y=e.isTranscodingEnabled,h=void 0!==y&&y,v=e.downloadUrl,g=e.variants,j=e.preload,x=void 0===j?"none":j,O=e.signedId,w=e.onProgress,S=e.menuPosition,P=void 0===S?"top":S,_=(0,c.wh)(),k=_.currentCommunityMember,A=_.currentCommunitySettings,C=(0,u.vb)(k),N=(0,s.useRef)(null),T=(0,s.useRef)(null),I=eS((0,s.useState)(null),2),M=I[0],L=I[1],R=h?null==g?void 0:g.hls:null,F=eS((0,s.useState)(null!=R?R:o),2),U=F[0],z=F[1],$=U.endsWith(".m3u8"),B=["video/mp4","video/mpeg","video/ogg","audio/mpeg","audio/ogg","audio/mp4","audio/wav","audio/x-wav"].includes(a),Z=$||B,H=ex(function(e){return e.getProgress(O||"")}),q=ex(function(e){return e.deleteProgress}),V=ex(function(e){return e.saveProgress}),W=function(){O&&q(O)},J=eS((0,s.useState)(H),2),G=J[0],K=J[1],Q=p||M,X=!!(null==A?void 0:A.community_ai_settings_enabled),Y=(0,E.E)(O||"").mediaSettings;(0,s.useEffect)(function(){G&&O&&V(O,G)},[G,O,V]);var ee=(0,f.k)({enabled:h&&!Z,signedId:O,mediaTranscoding:l,onSuccess:function(e){var t=e.hlsUrl;return t&&z(t)}}).status,et=(0,eO.q)(Q),er=et.parsedWebvtt,en=et.mediaTranscript,eo=et.canEdit,ei=et.updateAsync,ea=et.isUpdating,el=et.isLoading,es=et.refetch,ec=null!=(t=null==er?void 0:er.cues)?t:[],eu=null!=(r=null==Y?void 0:Y.poster_url)?r:i,ed=h&&!Z&&"succeeded"!==ee,ep=X&&(null==en?void 0:en.enabled)&&(null==en?void 0:en.is_ready),em=X&&!p&&(null==k?void 0:k.is_admin),ev="number"==typeof p?String(p):"",eg=ep?d.CG.showVtt({id:ev}):void 0;return(0,n.jsxs)("div",{className:"group relative",children:[ed&&(0,n.jsx)(eb,{status:ee}),(0,n.jsx)(D,{captionsUrl:eg,contentType:a,downloadUrl:null!=v?v:null==g?void 0:g.original,isDownloadable:b||C,onTimeUpdate:K,playerRef:N,poster:eu,src:U,menuPosition:P,startTime:G,preload:x,onEnded:W,onProgress:w,signedId:O}),(0,n.jsx)(ef,{signedId:O,mediaTranscript:en,canEditTranscript:eo,updateAsyncTranscript:ei,isUpdatingTranscript:ea,contentType:a}),ep&&(0,n.jsx)(eh.Y,{onSeek:function(e){var t=N.current;t&&(t.plyr.currentTime=e)},onFullscreenSeek:function(e){var t=T.current;t&&(t.plyr.currentTime=e)},renderFullscreenPlayer:function(){return(0,n.jsx)(D,{captionsUrl:eg,contentType:a,downloadUrl:null!=v?v:null==g?void 0:g.original,isDownloadable:b||C,onTimeUpdate:K,playerRef:T,poster:eu,src:U,startTime:G,preload:x,onEnded:W,onProgress:w,menuPosition:P,signedId:O})},onFullscreenToggle:function(){var e=N.current;e&&e.plyr.pause()},cues:ec,currentTime:G}),em&&(0,n.jsx)(ey.D,{url:o,onNewMediaTranscript:L,onMediaTranscriptUpdated:function(e){Q!==e?L(e):es()},mediaTranscript:en,isLoading:el})]})});eP.displayName="TranscriptsPlayerComponent";var e_=function(e){var t=e.type.toLowerCase().startsWith("video/"),r=(0,l.T)({signedId:e.signedId,posterUrl:e.poster,isDownloadable:e.isDownloadable,mediaTranscriptId:e.mediaTranscriptId}),o=r.posterUrl,i=r.isDownloadable,s=r.mediaTranscriptId;return t?(0,n.jsx)(a.Y,{src:e.src,contentType:e.type,mediaTranscoding:e.mediaTranscoding,mediaTranscriptId:s,downloadable:i,downloadUrl:e.downloadUrl,posterUrl:o,chaptersUrl:e.chaptersUrl,previewThumbnailsUrl:e.previewThumbnailsUrl,signedId:e.signedId,variants:e.variants,onProgress:e.onProgress,preload:e.preload}):(0,n.jsx)(eP,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))},ek=function(e){return(0,n.jsx)(o.aH,{children:(0,n.jsx)(i.VW,{children:(0,n.jsx)(e_,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})})}},249745:function(e,t,r){r.d(t,{q:()=>d});var n=r(714844),o=r(100334),i=r(309785),a=r(169530),l=r(314121),s=r(200417),c=r(904812),u=function(e){var t=e||{},r=t.id,o=t.enabled,i=t.is_ready,a=(0,n.useQuery)(["mediaTranscript","webvtt",r],function(){var e;return fetch(c.CG.showVtt({id:null!=(e=null==r?void 0:r.toString())?e:""})).then(function(e){return e.text()})},{enabled:!!r&&i&&o}),u=a.data,d=a.isError,f=a.refetch,p=(0,l.useMemo)(function(){if(!u||d)return null;var e=new s.WebVTTParser().parse(u);return(null==e?void 0:e.cues)&&(e.cues=e.cues.map(function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={text:e.text.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'").replace(/&apos;/g,"'")},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t})),e},[u,d]);return{webvtt:u,parsedWebvtt:p,refetch:f}},d=function(e){var t=(0,a.pm)(),r=t.success,l=t.error,s=(0,n.useQuery)(["mediaTranscript",e],function(){return i.ac.show(null!=e?e:-1)},{enabled:!!e}),c=s.data,d=s.isLoading,f=s.refetch,p=u(c)||{},m=p.webvtt,b=p.parsedWebvtt,y=p.refetch,h=(0,n.useMutation)(function(t){return i.ac.update(null!=e?e:-1,t)},{onSuccess:function(){r((0,o.t)("media_player.transcript_menu.success")),f(),y()},onError:function(e){l((0,o.t)("media_player.transcript_menu.error")),console.error(e)}}),v=h.mutateAsync,g=h.mutate,j=h.isLoading,x=null==c?void 0:c.can_edit;return{mediaTranscript:c,canEdit:x,isLoading:d,isUpdating:j,webvtt:m,parsedWebvtt:b,update:g,updateAsync:v,refetch:f}}},694832:function(e,t,r){r.d(t,{Y:()=>u});var n=r(683551),o=r(379600),i=r.n(o),a=r(214813),l=r(467213),s=function(e){var t=e.className,r=e.children;return(0,n.jsx)("span",{className:i()("truncate",t),children:r})},c="flex min-w-0",u=function(e){var t,r,o=e.className,u=e.tooltipOptions,d=e.children;return(0,a.isEmpty)(u)||(0,a.isEmpty)(null==u?void 0:u.content)?(0,n.jsx)("span",{className:i()(c,o),children:(0,n.jsx)(s,{children:d})}):(0,n.jsx)(l.Y,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},u),r=r={className:i()(c,null==u?void 0:u.className),children:(0,n.jsx)(s,{children:d})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},278555:function(e,t,r){r.d(t,{g:()=>l});var n=r(683551),o=r(643843),i=r(844651),a={5:"2",6:"2",7:"3.5",8:"3.5",9:"3.5",10:"3.5",14:"3.5",16:"5",24:"5"},l=function(e){var t=e.idleColor,r=e.isFullRounded,l=e.name,s=e.onlineColor,c=e.size,u=void 0===c?"8":c,d=e.src,f=e.status;return(0,n.jsxs)("div",{className:"relative inline-flex flex-col","data-testid":"user-image-status-element",children:[(0,n.jsx)(i.s,{isFullRounded:r,name:l,size:u,src:d}),!!f&&"string"==typeof f&&("online"===f||"idle"===f||"offline"===f)&&"offline"!==f&&(0,n.jsx)("div",{className:"absolute bottom-1 right-1 translate-x-1/2 translate-y-1/2","data-testid":"status-indicator-container",children:(0,n.jsx)(o.E,{idleColor:t,onlineColor:s,size:a[u],status:f})})]})};l.displayName="UserImageStatus"},289502:function(e,t,r){r.d(t,{W:()=>l});var n=r(683551),o=r(379600),i=r.n(o),a=r(904812),l=function(e){var t,r,o=e.src,l=e.type,s=e.poster,c=e.rounded,u=e.isInset,d=void 0!==u&&u,f=e.mediaTranscriptId,p=e.preload,m=e.controlsList,b=e.description,y=void 0===b?"":b,h=e.className,v=e.shouldAutoPlay,g=e.styles,j=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["src","type","poster","rounded","isInset","mediaTranscriptId","preload","controlsList","description","className","shouldAutoPlay","styles"]);return(0,n.jsxs)("video",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:i()(h,{"wb-rounded-md":(void 0===c||c)&&!d,"wb-h-full wb-w-full wb-bg-black":d}),controls:!0,controlsList:void 0===m?"nodownload":m,preload:void 0===p?"metadata":p,poster:s,autoPlay:void 0!==v&&v,style:g},j),r=r={children:[(0,n.jsx)("source",{src:o,type:l}),y&&(0,n.jsx)("p",{className:"wb-sr-only",children:y}),f&&(0,n.jsx)("track",{kind:"captions",src:a.CG.showVtt({id:String(f)})})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},886362:function(e,t,r){r.d(t,{t:()=>a});var n=r(683551),o=r(379600),i=r.n(o),a=function(e){var t=e.children,r=e.backgroundNone,o=void 0!==r&&r,a=e.className;return(0,n.jsx)("div",{className:i()("rounded-md bg-none px-4 py-5 sm:p-6",{"bg-none":o,"bg-tertiary":!o},void 0===a?"":a),children:t})}}}]);
//# sourceMappingURL=/packs/js/7096-74511fbc301bd652.js.map